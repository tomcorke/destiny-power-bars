{"version":3,"sources":["components/CharacterDisplay.module.scss","components/characterDisplay/PowerBar.module.scss","components/characterDisplay/PowerBars.module.scss","components/characterDisplay/CharacterLinks.module.scss","components/LoadingSpinner.module.scss","services/config.ts","services/events.ts","services/ga.ts","services/bungie-api.ts","services/bungie-auth.ts","components/characterDisplay/CharacterLinks.tsx","constants.ts","services/masterwork.ts","components/characterDisplay/PowerBar.tsx","components/characterDisplay/PowerBars.tsx","components/characterDisplay/InterPowerBar.tsx","components/characterDisplay/Power.tsx","components/characterDisplay/PowerDetails.tsx","components/characterDisplay/PowerHints.tsx","components/CharacterDisplay.tsx","components/FetchSpinner.tsx","components/BuildStamp.tsx","components/KoFi.tsx","images/icons/github.svg","images/icons/twitter.svg","services/vendor-engrams.ts","components/SocialLinks.tsx","components/Footer.tsx","components/Header.tsx","components/LoadingSpinner.tsx","components/LazyImage.tsx","components/LoginPrompt.tsx","components/MembershipSelect.tsx","components/VendorDisplay.tsx","services/utils.ts","services/api.ts","components/LoadingChecklist.tsx","components/Stonks.tsx","App.tsx","serviceWorker.ts","index.tsx","components/characterDisplay/InterPowerBar.module.scss","App.module.scss","components/LazyImage.module.scss","components/LoadingChecklist.module.scss","components/FetchSpinner.module.scss","components/SocialLinks.module.scss","components/Header.module.scss","components/LoginPrompt.module.scss","components/Stonks.module.scss","components/KoFi.module.scss","components/characterDisplay/PowerHints.module.scss","components/characterDisplay/PowerDetails.module.scss","components/MembershipSelect.module.scss","components/characterDisplay/Power.module.scss","components/BuildStamp.module.scss","images/icons/Ko-fi_Icon_RGBforDarkBg_sm.png","components/VendorDisplay.module.scss","components/Footer.module.scss","images/screenshots/example-titan-character-display-with-info-blur.jpg","images/screenshots/example-titan-character-display-with-info.png"],"names":["module","exports","process","REACT_APP_BUNGIE_API_KEY","REACT_APP_BUNGIE_OAUTH_CLIENT_ID","REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET","Error","EVENTS","BUNGIE_API_KEY","BUNGIE_OAUTH_CLIENT_ID","BUNGIE_OAUTH_CLIENT_SECRET","eventEmitter","EventEmitter","useEvent","eventName","handler","savedHandler","useRef","useEffect","current","eventListener","eventData","addListener","removeListener","ga","ReactGA","initialize","set","anonymizeIp","pageview","window","location","pathname","search","getCachedManifestDataPromise","cachedManifestData","getManifestPromise","BungieSystemDisabledError","bungieAuthedFetch","config","a","accessToken","getAccessToken","headers","Authorization","url","params","Object","entries","map","key","value","encodeURIComponent","fetch","credentials","response","status","emit","UNAUTHED_FETCH_ERROR","json","messageData","ErrorStatus","toString","manifestPropertyWhitelist","getCachedManifestData","console","log","get","manifestData","getRemoteManifestData","manifest","version","FETCH_MANIFEST_DATA","jsonWorldContentPaths","en","manifestDataResponse","PARSE_MANIFEST_DATA","keys","forEach","includes","STORE_MANIFEST_DATA","localStorage","setItem","getManifest","Promise","resolve","then","pendingGetCachedManifestData","event","category","action","nonInteraction","GET_MANIFEST","getDestinyManifest","localStorageManifestVersion","getItem","Response","LOAD_MANIFEST_DATA","every","error","undefined","freshManifestData","result","MANIFEST_DATA_READY","catch","err","MANIFEST_FETCH_ERROR","getBasicProfile","membershipType","membershipId","getProfile","components","destinyMembershipId","getFullProfile","on","removeItem","clearStorage","hasManuallyAuthed","getAuthUrl","stringify","response_type","client_id","client_secret","hasNavigated","redirectToAuth","assign","e","manualStartAuth","autoSelectDestinyMembership","destinyMemberships","length","setSelectedDestinyMembership","crossSavePrimaryMemberships","filter","m","crossSaveOverride","nonCrossSaveMemberships","handleTokenResponse","tokenResponse","data","access_token","tokenDuration","expires_in","expiryTime","Date","now","refreshToken","refresh_token","refreshTokenDuration","refresh_expires_in","refreshExpiryTime","bungieMembershipId","membership_id","getMembershipDataById","destinyMembershipsResponse","authSuccess","JSON","selectedMembership","getSelectedDestinyMembership","some","fetchAccessToken","authCode","body","grant_type","code","cache","method","redirect","referrer","refreshAccessToken","handleResult","hasValidAccessToken","accessTokenExpiryTime","parseInt","hasValidRefreshToken","refreshTokenExpiryTime","hasValidAuth","accessTokenIsValid","getDestinyMemberships","destinyMembershipsString","parse","message","hasDestinyMemberships","destinyMembershipString","memberships","hasSelectedDestinyMembership","membership","auth","queryParams","URLSearchParams","authResponse","replace","origin","isAccessTokenValid","isRefreshTokenValid","logOut","LOG_OUT","link","text","tags","linkText","URL","hostname","href","target","rel","className","classnames","tag","STYLES","RAID_REPORT_PLATFORMS","1","2","3","4","5","CharacterLinks","characterId","onImageExportClick","useState","isHidden","setHidden","characterLinks","hide","content","onClick","ITEM_SLOT_BUCKETS","ITEM_BUCKET_SLOTS","reduce","buckets","slot","bucket","ORDERED_ITEM_SLOTS","ITEM_TYPE_ARMOR","ITEM_TYPE_WEAPON","CLASS_NAMES","isMasterwork","item","state","PowerBar","min","max","avgValue","label","icon","isMasterworked","range","perc","Math","floor","avgPerc","fullLabelText","fullLabel","power","belowAverage","slotName","barWrapper","iconWrapper","src","alt","masterworkOverlay","barContainer","filledBar","style","width","barLine","left","classItemNames","hunter","titan","warlock","PowerBars","powerBySlot","slots","topItemBySlot","instanceData","primaryStat","overallPower","roundedPower","minItemPower","values","minPowerToDisplay","maxItemPower","maxItemPowerGrouping","maxPowerToDisplay","ceil","powerBars","powerRange","minPower","rangeLine","maxPower","bars","bestItem","character","chest","classItem","energy","gloves","head","kinetic","legs","itemDefinition","displayProperties","powerLabel","indicator","InterPowerBar","fillPerc","interPowerBar","bar","fillBar","barOverlay","Power","children","withSign","inlinePowerNumber","numberWithSign","ProgressBar","withThousands","n","progressBar","title","progressBarFill","progressBarOverlay","PowerDetails","overallPowerExact","artifactData","bonusPower","details","detailsRow","detailsLabel","defailsValue","detailsInlineIcon","iconPath","name","detailsValue","progressToNextLevel","nextLevelAt","PowerHints","potentialOverallPower","powerRequiredToReachNext","powerRequiredToReachPotential","hints","hint","dropHint","legendaryWorldDropHint","hintExtra","hintExtraInner","worldDropHint","powerfulHint","pinnacleHint","CharacterDisplay","onDragStart","onDragEnd","onDragDrop","summableArtifactBonusPower","elementRef","domToImage","saveAs","toBlob","blob","useRenderElementImage","renderImage","backgroundColor","ref","isDragging","setIsDragging","isDraggingOver","setIsDraggingOver","characterDisplayWrapper","dragging","dragOver","onDragEnter","onDragOver","stopPropagation","preventDefault","onDragLeave","onDrop","draggable","dragOverlay","CharacterDisplayBodyWrapper","red","green","blue","rgbString","emblemColor","characterDisplay","header","emblemBackground","emblemBackgroundPath","withTitle","substr","toUpperCase","headerOverlayBar","FetchSpinner","fetchSpinnerContainer","anchor","spinner","spinnerSmall","gitHead","BuildStamp","buildStamp","Kofi","kofiContainer","height","border","kofiIcon","_extends","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref","svgRef","props","role","viewBox","ForwardRef","forwardRef","vendorEngramsData","vendorEngramsRefreshTimer","vendorEngramsRefreshPromise","SocialLinks","socialLinks","fill","Footer","footer","Header","headerContainer","subHeader","author","LoadingSpinner","loading","spinnerLarge","spinnerLargeDouble","spinnerSmallDouble","LazyImage","lowResImage","highResImage","highResImageLoaded","setHighResImageLoaded","onHighResImageLoad","useCallback","lazyImage","hidden","overlay","onLoad","DEFAULT_ON_LOGIN_CLICK","LoginPrompt","onLoginClick","loginContainer","exampleImage","ExampleTitanCharacterDisplayImageLowRes","ExampleTitanCharacterDisplayImage","login","loginButton","defaultOnLogout","PLATFORMS","isCrossSavePrimary","isCrossSaveSecondary","CrossSaveDisplay","applicableMembershipTypes","crossSaveDisplayWrapper","crossSaveDisplay","t","s","titleCase","join","crossSaveIcon","crossSaveMembershipIcon","MembershipSelect","onMembershipSelect","api","onLogout","bungieAuth","membershipSelect","crossSaveActive","crossSaveDisabled","membershipDisplayName","displayName","logOutIcon","logOutText","VENDOR_ENGRAMS_DROP_NO_DATA","VENDOR_ENGRAMS_DROP_LOW","VENDOR_ENGRAMS_DROP_HIGH","VENDOR_DISPLAY_NAMES","devrim","sloane","failsafe","asher","zavala","shaxx","banshee","fanboy","bray","werner","getVendorDisplayName","shorthand","refreshVendorEngramsData","jsonData","updateTimestamp","getVendorEngramsData","setInterval","warn","Vendor","vendorInner","vendor","manifestVendor","DestinyVendorDefinition","vendorID","high","drop","low","noData","vendorListDisplay","vendors","vendorList","v","vendorListItem","VendorDisplay","vendorData","setVendorData","attemptRefreshVendorData","useInterval","vendorsLastCheckedString","setVendorsLastCheckedString","newString","HumanizeDuration","round","largest","highVendors","display","noDataVendors","vendorDisplay","section","withSeparator","description","loadCharacterDisplayOrder","storedValue","saveCharacterDisplayOrder","characterOrder","getAveragePower","sum","getOverallPower","mergeItems","characterItemMap","allItems","characterItems","concat","items","mapAndFilterItems","itemInstances","itemInstanceId","DestinyInventoryItemDefinition","itemHash","itemType","inventory","bucketTypeHash","equipRequiredLevel","baseCharacterLevel","classType","cannotEquipReason","canEquip","isItemEquippableByCharacter","getItemScore","priorityItems","score","pi","getEquipLabel","equippingBlock","uniqueLabel","getDataForCharacterId","characters","equippedCharacterItems","allCharacterItems","profileInventories","profileProgression","relevantProfileItems","itemsBySlot","groupBy","mapValues","maxBy","uniqueEquippedGroups","forIn","uniqueEquippedGroup","validItemCombinations","otherItems","otherItem","isCombinationValid","combination","nonExotics","push","bestCombination","sumBy","getPowerBySlot","artifactItemComponent","find","bucketHash","artifactInstance","seasonalArtifact","artifactDefinition","powerBonus","powerBonusProgression","potentialPowerBySlot","tempPotentialOverallPower","titleDefinition","DestinyRecordDefinition","titleRecordHash","titleInfo","titlesByGenderHash","genderHash","getCachedCharacterData","setCharacterData","dataString","parsedData","getCharacterData","setIsFetchingCharacterData","pendingManifest","destinyMembership","fullProfile","characterEquipment","characterInventories","profileInventory","itemComponents","instances","characterEquipments","manifestResult","characterIds","characterData","id","bungieApi","utils","LoadingChecklist","withTopMargin","topMargin","createStonk","index","x","y","side","rot","element","stonk","top","Stonks","overrideSeed","overrideStonkLevel","getTime","seasonOfDawnEnd","daysUntilEnd","seed","getUTCDate","rand","gen","create","stonkLevel","numToCreate","stonks","floatBetween","maxY","pow","sortedStonks","sort","b","stonkContainer","doAuth","throttle","setIsAuthed","setAuthError","doGetManifest","setBungieSystemDisabled","setBungieServiceUnavailable","setManifestData","setManifestError","doGetCharacterData","isFetchingCharacterData","updateCharacterData","newData","newOverallPower","c","newArtifactPower","newTotalPower","dimension1","dimension2","dimension3","AppWrapper","App","AppInner","disableManualLogin","setDisableManualLogin","isAuthed","hasAuthError","hasSelectedMembership","setHasMembership","hasManifestError","isBungieSystemDisabled","isBungieServiceUnavailable","manifestState","setManifestState","hasManifestData","hasLoadedCachedCharacterData","setHasLoadedCachedCharacterData","onSelectMembership","statusAuthError","getDefaultCharacterDisplayOrder","isValidCharacterDisplayOrder","draggingCharacterId","setDraggingCharacterId","characterDisplayOrder","setCharacterDisplayOrder","dropOnCharacterId","dropCharacterId","currentCharacterOrder","swappedOrder","slice","splice","useCharacterOrder","shouldShowStonks","showStonks","setShowStonks","charactersContainer","loadingChecklistItems","addToChecklist","isComplete","isFailed","Boolean","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.47a905cc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"characterDisplayWrapper\":\"CharacterDisplay_characterDisplayWrapper__1IXlj\",\"dragOverlay\":\"CharacterDisplay_dragOverlay__2UjDt\",\"dragOver\":\"CharacterDisplay_dragOver__1FVZx\",\"dragging\":\"CharacterDisplay_dragging__37e2z\",\"characterDisplay\":\"CharacterDisplay_characterDisplay__20O9A\",\"header\":\"CharacterDisplay_header__2fx5d\",\"emblemBackground\":\"CharacterDisplay_emblemBackground__2pAjE\",\"emblemSecondarySpecial\":\"CharacterDisplay_emblemSecondarySpecial__15-aM\",\"emblemSecondaryOverlay\":\"CharacterDisplay_emblemSecondaryOverlay__3IJk5\",\"name\":\"CharacterDisplay_name__2j8PA\",\"power\":\"CharacterDisplay_power__1p583\",\"title\":\"CharacterDisplay_title__G1RAx\",\"withTitle\":\"CharacterDisplay_withTitle__2QVYI\",\"headerOverlayBar\":\"CharacterDisplay_headerOverlayBar__2pT62\",\"content\":\"CharacterDisplay_content__263Ab\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"barWrapper\":\"PowerBar_barWrapper__2Er15\",\"iconWrapper\":\"PowerBar_iconWrapper__1k9U_\",\"icon\":\"PowerBar_icon__3zN_u\",\"masterworkOverlay\":\"PowerBar_masterworkOverlay__2DcIk\",\"barContainer\":\"PowerBar_barContainer__KfIri\",\"barLine\":\"PowerBar_barLine__Fc3BR\",\"filledBar\":\"PowerBar_filledBar__3a32S\",\"label\":\"PowerBar_label__32eba\",\"power\":\"PowerBar_power__2ZVuC\",\"max\":\"PowerBar_max__L5cvP\",\"belowAverage\":\"PowerBar_belowAverage__2r-Dj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"powerBars\":\"PowerBars_powerBars__33tbb\",\"powerRange\":\"PowerBars_powerRange__te0OD\",\"rangeLine\":\"PowerBars_rangeLine__3sXeP\",\"powerLabel\":\"PowerBars_powerLabel__z9Lm2\",\"indicator\":\"PowerBars_indicator__1UcsC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"characterLinks\":\"CharacterLinks_characterLinks__1TWEL\",\"content\":\"CharacterLinks_content__2v01s\",\"link\":\"CharacterLinks_link__zfRay\",\"linkText\":\"CharacterLinks_linkText__3ZLGm\",\"link_tag_dim\":\"CharacterLinks_link_tag_dim__3F49B\",\"link_tag_braytech\":\"CharacterLinks_link_tag_braytech__34k9M\",\"link_tag_destinysets\":\"CharacterLinks_link_tag_destinysets__13QtP\",\"link_tag_d2checklist\":\"CharacterLinks_link_tag_d2checklist__3rg2p\",\"link_tag_guardianstats\":\"CharacterLinks_link_tag_guardianstats__MnZrG\",\"link_tag_raidreport\":\"CharacterLinks_link_tag_raidreport__2W1oW\",\"hide\":\"CharacterLinks_hide__2jGa_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"anchor\":\"LoadingSpinner_anchor__78Pnm\",\"spinner\":\"LoadingSpinner_spinner__32tWn\",\"spin\":\"LoadingSpinner_spin__3FVoi\",\"loading\":\"LoadingSpinner_loading__3Y_gu\",\"spinnerLarge\":\"LoadingSpinner_spinnerLarge__KooL0\",\"spinnerLargeDouble\":\"LoadingSpinner_spinnerLargeDouble__pi4h9\",\"spinnerSmall\":\"LoadingSpinner_spinnerSmall__27lWl\",\"spinnerSmallDouble\":\"LoadingSpinner_spinnerSmallDouble__2FOGm\",\"status\":\"LoadingSpinner_status__3sgCR\"};","export const BUNGIE_OAUTH_AUTHORIZE_URL =\n  \"https://www.bungie.net/en/OAuth/Authorize\";\nexport const BUNGIE_OAUTH_TOKEN_URL =\n  \"https://www.bungie.net/platform/app/oauth/token/\";\n\nconst {\n  REACT_APP_BUNGIE_API_KEY,\n  REACT_APP_BUNGIE_OAUTH_CLIENT_ID,\n  REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET\n} = process.env;\n\nif (\n  !REACT_APP_BUNGIE_API_KEY ||\n  !REACT_APP_BUNGIE_OAUTH_CLIENT_ID ||\n  !REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET\n) {\n  throw Error(\"React env vars must be provided\");\n}\n\nexport const BUNGIE_API_KEY = REACT_APP_BUNGIE_API_KEY;\nexport const BUNGIE_OAUTH_CLIENT_ID = REACT_APP_BUNGIE_OAUTH_CLIENT_ID;\nexport const BUNGIE_OAUTH_CLIENT_SECRET = REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET;\n","import EventEmitter from \"events\";\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nexport enum EVENTS {\r\n  GET_MANIFEST = \"GET_MANIFEST\",\r\n  LOAD_MANIFEST_DATA = \"LOAD_MANIFEST_DATA\",\r\n  FETCH_MANIFEST_DATA = \"FETCH_MANIFEST_DATA\",\r\n  PARSE_MANIFEST_DATA = \"PARSE_MANIFEST_DATA\",\r\n  STORE_MANIFEST_DATA = \"STORE_MANIFEST_DATA\",\r\n  MANIFEST_DATA_READY = \"MANIFEST_DATA_READY\",\r\n  MANIFEST_FETCH_ERROR = \"MANIFEST_FETCH_ERROR\",\r\n\r\n  UNAUTHED_FETCH_ERROR = \"UNAUTHED_FETCH_ERROR\",\r\n\r\n  LOG_OUT = \"LOG_OUT\"\r\n}\r\n\r\nconst eventEmitter = new EventEmitter();\r\n\r\nexport default eventEmitter;\r\n\r\ntype EventHandler<T extends any[]> = (args: T) => void;\r\n\r\nfunction useEvent<T extends any[]>(\r\n  eventName: EVENTS,\r\n  handler: EventHandler<T>\r\n) {\r\n  const savedHandler = useRef<EventHandler<T>>();\r\n\r\n  useEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    const eventListener = (eventData: T) => savedHandler.current?.(eventData);\r\n    eventEmitter.addListener(eventName, eventListener);\r\n    return () => {\r\n      eventEmitter.removeListener(eventName, eventListener);\r\n    };\r\n  }, [eventName]);\r\n}\r\n\r\nexport { useEvent };\r\n","import ReactGA from \"react-ga\";\r\n\r\nconst ENABLED = true;\r\n\r\ninterface AnalyticsInterface {\r\n  set: (props: { [key: string]: string | boolean }) => void;\r\n  initialize: (clientId: string, options: { debug?: boolean }) => void;\r\n  pageview: (url: string) => void;\r\n  event: (eventProps: {\r\n    category: string;\r\n    action: string;\r\n    label?: string;\r\n    nonInteraction?: boolean;\r\n  }) => void;\r\n}\r\n\r\nlet ga: AnalyticsInterface = ReactGA;\r\n\r\nif (ENABLED) {\r\n  ga.initialize(\"UA-149614480-1\", {\r\n    // debug: process.env.NODE_ENV === \"development\"\r\n  });\r\n\r\n  // Anonymize IP addresses, yay GDPR\r\n  ga.set({ anonymizeIp: true });\r\n  ga.pageview(window.location.pathname + window.location.search);\r\n} else {\r\n  // Set mock GA object to disable without removing other code\r\n  ga = {\r\n    initialize: () => undefined,\r\n    pageview: () => undefined,\r\n    set: (...args: any[]) => undefined,\r\n    event: (...args: any[]) => undefined\r\n  };\r\n}\r\n\r\nexport default ga;\r\n","import {\n  DestinyInventoryItemDefinition,\n  DestinyManifest,\n  DestinyRecordDefinition,\n  DestinyVendorDefinition,\n  getDestinyManifest,\n  getProfile\n} from \"bungie-api-ts/destiny2\";\nimport { HttpClientConfig } from \"bungie-api-ts/http\";\nimport { get, set } from \"idb-keyval\";\n\nimport { getAccessToken } from \"./bungie-auth\";\nimport { BUNGIE_API_KEY } from \"./config\";\nimport eventEmitter, { EVENTS } from \"./events\";\nimport ga from \"./ga\";\n\nexport class BungieSystemDisabledError extends Error {\n  constructor() {\n    super(\"Bungie API disabled\");\n  }\n}\n\nexport const bungieAuthedFetch = async (config: HttpClientConfig) => {\n  const accessToken = getAccessToken();\n  const headers: { [key: string]: string } = {\n    \"x-api-key\": BUNGIE_API_KEY\n  };\n  if (accessToken) {\n    headers.Authorization = `Bearer ${accessToken}`;\n  }\n  const url = `${config.url}${\n    config.params\n      ? \"?\" +\n        Object.entries(config.params).map(\n          ([key, value]) =>\n            `${encodeURIComponent(key)}=${encodeURIComponent(value as string)}`\n        )\n      : \"\"\n  }`;\n  const response = await fetch(url, { headers, credentials: \"include\" });\n  if (response.status !== 200) {\n    if (response.status === 401) {\n      eventEmitter.emit(EVENTS.UNAUTHED_FETCH_ERROR);\n    }\n    if (response.status === 503) {\n      try {\n        const messageData = await response.json();\n        if (messageData && messageData.ErrorStatus === \"SystemDisabled\") {\n          throw new BungieSystemDisabledError();\n        }\n      } catch (e) {\n        /* Do nothing if unrecognised or un-parseable 503 */\n      }\n    }\n    throw Error(response.status.toString());\n  }\n  return await response.json();\n};\n\nconst MANIFEST_VERSION_KEY = \"MANIFEST_VERSION\";\nconst MANIFEST_IDB_KEY = \"MANIFEST_DATA\";\nexport interface ManifestData {\n  [key: string]: any | undefined;\n  DestinyInventoryItemDefinition: {\n    [key: string]: DestinyInventoryItemDefinition | undefined;\n  };\n  DestinyVendorDefinition: {\n    [key: string]: DestinyVendorDefinition | undefined;\n  };\n  DestinyRecordDefinition: {\n    [key: string]: DestinyRecordDefinition | undefined;\n  };\n}\nconst manifestPropertyWhitelist = [\n  \"DestinyInventoryItemDefinition\",\n  \"DestinyVendorDefinition\",\n  \"DestinyRecordDefinition\"\n];\n\nlet getCachedManifestDataPromise: Promise<ManifestData> | undefined;\nconst getCachedManifestData = async () => {\n  if (!getCachedManifestDataPromise) {\n    getCachedManifestDataPromise = (async () => {\n      console.log(\"Loading manifest data from IDB\");\n      const manifestData = await get(MANIFEST_IDB_KEY);\n      console.log(\"Finished loading manifest data from IDB\");\n      return manifestData as ManifestData;\n    })();\n  }\n  return getCachedManifestDataPromise;\n};\n\nconst getRemoteManifestData = async (manifest: DestinyManifest) => {\n  if (!manifest) {\n    throw Error(\"No manifest!\");\n  }\n  const version = manifest.version;\n  eventEmitter.emit(EVENTS.FETCH_MANIFEST_DATA);\n  const manifestDataResponse = await fetch(\n    `https://www.bungie.net${manifest.jsonWorldContentPaths.en}`\n  );\n  const manifestData: ManifestData = await manifestDataResponse.json();\n  eventEmitter.emit(EVENTS.PARSE_MANIFEST_DATA);\n  Object.keys(manifestData).forEach(key => {\n    if (!manifestPropertyWhitelist.includes(key)) {\n      delete manifestData[key];\n    }\n  });\n  eventEmitter.emit(EVENTS.STORE_MANIFEST_DATA);\n  await set(MANIFEST_IDB_KEY, manifestData);\n  localStorage.setItem(MANIFEST_VERSION_KEY, version);\n  return manifestData;\n};\n\nexport type GetManifestResult =\n  | {\n      manifest: ManifestData;\n      error?: null;\n    }\n  | { manifest: null; error: Error };\n\nlet cachedManifestData: ManifestData | undefined;\nlet getManifestPromise: Promise<GetManifestResult> | undefined;\n\nexport const getManifest = async (): Promise<GetManifestResult> => {\n  if (!getManifestPromise) {\n    getManifestPromise = Promise.resolve()\n      .then(async () => {\n        // Start loading cached manifest data early\n        const pendingGetCachedManifestData = getCachedManifestData();\n\n        ga.event({\n          category: \"Data\",\n          action: \"Attempt load manifest\",\n          nonInteraction: true\n        });\n        eventEmitter.emit(EVENTS.GET_MANIFEST);\n        const manifest = await getDestinyManifest(bungieAuthedFetch);\n        const localStorageManifestVersion = localStorage.getItem(\n          MANIFEST_VERSION_KEY\n        );\n        if (\n          manifest &&\n          manifest.Response &&\n          manifest.Response.version === localStorageManifestVersion &&\n          !window.location.search.includes(\"updateManifest\")\n        ) {\n          if (!cachedManifestData) {\n            eventEmitter.emit(EVENTS.LOAD_MANIFEST_DATA);\n            cachedManifestData = await pendingGetCachedManifestData;\n          }\n          if (\n            cachedManifestData &&\n            manifestPropertyWhitelist.every(\n              key => cachedManifestData && !!cachedManifestData[key]\n            )\n          ) {\n            return { manifest: cachedManifestData };\n          }\n        }\n        if (\n          manifest &&\n          manifest.ErrorStatus &&\n          manifest.ErrorStatus !== \"Success\"\n        ) {\n          ga.event({\n            category: \"Errors\",\n            action: `Error status \"${manifest.ErrorStatus}\" returned from manifest request`,\n            nonInteraction: true\n          });\n          if (manifest.ErrorStatus === \"SystemDisabled\") {\n            return {\n              manifest: null,\n              error: new BungieSystemDisabledError()\n            };\n          }\n          return {\n            manifest: null,\n            error: Error(\n              `Error status \"${manifest.ErrorStatus}\" returned from manifest request`\n            )\n          };\n        }\n        if (!manifest || !manifest.Response) {\n          throw Error(\"No manifest received!\");\n        }\n        cachedManifestData = undefined;\n        ga.event({\n          category: \"Data\",\n          action: \"Fetch remote manifest\",\n          nonInteraction: true\n        });\n        const freshManifestData = await getRemoteManifestData(\n          manifest.Response\n        );\n        cachedManifestData = freshManifestData;\n        return { manifest: freshManifestData };\n      })\n      .then(result => {\n        if (result.manifest && !result.error) {\n          eventEmitter.emit(EVENTS.MANIFEST_DATA_READY);\n          return result;\n        } else {\n          throw result.error;\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        // Clear manifest promise so it can be re-fetched\n        eventEmitter.emit(EVENTS.MANIFEST_FETCH_ERROR);\n        getManifestPromise = undefined;\n        return { manifest: null, error: err };\n      });\n  }\n  return getManifestPromise;\n};\n\nexport const getBasicProfile = (\n  membershipType: number,\n  membershipId: string\n) => {\n  ga.event({\n    category: \"Character Data\",\n    action: \"Fetch minimal profile\",\n    nonInteraction: true\n  });\n  return getProfile(bungieAuthedFetch, {\n    components: [\n      200, // DestinyComponentType.Characters,\n      205 // DestinyComponentType.CharacterEquipment,\n    ],\n    destinyMembershipId: membershipId,\n    membershipType\n  });\n};\n\nexport const getFullProfile = (\n  membershipType: number,\n  membershipId: string\n) => {\n  ga.event({\n    category: \"Character Data\",\n    action: \"Fetch full profile\",\n    nonInteraction: true\n  });\n  return getProfile(bungieAuthedFetch, {\n    components: [\n      200, // DestinyComponentType.Characters,\n      201, // DestinyComponentType.CharacterInventories,\n      205, // DestinyComponentType.CharacterEquipment,\n      102, // DestinyComponentType.ProfileInventories,\n      300, // DestinyComponentType.ItemInstances,\n      104 // DestinyComponentType.ProfileProgression\n    ],\n    destinyMembershipId: membershipId,\n    membershipType\n  });\n};\n","import { getMembershipDataById, UserInfoCard } from \"bungie-api-ts/user\";\r\nimport { stringify } from \"simple-query-string\";\r\n\r\nimport { bungieAuthedFetch } from \"./bungie-api\";\r\nimport {\r\n  BUNGIE_OAUTH_AUTHORIZE_URL,\r\n  BUNGIE_OAUTH_CLIENT_ID,\r\n  BUNGIE_OAUTH_CLIENT_SECRET,\r\n  BUNGIE_OAUTH_TOKEN_URL\r\n} from \"./config\";\r\nimport eventEmitter, { EVENTS } from \"./events\";\r\nimport ga from \"./ga\";\r\n\r\nconst ACCESS_TOKEN_STORAGE_KEY = \"bungieAccessToken\";\r\nconst ACCESS_TOKEN_EXPIRY_STORAGE_KEY = \"bungieAccessTokenExpiryTime\";\r\nconst REFRESH_TOKEN_STORAGE_KEY = \"bungieRefreshToken\";\r\nconst REFRESH_TOKEN_EXPIRY_STORAGE_KEY = \"bungieRefreshTokenExpiryTime\";\r\nconst BUNGIE_MEMBERSHIP_ID_STORAGE_KEY = \"bungieMembershipId\";\r\nconst DESTINY_MEMBERSHIPS_STORAGE_KEY = \"destinyMemberships\";\r\nconst DESTINY_MEMBERSHIP_STORAGE_KEY = \"destinyMembership\";\r\nconst MANUAL_AUTHED_STORAGE_KEY = \"manualAuthed\";\r\n\r\neventEmitter.on(EVENTS.UNAUTHED_FETCH_ERROR, () => {\r\n  // If we get 401 from an \"authenticated\" request, assume the access token is invalid\r\n  console.log(\"Clearing invalid access token\");\r\n  localStorage.removeItem(ACCESS_TOKEN_STORAGE_KEY);\r\n});\r\n\r\nconst clearStorage = () => {\r\n  localStorage.removeItem(ACCESS_TOKEN_STORAGE_KEY);\r\n  localStorage.removeItem(ACCESS_TOKEN_EXPIRY_STORAGE_KEY);\r\n  localStorage.removeItem(REFRESH_TOKEN_STORAGE_KEY);\r\n  localStorage.removeItem(REFRESH_TOKEN_EXPIRY_STORAGE_KEY);\r\n  localStorage.removeItem(BUNGIE_MEMBERSHIP_ID_STORAGE_KEY);\r\n  localStorage.removeItem(DESTINY_MEMBERSHIPS_STORAGE_KEY);\r\n};\r\n\r\nconst clearSelectedMembership = () => {\r\n  localStorage.removeItem(DESTINY_MEMBERSHIP_STORAGE_KEY);\r\n};\r\n\r\nexport const hasManuallyAuthed = () => {\r\n  return !!localStorage.getItem(MANUAL_AUTHED_STORAGE_KEY);\r\n};\r\n\r\nexport const getAuthUrl = () =>\r\n  `${BUNGIE_OAUTH_AUTHORIZE_URL}?${stringify({\r\n    response_type: \"code\",\r\n    client_id: BUNGIE_OAUTH_CLIENT_ID,\r\n    client_secret: BUNGIE_OAUTH_CLIENT_SECRET\r\n  })}`;\r\n\r\n// Attempt to prevent infinite navigation events\r\nlet hasNavigated = false;\r\nconst redirectToAuth = () => {\r\n  clearStorage();\r\n  ga.event({\r\n    category: \"Auth\",\r\n    action: \"Redirect for Bungie authentication\",\r\n    nonInteraction: true\r\n  });\r\n  try {\r\n    if (!hasNavigated) {\r\n      window.location.assign(getAuthUrl());\r\n    } else {\r\n      console.log(\"Prevented re-navigation\");\r\n      throw Error(\"Re-navigation attempt\");\r\n    }\r\n    hasNavigated = true;\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const manualStartAuth = () => {\r\n  localStorage.setItem(MANUAL_AUTHED_STORAGE_KEY, \"TRUE\");\r\n  redirectToAuth();\r\n};\r\n\r\nconst autoSelectDestinyMembership = (destinyMemberships: UserInfoCard[]) => {\r\n  // If there is only one membership, select it automatically\r\n  if (destinyMemberships.length === 1) {\r\n    setSelectedDestinyMembership(destinyMemberships[0]);\r\n    return destinyMemberships[0];\r\n  }\r\n\r\n  const crossSavePrimaryMemberships = destinyMemberships.filter(\r\n    m => m.crossSaveOverride === m.membershipType\r\n  );\r\n  const nonCrossSaveMemberships = destinyMemberships.filter(\r\n    m => m.crossSaveOverride === 0\r\n  );\r\n  if (\r\n    crossSavePrimaryMemberships.length === 1 &&\r\n    nonCrossSaveMemberships.length === 0\r\n  ) {\r\n    setSelectedDestinyMembership(crossSavePrimaryMemberships[0]);\r\n    return crossSavePrimaryMemberships[0];\r\n  }\r\n};\r\n\r\nconst handleTokenResponse = async (tokenResponse: Response) => {\r\n  if (tokenResponse.status === 200) {\r\n    const data = await tokenResponse.json();\r\n\r\n    const accessToken = data.access_token as string;\r\n    const tokenDuration = data.expires_in as number;\r\n    const expiryTime = Date.now() + tokenDuration * 1000;\r\n\r\n    const refreshToken = data.refresh_token as string;\r\n    const refreshTokenDuration = data.refresh_expires_in as number;\r\n    const refreshExpiryTime = Date.now() + refreshTokenDuration * 1000;\r\n\r\n    const bungieMembershipId = data.membership_id as string;\r\n\r\n    localStorage.setItem(ACCESS_TOKEN_STORAGE_KEY, accessToken);\r\n    localStorage.setItem(\r\n      ACCESS_TOKEN_EXPIRY_STORAGE_KEY,\r\n      expiryTime.toString()\r\n    );\r\n    localStorage.setItem(REFRESH_TOKEN_STORAGE_KEY, refreshToken);\r\n    localStorage.setItem(\r\n      REFRESH_TOKEN_EXPIRY_STORAGE_KEY,\r\n      refreshExpiryTime.toString()\r\n    );\r\n\r\n    localStorage.setItem(BUNGIE_MEMBERSHIP_ID_STORAGE_KEY, bungieMembershipId);\r\n\r\n    // 254 = all memberships\r\n    const destinyMembershipsResponse = await getMembershipDataById(\r\n      bungieAuthedFetch,\r\n      { membershipId: bungieMembershipId, membershipType: 254 }\r\n    );\r\n\r\n    if (\r\n      !destinyMembershipsResponse ||\r\n      !destinyMembershipsResponse.Response ||\r\n      (destinyMembershipsResponse.ErrorStatus &&\r\n        destinyMembershipsResponse.ErrorStatus !== \"Success\")\r\n    ) {\r\n      ga.event({\r\n        category: \"Errors\",\r\n        action: `Destiny membership fetch error, status: ${destinyMembershipsResponse.ErrorStatus}`,\r\n        nonInteraction: true\r\n      });\r\n      return {\r\n        authSuccess: false,\r\n        error: `Status code ${destinyMembershipsResponse.ErrorStatus} from memberships endpoint`\r\n      };\r\n    }\r\n\r\n    const destinyMemberships =\r\n      destinyMembershipsResponse.Response.destinyMemberships;\r\n    localStorage.setItem(\r\n      DESTINY_MEMBERSHIPS_STORAGE_KEY,\r\n      JSON.stringify(destinyMemberships)\r\n    );\r\n\r\n    // If has stored membership and the membership ID is not in the new list\r\n    // of memberships then clear it\r\n    const selectedMembership = getSelectedDestinyMembership();\r\n    if (\r\n      selectedMembership &&\r\n      !destinyMemberships.some(\r\n        m => m.membershipId === selectedMembership.membershipId\r\n      )\r\n    ) {\r\n      clearSelectedMembership();\r\n    }\r\n\r\n    autoSelectDestinyMembership(destinyMemberships);\r\n\r\n    return { accessToken, authSuccess: true };\r\n  } else {\r\n    if (tokenResponse.status !== 200) {\r\n      ga.event({\r\n        category: \"Auth\",\r\n        action: `Status code ${tokenResponse.status} from authentication request`,\r\n        nonInteraction: true\r\n      });\r\n      return {\r\n        authSuccess: false,\r\n        error: `Status code ${tokenResponse.status} from authentication request`\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nconst fetchAccessToken = async (authCode: string) => {\r\n  console.log(\"Fetching Bungie API access token for authentication code\");\r\n  ga.event({\r\n    category: \"Auth\",\r\n    action: \"Oauth token request\",\r\n    nonInteraction: true\r\n  });\r\n  const tokenResponse = await fetch(BUNGIE_OAUTH_TOKEN_URL, {\r\n    body: stringify({\r\n      grant_type: \"authorization_code\",\r\n      code: authCode,\r\n      client_id: BUNGIE_OAUTH_CLIENT_ID,\r\n      client_secret: BUNGIE_OAUTH_CLIENT_SECRET\r\n    }),\r\n    cache: \"no-cache\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n    },\r\n    method: \"POST\",\r\n    redirect: \"follow\",\r\n    referrer: \"no-referrer\"\r\n  });\r\n  return await handleTokenResponse(tokenResponse);\r\n};\r\n\r\nconst refreshAccessToken = async () => {\r\n  console.log(\"Refreshing Bungie API access token\");\r\n  const refreshToken = localStorage.getItem(REFRESH_TOKEN_STORAGE_KEY);\r\n  ga.event({\r\n    category: \"Auth\",\r\n    action: \"Oauth token refresh\",\r\n    nonInteraction: true\r\n  });\r\n  const tokenResponse = await fetch(BUNGIE_OAUTH_TOKEN_URL, {\r\n    body: stringify({\r\n      grant_type: \"refresh_token\",\r\n      refresh_token: refreshToken,\r\n      client_id: BUNGIE_OAUTH_CLIENT_ID,\r\n      client_secret: BUNGIE_OAUTH_CLIENT_SECRET\r\n    }),\r\n    cache: \"no-cache\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n    },\r\n    method: \"POST\",\r\n    redirect: \"follow\",\r\n    referrer: \"no-referrer\"\r\n  });\r\n  const handleResult = await handleTokenResponse(tokenResponse);\r\n  if (!handleResult || !handleResult.authSuccess) {\r\n    // If refreshing failed, clear all auth details so we don't attempt repeated refreshes\r\n    clearStorage();\r\n  }\r\n  return handleResult;\r\n};\r\n\r\nexport const getAccessToken = () => {\r\n  return localStorage.getItem(ACCESS_TOKEN_STORAGE_KEY);\r\n};\r\n\r\nconst hasValidAccessToken = () => {\r\n  const accessToken = getAccessToken();\r\n  const accessTokenExpiryTime = parseInt(\r\n    localStorage.getItem(ACCESS_TOKEN_EXPIRY_STORAGE_KEY) || \"-1\",\r\n    10\r\n  );\r\n\r\n  return accessToken && accessTokenExpiryTime > Date.now();\r\n};\r\n\r\nconst hasValidRefreshToken = () => {\r\n  const refreshToken = localStorage.getItem(REFRESH_TOKEN_STORAGE_KEY);\r\n  const refreshTokenExpiryTime = parseInt(\r\n    localStorage.getItem(REFRESH_TOKEN_EXPIRY_STORAGE_KEY) || \"-1\",\r\n    10\r\n  );\r\n\r\n  return refreshToken && refreshTokenExpiryTime > Date.now();\r\n};\r\n\r\nexport const hasValidAuth = () => {\r\n  const accessTokenIsValid = hasValidAccessToken();\r\n\r\n  const bungieMembershipId = localStorage.getItem(\r\n    BUNGIE_MEMBERSHIP_ID_STORAGE_KEY\r\n  );\r\n  const destinyMemberships = getDestinyMemberships();\r\n  if (!accessTokenIsValid || !bungieMembershipId || !destinyMemberships) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const getDestinyMemberships = () => {\r\n  const destinyMembershipsString = localStorage.getItem(\r\n    DESTINY_MEMBERSHIPS_STORAGE_KEY\r\n  );\r\n  try {\r\n    if (destinyMembershipsString) {\r\n      return JSON.parse(destinyMembershipsString) as UserInfoCard[];\r\n    }\r\n  } catch (e) {\r\n    ga.event({\r\n      category: \"Data\",\r\n      action: \"Error loading destiny memberships from local storage\",\r\n      nonInteraction: true\r\n    });\r\n    console.error(`Error loading destiny memberships`, e.message);\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const hasDestinyMemberships = () => {\r\n  return !!getDestinyMemberships();\r\n};\r\n\r\nexport const getSelectedDestinyMembership = () => {\r\n  const destinyMembershipString = localStorage.getItem(\r\n    DESTINY_MEMBERSHIP_STORAGE_KEY\r\n  );\r\n  try {\r\n    if (destinyMembershipString) {\r\n      return JSON.parse(destinyMembershipString) as UserInfoCard;\r\n    }\r\n    const memberships = getDestinyMemberships();\r\n    if (memberships) {\r\n      const autoSelectedMembership = autoSelectDestinyMembership(memberships);\r\n      return autoSelectedMembership;\r\n    }\r\n  } catch (e) {\r\n    ga.event({\r\n      category: \"Data\",\r\n      action: \"Error loading destiny membership from local storage\",\r\n      nonInteraction: true\r\n    });\r\n    console.error(\"Error loading destiny membership\", e.message);\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const hasSelectedDestinyMembership = () => {\r\n  return !!getSelectedDestinyMembership();\r\n};\r\n\r\nexport const setSelectedDestinyMembership = (membership: UserInfoCard) => {\r\n  localStorage.setItem(\r\n    DESTINY_MEMBERSHIP_STORAGE_KEY,\r\n    JSON.stringify(membership)\r\n  );\r\n};\r\n\r\nexport const auth = async (): Promise<boolean> => {\r\n  const queryParams = new URLSearchParams(window.location.search);\r\n  const authCode = queryParams.get(\"code\");\r\n\r\n  if (authCode && !hasValidAuth()) {\r\n    console.log(\"Fetching access token with auth code\");\r\n    const authResponse = await fetchAccessToken(authCode);\r\n    if (authResponse && authResponse?.authSuccess === false) {\r\n      console.error(authResponse.error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  if (authCode) {\r\n    window.location.replace(\r\n      `${window.location.origin}${window.location.pathname}`\r\n    );\r\n  }\r\n\r\n  if (hasValidAuth() && hasDestinyMemberships()) {\r\n    return true;\r\n  }\r\n\r\n  const isAccessTokenValid = hasValidAccessToken();\r\n  const isRefreshTokenValid = hasValidRefreshToken();\r\n\r\n  if (!isAccessTokenValid && isRefreshTokenValid) {\r\n    await refreshAccessToken();\r\n    return auth();\r\n  }\r\n\r\n  if (hasManuallyAuthed()) {\r\n    console.log(\r\n      \"Redirecting to fresh authentication for missing or expired access token, or missing destiny memberships\"\r\n    );\r\n    redirectToAuth();\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport const logOut = async () => {\r\n  localStorage.removeItem(MANUAL_AUTHED_STORAGE_KEY);\r\n  clearStorage();\r\n  eventEmitter.emit(EVENTS.LOG_OUT);\r\n};\r\n","import classnames from \"classnames\";\nimport React, { useState } from \"react\";\n\nimport STYLES from \"./CharacterLinks.module.scss\";\n\ninterface CharacterLinksProps {\n  membershipType: number;\n  membershipId: string;\n  characterId: string;\n  onImageExportClick?: () => Promise<any>;\n}\n\ninterface LinkOptions {\n  text?: string;\n  tags?: string[];\n}\n\n/* eslint-disable react/jsx-no-target-blank */\nconst link = (url: string, { text, tags = [] }: LinkOptions = {}) => {\n  const linkText = text || new URL(url).hostname;\n  return (\n    <li>\n      <a\n        href={url}\n        target=\"_blank\"\n        rel=\"noopener\"\n        className={classnames(...tags.map(tag => STYLES[`link_tag_${tag}`]))}\n      >\n        <span className={STYLES.linkText}>{linkText}</span>\n      </a>\n    </li>\n  );\n};\n\nconst RAID_REPORT_PLATFORMS: { [key: number]: string } = {\n  1: \"xb\",\n  2: \"ps\",\n  3: \"pc\",\n  4: \"pc\",\n  5: \"stadia\"\n};\n\nexport const CharacterLinks = ({\n  membershipType,\n  membershipId,\n  characterId,\n  onImageExportClick\n}: CharacterLinksProps) => {\n  const [isHidden, setHidden] = useState(false);\n\n  return (\n    <div\n      className={classnames(STYLES.characterLinks, { [STYLES.hide]: isHidden })}\n    >\n      <div className={STYLES.content}>\n        <ul>\n          {link(\"https://www.destinyitemmanager.com\", {\n            text: \"Destiny Item Manager\",\n            tags: [\"dim\"]\n          })}\n          {link(\n            `https://braytech.org/${membershipType}/${membershipId}/${characterId}/now`,\n            { text: \"Braytech\", tags: [\"braytech\"] }\n          )}\n          {link(\"https://destinysets.com/\", {\n            text: \"Destiny Sets\",\n            tags: [\"destinysets\"]\n          })}\n          {link(\n            `https://www.d2checklist.com/${membershipType}/${membershipId}/milestones`,\n            { text: \"D2 Checklist\", tags: [\"d2checklist\"] }\n          )}\n          {link(\n            `https://guardianstats.com/inspect/${membershipType}/${membershipId}`,\n            { text: \"Guardianstats\", tags: [\"guardianstats\"] }\n          )}\n          {link(\n            `https://raid.report/${RAID_REPORT_PLATFORMS[membershipType]}/${membershipId}`,\n            { text: \"Raid Report\", tags: [\"raidreport\"] }\n          )}\n          {onImageExportClick && (\n            <li>\n              <span\n                className={STYLES.link}\n                onClick={async () => {\n                  setHidden(true);\n                  await onImageExportClick();\n                  setHidden(false);\n                }}\n              >\n                <span className={STYLES.linkText}>Export image</span>\n              </span>\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n};\n","export const ITEM_SLOT_KINETIC = \"kinetic\";\r\nexport const ITEM_SLOT_ENERGY = \"energy\";\r\nexport const ITEM_SLOT_POWER = \"power\";\r\nexport const ITEM_SLOT_HEAD = \"head\";\r\nexport const ITEM_SLOT_GLOVES = \"gloves\";\r\nexport const ITEM_SLOT_CHEST = \"chest\";\r\nexport const ITEM_SLOT_LEGS = \"legs\";\r\nexport const ITEM_SLOT_CLASS_ITEM = \"classItem\";\r\n\r\nexport const ITEM_SLOT_BUCKETS = {\r\n  [ITEM_SLOT_KINETIC]: 1498876634,\r\n  [ITEM_SLOT_ENERGY]: 2465295065,\r\n  [ITEM_SLOT_POWER]: 953998645,\r\n  [ITEM_SLOT_HEAD]: 3448274439,\r\n  [ITEM_SLOT_GLOVES]: 3551918588,\r\n  [ITEM_SLOT_CHEST]: 14239492,\r\n  [ITEM_SLOT_LEGS]: 20886954,\r\n  [ITEM_SLOT_CLASS_ITEM]: 1585787867\r\n};\r\n\r\nexport const ITEM_BUCKET_SLOTS = Object.entries(ITEM_SLOT_BUCKETS).reduce(\r\n  (buckets, [slot, bucket]) => ({ ...buckets, [bucket]: slot }),\r\n  {} as { [bucket: number]: string }\r\n);\r\n\r\nexport const ITEM_SLOT_GROUP_WEAPONS = [\r\n  ITEM_SLOT_KINETIC,\r\n  ITEM_SLOT_ENERGY,\r\n  ITEM_SLOT_POWER\r\n];\r\nexport const ITEM_SLOT_GROUP_ARMOR = [\r\n  ITEM_SLOT_HEAD,\r\n  ITEM_SLOT_GLOVES,\r\n  ITEM_SLOT_CHEST,\r\n  ITEM_SLOT_LEGS,\r\n  ITEM_SLOT_CLASS_ITEM\r\n];\r\n\r\nexport const ORDERED_ITEM_SLOTS = [\r\n  ...ITEM_SLOT_GROUP_WEAPONS,\r\n  ...ITEM_SLOT_GROUP_ARMOR\r\n];\r\n\r\nexport const ITEM_TIER_TYPE_EXOTIC = 6;\r\n\r\nexport const ITEM_TYPE_ARMOR = 2;\r\nexport const ITEM_TYPE_WEAPON = 3;\r\n\r\nexport const CLASS_TYPE_ALL = 3;\r\n\r\nexport const CLASS_TITAN = \"titan\";\r\nexport const CLASS_HUNTER = \"hunter\";\r\nexport const CLASS_WARLOCK = \"warlock\";\r\n\r\nexport const CLASS_NAMES = [CLASS_TITAN, CLASS_HUNTER, CLASS_WARLOCK];\r\n\r\nexport const ITEM_TYPE_ARTIFACT = 28;\r\nexport const ARTIFACT_INVENTORY_BUCKET_HASH = 1506418338;\r\n\r\nexport const POWER_SYMBOL = \"\";\r\nexport const BUNGIE_POWER_COLOR = \"#DDCB59\";\r\nexport const BUNGIE_COLOUR_SOLAR = \"ef621d\";\r\nexport const BUNGIE_COLOUR_ARC = \"7abce9\";\r\nexport const BUNGIE_COLOUR_VOID = \"b085df\";\r\n\r\n// Do not export, in an attempt to not need to hard-code a specific artifact.\r\n// export const UNDYING_ARTIFACT_ITEM_HASH = 1387688628;\r\n\r\nexport const ITEM_POWER_SOFT_CAP = 900;\r\nexport const ITEM_POWER_POWERFUL_CAP = 960;\r\nexport const ITEM_POWER_PINNACLE_CAP = 970;\r\n\r\n// How much above your current power do pinnacles drop when above the powerful cap\r\nexport const ITEM_POWER_PINNACLE_DROP_OFFSET = 2;\r\n","import { SelectedJoinedItemDefinition } from \"../types\";\n\n// From destiny-api-ts ItemState.Masterwork\nconst ITEM_STATE_MASTERWORK = 4;\n\nexport const isMasterwork = (item: SelectedJoinedItemDefinition) => {\n  // tslint:disable-next-line:no-bitwise\n  if (item.state && item.state & ITEM_STATE_MASTERWORK) {\n    return true;\n  }\n\n  return false;\n};\n","import classnames from \"classnames\";\nimport React from \"react\";\n\nimport STYLES from \"./PowerBar.module.scss\";\n\ninterface BarProps {\n  min: number;\n  max: number;\n  value: number;\n  avgValue: number;\n  label: string;\n  icon?: string;\n  isMasterworked?: boolean;\n}\n\nexport const PowerBar = ({\n  min,\n  max,\n  value,\n  avgValue,\n  label,\n  icon,\n  isMasterworked\n}: BarProps) => {\n  const range = max - min;\n  const perc = Math.floor(((value - min) / range) * 1000) / 10;\n  const avgPerc = Math.floor(((avgValue - min) / range) * 1000) / 10;\n  // const plusTwoPerc = Math.floor(((avgValue + 2 - min) / range) * 1000) / 10\n  // const plusFivePerc = Math.floor(((avgValue + 5 - min) / range) * 1000) / 10\n  const fullLabelText = `${value} ${label}`;\n  const fullLabel = (\n    <span className={STYLES.label}>\n      <span\n        className={classnames(STYLES.power, {\n          [STYLES.max]: value >= max,\n          [STYLES.belowAverage]: value < avgValue\n        })}\n      >\n        {value}\n      </span>\n      <span className={STYLES.slotName}>{label}</span>\n    </span>\n  );\n  return (\n    <div className={STYLES.barWrapper}>\n      <div className={STYLES.iconWrapper}>\n        {icon ? (\n          <img\n            className={STYLES.icon}\n            src={`https://www.bungie.net${icon}`}\n            alt={fullLabelText}\n          />\n        ) : null}\n        {icon && isMasterworked ? (\n          <div className={STYLES.masterworkOverlay} />\n        ) : null}\n      </div>\n      <div className={STYLES.barContainer}>\n        <div className={STYLES.filledBar} style={{ width: `${perc}%` }}>\n          {fullLabel}\n        </div>\n        <div className={STYLES.barLine} style={{ left: `${avgPerc}%` }} />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport { ITEM_POWER_POWERFUL_CAP, ORDERED_ITEM_SLOTS } from \"../../constants\";\nimport { isMasterwork } from \"../../services/masterwork\";\nimport { PowerBarsCharacterData, PowerBySlot } from \"../../types\";\nimport { PowerBar } from \"./PowerBar\";\nimport STYLES from \"./PowerBars.module.scss\";\n\nconst classItemNames: { [key: string]: string } = {\n  hunter: \"Hunter Cloak\",\n  titan: \"Titan Mark\",\n  warlock: \"Warlock Bond\"\n};\nconst slotFullNames = (className: string): { [key: string]: string } => ({\n  chest: \"Chest Armor\",\n  classItem: classItemNames[className],\n  energy: \"Energy Weapon\",\n  gloves: \"Gauntlets\",\n  head: \"Helmet\",\n  kinetic: \"Kinetic Weapon\",\n  legs: \"Leg Armor\",\n  power: \"Power Weapon\"\n});\n\ntype PowerBarsProps = PowerBarsCharacterData;\n\nexport const PowerBars = (data: PowerBarsProps) => {\n  // Get power by slot, using overall power if slot data does not exist\n  const powerBySlot = ORDERED_ITEM_SLOTS.reduce(\n    (slots, slotName) => ({\n      ...slots,\n      [slotName]:\n        data.topItemBySlot?.[slotName]?.instanceData?.primaryStat?.value ||\n        data.overallPower\n    }),\n    {} as PowerBySlot\n  );\n\n  const roundedPower = Math.floor(data.overallPower);\n  // Round to 50s\n  const minItemPower = Math.min(...Object.values(powerBySlot));\n  const minPowerToDisplay = Math.max(\n    Math.floor(minItemPower / 50) * 50 - 50,\n    0\n  );\n  const maxItemPower = Math.max(...Object.values(powerBySlot));\n  const maxItemPowerGrouping =\n    ITEM_POWER_POWERFUL_CAP - maxItemPower < 50 ? 10 : 50;\n  const maxPowerToDisplay =\n    Math.ceil(maxItemPower / maxItemPowerGrouping) * maxItemPowerGrouping;\n\n  const range = maxPowerToDisplay - minPowerToDisplay;\n  const perc =\n    Math.floor(((roundedPower - minPowerToDisplay) / range) * 1000) / 10;\n\n  return (\n    <div className={STYLES.powerBars}>\n      <div className={STYLES.powerRange}>\n        <div className={STYLES.minPower}>{minPowerToDisplay}</div>\n        <div className={STYLES.rangeLine} />\n        <div className={STYLES.maxPower}>{maxPowerToDisplay}</div>\n      </div>\n      <div className={STYLES.bars}>\n        {Object.entries(powerBySlot).map(([slotName, power]) => {\n          const bestItem = data.topItemBySlot?.[slotName];\n          return (\n            <PowerBar\n              key={`${data.character.characterId}_${slotName}`}\n              min={minPowerToDisplay}\n              max={maxPowerToDisplay}\n              value={power}\n              avgValue={roundedPower}\n              label={slotFullNames(data.className)[slotName] || slotName}\n              icon={bestItem?.itemDefinition?.displayProperties.icon}\n              isMasterworked={bestItem && isMasterwork(bestItem)}\n            />\n          );\n        })}\n      </div>\n      <div className={STYLES.powerLabel}>\n        <div className={STYLES.indicator} style={{ left: `${perc}%` }}>\n          {roundedPower}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\r\n\r\nimport { ITEM_POWER_PINNACLE_CAP } from \"../../constants\";\r\nimport STYLES from \"./InterPowerBar.module.scss\";\r\n\r\ninterface InterPowerBarProps {\r\n  value: number;\r\n}\r\n\r\nexport const InterPowerBar = ({ value }: InterPowerBarProps) => {\r\n  let min = Math.floor(value);\r\n  let max = value === min ? value + 1 : Math.ceil(value);\r\n\r\n  if (min === ITEM_POWER_PINNACLE_CAP && value === min) {\r\n    max = min;\r\n    min = min - 1;\r\n  }\r\n\r\n  const fillPerc = Math.floor(value * 100 - min * 100);\r\n\r\n  return (\r\n    <div className={STYLES.interPowerBar}>\r\n      <div className={STYLES.min}>{min}</div>\r\n      <div className={STYLES.bar}>\r\n        <div className={STYLES.fillBar} style={{ width: `${fillPerc}%` }} />\r\n        <div className={STYLES.barOverlay} />\r\n      </div>\r\n      <div className={STYLES.max}>{max}</div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\n\nimport STYLES from \"./Power.module.scss\";\n\nconst numberWithSign = (value: number) => {\n  if (value >= 0) {\n    return `+${value}`;\n  }\n  return `${value}`;\n};\n\ninterface PowerProps {\n  children: number;\n  withSign?: boolean;\n}\nexport const Power = ({ children: value, withSign = false }: PowerProps) => (\n  <span className={STYLES.inlinePowerNumber}>\n    {withSign ? numberWithSign(value) : value}\n  </span>\n);\n","import React from \"react\";\n\nimport STYLES from \"./PowerDetails.module.scss\";\n\nimport { InterPowerBar } from \"./InterPowerBar\";\nimport { Power } from \"./Power\";\n\nconst ProgressBar = ({ value, max }: { value: number; max: number }) => {\n  if (value === undefined || max === undefined) {\n    return null;\n  }\n  const perc = Math.floor((value / max) * 1000) / 10;\n  const withThousands = (n: number) =>\n    n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return (\n    <div\n      className={STYLES.progressBar}\n      title={`${withThousands(value)} / ${withThousands(max)}`}\n    >\n      <div className={STYLES.progressBarFill} style={{ width: `${perc}%` }} />\n      <div className={STYLES.progressBarOverlay} />\n    </div>\n  );\n};\n\ninterface PowerDetailsProps {\n  overallPowerExact: number;\n  overallPower: number;\n  artifactData?: {\n    name: string;\n    iconPath: string;\n    bonusPower: number;\n    progressToNextLevel: number;\n    nextLevelAt: number;\n  };\n}\n\nexport const PowerDetails = ({\n  overallPowerExact,\n  overallPower,\n  artifactData\n}: PowerDetailsProps) => {\n  const roundedPower = Math.floor(overallPower);\n\n  if (!artifactData || artifactData.bonusPower === 0) {\n    return (\n      <div className={STYLES.details}>\n        <div className={STYLES.detailsRow}>\n          <InterPowerBar value={overallPowerExact} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={STYLES.details}>\n      <div className={STYLES.detailsRow}>\n        <div className={STYLES.detailsLabel}>\n          Maximum equippable gear power:\n        </div>\n        <div className={STYLES.defailsValue}>\n          <Power>{roundedPower}</Power>\n        </div>\n      </div>\n      <div className={STYLES.detailsRow}>\n        <InterPowerBar value={overallPowerExact} />\n      </div>\n      {artifactData ? (\n        <>\n          <div className={STYLES.detailsRow}>\n            <div className={STYLES.detailsLabel}>\n              <img\n                className={STYLES.detailsInlineIcon}\n                src={`https://www.bungie.net${artifactData.iconPath}`}\n                alt=\"\"\n              />\n              {artifactData.name} bonus power:\n            </div>\n            <div className={STYLES.detailsValue}>\n              <Power withSign>{artifactData.bonusPower}</Power>\n            </div>\n          </div>\n          <div className={STYLES.detailsRow}>\n            <ProgressBar\n              value={artifactData.progressToNextLevel}\n              max={artifactData.nextLevelAt}\n            />\n          </div>\n        </>\n      ) : null}\n    </div>\n  );\n};\n","import classnames from \"classnames\";\nimport React from \"react\";\n\nimport {\n  ITEM_POWER_PINNACLE_CAP,\n  ITEM_POWER_PINNACLE_DROP_OFFSET,\n  ITEM_POWER_POWERFUL_CAP,\n  ITEM_POWER_SOFT_CAP\n} from \"../../constants\";\nimport { Power } from \"./Power\";\n\nimport STYLES from \"./PowerHints.module.scss\";\n\ninterface PowerHintsProps {\n  overallPowerExact: number;\n  overallPower: number;\n  potentialOverallPower?: number;\n}\n\nexport const PowerHints = ({\n  overallPowerExact,\n  overallPower,\n  potentialOverallPower\n}: PowerHintsProps) => {\n  potentialOverallPower =\n    potentialOverallPower || Math.min(ITEM_POWER_SOFT_CAP, overallPower);\n\n  const nextPower =\n    overallPowerExact === overallPower\n      ? overallPower + 1\n      : Math.ceil(overallPowerExact);\n\n  const powerRequiredToReachNext = (nextPower - overallPowerExact) * 8;\n  const powerRequiredToReachPotential =\n    (potentialOverallPower - overallPowerExact) * 8;\n\n  return (\n    <div className={STYLES.hints}>\n      {potentialOverallPower &&\n        potentialOverallPower > overallPower &&\n        overallPower > ITEM_POWER_POWERFUL_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.legendaryWorldDropHint\n            )}\n          >\n            <span>\n              Powerful rewards can increase your overall gear power to{\" \"}\n              <Power>{potentialOverallPower}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  Powerful rewards from milestones or prime engrams can drop\n                  with a power level up to <Power>{overallPower}</Power> for\n                  this character.\n                </div>\n                <div>\n                  Replacing items which are below your current overall power can\n                  increase your power to a higher average.\n                </div>\n                {overallPower < ITEM_POWER_PINNACLE_CAP && (\n                  <div>\n                    Raising your overall power before collecting your next\n                    pinnacle reward will give you the most efficient progress.\n                  </div>\n                )}\n                {powerRequiredToReachNext &&\n                  powerRequiredToReachNext !==\n                    powerRequiredToReachPotential && (\n                    <div>\n                      You need an extra{\" \"}\n                      <Power>{powerRequiredToReachNext}</Power> total power on\n                      your items to reach an overall power of{\" \"}\n                      <Power>{Math.floor(overallPower + 1)}</Power>.\n                    </div>\n                  )}\n                {powerRequiredToReachPotential && (\n                  <div>\n                    You need an extra{\" \"}\n                    <Power>{powerRequiredToReachPotential}</Power> total power\n                    on your items to reach an overall power of{\" \"}\n                    <Power>{potentialOverallPower}</Power>.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n      {potentialOverallPower > overallPower &&\n        overallPower <= ITEM_POWER_POWERFUL_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.worldDropHint\n            )}\n          >\n            <span>\n              World drops can increase your overall gear power to{\" \"}\n              <Power>{potentialOverallPower}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  World drops (from strikes, public events,{\" \"}\n                  {overallPower <= ITEM_POWER_POWERFUL_CAP && \"vendors, \"}\n                  non-powerful rewards) can drop with a power level{\" \"}\n                  {overallPower >= ITEM_POWER_SOFT_CAP ? (\n                    <>\n                      from <Power>{overallPower - 3}</Power> to{\" \"}\n                      <Power>{overallPower}</Power>\n                    </>\n                  ) : (\n                    <>\n                      above your current power, increasing your power\n                      incrementally up to <Power>{potentialOverallPower}</Power>\n                    </>\n                  )}{\" \"}\n                  for this character.\n                </div>\n                <div>\n                  Replacing items which are below your current overall power can\n                  increase your power to a higher average.\n                </div>\n                {powerRequiredToReachNext &&\n                  powerRequiredToReachNext !==\n                    powerRequiredToReachPotential && (\n                    <div>\n                      You need an extra{\" \"}\n                      <Power>{powerRequiredToReachNext}</Power> total power on\n                      your items to reach an overall power of{\" \"}\n                      <Power>{Math.floor(overallPower + 1)}</Power>.\n                    </div>\n                  )}\n                {powerRequiredToReachPotential && (\n                  <div>\n                    You need an extra{\" \"}\n                    <Power>{powerRequiredToReachPotential}</Power> total power\n                    on your items to reach an overall power of{\" \"}\n                    <Power>{potentialOverallPower}</Power>.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n      {potentialOverallPower === overallPower &&\n        overallPower >= ITEM_POWER_SOFT_CAP &&\n        overallPower < ITEM_POWER_POWERFUL_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.powerfulHint\n            )}\n          >\n            <span>\n              Powerful rewards can increase your overall gear power up to the\n              powerful cap of <Power>{ITEM_POWER_POWERFUL_CAP}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  Powerful and pinnacle reward sources (Weekly challenges, Year\n                  3 raids) will give you items above your overall gear power,\n                  with powerful rewards capped at{\" \"}\n                  <Power>{ITEM_POWER_POWERFUL_CAP}</Power>.\n                </div>\n                {powerRequiredToReachNext && (\n                  <div>\n                    You need an extra <Power>{powerRequiredToReachNext}</Power>{\" \"}\n                    total power on your items to reach an overall power of{\" \"}\n                    <Power>{Math.floor(overallPower + 1)}</Power>.\n                  </div>\n                )}\n                <div>\n                  After getting a powerful reward, check back here to see if\n                  it's beneficial to catch up the rest of your slots with world\n                  drops before getting another!\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n      {potentialOverallPower === overallPower &&\n        overallPower >= ITEM_POWER_POWERFUL_CAP &&\n        overallPower < ITEM_POWER_PINNACLE_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.pinnacleHint\n            )}\n          >\n            <span>\n              Pinnacle rewards can increase your overall gear power up to the\n              pinnacle cap of <Power>{ITEM_POWER_PINNACLE_CAP}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  Pinnacle reward sources (Some weekly challenges, Year 3 raids)\n                  will give you items at{\" \"}\n                  <Power>\n                    {Math.min(\n                      overallPower + ITEM_POWER_PINNACLE_DROP_OFFSET,\n                      ITEM_POWER_PINNACLE_CAP\n                    )}\n                  </Power>{\" \"}\n                  power.\n                </div>\n                {powerRequiredToReachNext && (\n                  <div>\n                    You need an extra <Power>{powerRequiredToReachNext}</Power>{\" \"}\n                    total power on your items to reach an overall power of{\" \"}\n                    <Power>{Math.floor(overallPower + 1)}</Power>.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n    </div>\n  );\n};\n","import classnames from \"classnames\";\r\nimport React, { useRef, useState } from \"react\";\r\n\r\nimport { PowerBarsCharacterData } from \"../types\";\r\nimport STYLES from \"./CharacterDisplay.module.scss\";\r\nimport { CharacterLinks } from \"./characterDisplay/CharacterLinks\";\r\nimport { PowerBars } from \"./characterDisplay/PowerBars\";\r\nimport { PowerDetails } from \"./characterDisplay/PowerDetails\";\r\nimport { PowerHints } from \"./characterDisplay/PowerHints\";\r\n\r\nconst titleCase = (text: string) =>\r\n  text.substr(0, 1).toUpperCase() + text.substr(1);\r\n\r\nconst rgbString = ({\r\n  red,\r\n  green,\r\n  blue\r\n}: {\r\n  red: number;\r\n  green: number;\r\n  blue: number;\r\n}) => `rgb(${red},${green},${blue})`;\r\n\r\nconst useRenderElementImage = (className: string) => {\r\n  const elementRef = useRef(null);\r\n  const renderElementImage = async () => {\r\n    if (elementRef.current) {\r\n      try {\r\n        const domToImage = (await import(\r\n          /* webpackChunkName: \"dom-to-image\" */ \"dom-to-image\"\r\n        )) as any;\r\n        const { saveAs } = await import(\r\n          /* webpackChunkName: \"file-saver\" */ \"file-saver\"\r\n        );\r\n        const blob = await domToImage.toBlob(elementRef.current);\r\n        saveAs(blob, `destiny-power-bars-${className}.png`);\r\n      } catch (e) {\r\n        console.error(\"Error capturing image of character display\", e);\r\n      }\r\n    }\r\n  };\r\n  return [elementRef, renderElementImage] as const;\r\n};\r\n\r\nexport const CharacterDisplayBodyWrapper = (\r\n  backgroundColor: string,\r\n  children: JSX.Element,\r\n  ref?: React.MutableRefObject<null>,\r\n  onDragStart?: () => void,\r\n  onDragEnd?: () => void,\r\n  onDragDrop?: () => void\r\n) => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isDraggingOver, setIsDraggingOver] = useState(0);\r\n\r\n  return (\r\n    <div\r\n      className={classnames(STYLES.characterDisplayWrapper, {\r\n        [STYLES.dragging]: isDragging,\r\n        [STYLES.dragOver]: isDraggingOver > 0\r\n      })}\r\n      style={{ backgroundColor }}\r\n      onDragStart={() => {\r\n        setIsDragging(true);\r\n        onDragStart?.();\r\n      }}\r\n      onDragEnd={() => {\r\n        setIsDragging(false);\r\n        onDragEnd?.();\r\n      }}\r\n      onDragEnter={() => setIsDraggingOver(isDraggingOver + 1)}\r\n      onDragOver={e => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }}\r\n      onDragLeave={() => setIsDraggingOver(Math.max(isDraggingOver - 1, 0))}\r\n      onDrop={() => {\r\n        setIsDraggingOver(0);\r\n        onDragDrop?.();\r\n      }}\r\n      draggable={true}\r\n      ref={ref}\r\n    >\r\n      {children}\r\n      <div className={STYLES.dragOverlay}>\r\n        <span>Drag to reorder</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface CharacterDisplayProps {\r\n  data: PowerBarsCharacterData;\r\n  onDragStart?: () => void;\r\n  onDragEnd?: () => void;\r\n  onDragDrop?: () => void;\r\n}\r\n\r\nconst CharacterDisplay = ({\r\n  data,\r\n  onDragStart,\r\n  onDragEnd,\r\n  onDragDrop\r\n}: CharacterDisplayProps) => {\r\n  const roundedPower = Math.floor(data.overallPower);\r\n\r\n  const summableArtifactBonusPower = data.artifactData\r\n    ? data.artifactData.bonusPower\r\n    : 0;\r\n\r\n  const [elementRef, renderImage] = useRenderElementImage(data.className);\r\n\r\n  return CharacterDisplayBodyWrapper(\r\n    rgbString(data.character.emblemColor),\r\n    <div className={STYLES.characterDisplay}>\r\n      <div className={STYLES.header}>\r\n        <img\r\n          className={STYLES.emblemBackground}\r\n          src={`https://www.bungie.net${data.character.emblemBackgroundPath}`}\r\n          alt=\"\"\r\n        />\r\n        <div\r\n          className={classnames(STYLES.name, {\r\n            [STYLES.withTitle]: !!data.title\r\n          })}\r\n        >\r\n          {titleCase(data.className)}\r\n        </div>\r\n        {data.title && <div className={STYLES.title}>{data.title}</div>}\r\n        <div className={STYLES.power}>\r\n          {roundedPower + summableArtifactBonusPower}\r\n        </div>\r\n        <div className={STYLES.headerOverlayBar} />\r\n      </div>\r\n\r\n      <div className={STYLES.content}>\r\n        <PowerDetails {...data} />\r\n        <PowerBars {...data} />\r\n        <PowerHints {...data} />\r\n      </div>\r\n\r\n      <CharacterLinks\r\n        membershipType={data.character.membershipType}\r\n        membershipId={data.character.membershipId}\r\n        characterId={data.character.characterId}\r\n        onImageExportClick={renderImage}\r\n      />\r\n    </div>,\r\n    elementRef,\r\n    onDragStart,\r\n    onDragEnd,\r\n    onDragDrop\r\n  );\r\n};\r\n\r\nexport default CharacterDisplay;\r\n","import React from \"react\";\n\nimport STYLES from \"./FetchSpinner.module.scss\";\n\nconst FetchSpinner = () => (\n  <div className={STYLES.fetchSpinnerContainer}>\n    <div className={STYLES.anchor}>\n      <div className={STYLES.spinner} />\n      <div className={STYLES.spinnerSmall} />\n    </div>\n  </div>\n);\n\nexport default FetchSpinner;\n","import preval from \"preval.macro\";\nimport React from \"react\";\n\nimport STYLES from \"./BuildStamp.module.scss\";\n\nconst gitHead = (process.env.REACT_APP_NPM_PACKAGE_GITHEAD || \"\").substr(0, 6);\n\nconst buildTimestamp = preval`module.exports = new Date().toISOString();`;\n\nexport const BuildStamp = () => (\n  <div className={STYLES.buildStamp}>\n    {gitHead} {buildTimestamp}\n  </div>\n);\n","import React from \"react\";\n\nimport kofiIcon from \"../images/icons/Ko-fi_Icon_RGBforDarkBg_sm.png\";\n\nimport STYLES from \"./KoFi.module.scss\";\n\nexport const Kofi = () => {\n  return (\n    <div className={STYLES.kofiContainer}>\n      <a\n        className={STYLES.link}\n        href=\"https://ko-fi.com/tomcorke\"\n        /* eslint-disable-next-line react/jsx-no-target-blank */\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        <img\n          height=\"36\"\n          style={{ border: \"0px\", height: \"36px\" }}\n          src={kofiIcon}\n          alt=\"Buy Me a Coffee at ko-fi.com\"\n        />\n        <span>Buy me a coffee</span>\n      </a>\n    </div>\n  );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"GitHub icon\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"\n});\n\nvar SvgGithub = function SvgGithub(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    role: \"img\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGithub, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/github.617870e4.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"Twitter icon\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z\"\n});\n\nvar SvgTwitter = function SvgTwitter(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    role: \"img\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTwitter, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/twitter.be066898.svg\";\nexport { ForwardRef as ReactComponent };","const VENDOR_ENGRAMS_API_ENDPOINT =\n  \"https://api.vendorengrams.xyz/getVendorDrops?source=destiny-power-bars\";\n\nexport interface VendorEngramsVendorData {\n  vendorID: string;\n  display: string;\n  drop: string;\n  shorthand: string;\n  interval: string;\n  nextRefresh: string;\n}\n\nexport interface VendorEngramsData {\n  data: VendorEngramsVendorData[];\n  updateTimestamp: number;\n}\n\nexport const VENDOR_ENGRAMS_DROP_NO_DATA = \"0\";\nexport const VENDOR_ENGRAMS_DROP_LOW = \"1\";\nexport const VENDOR_ENGRAMS_DROP_HIGH = \"2\";\n\nconst VENDOR_DISPLAY_NAMES: { [shorthand: string]: string } = {\n  devrim: \"Devrim Kay (EDZ)\",\n  sloane: \"Sloane (Titan)\",\n  failsafe: \"Failsafe (Nessus)\",\n  asher: \"Asher Mir (Io)\",\n  zavala: \"Zavala (Vanguard, Tower)\",\n  shaxx: \"Shaxx (Crucible, Tower)\",\n  banshee: \"Banshee-44 (Gunsmith, Tower)\",\n  // benedict: \"Benedict\",\n  // saladin: \"Lord Saladin (Iron Banner, Tower)\",\n  fanboy: \"Brother Vance (Mercury)\",\n  bray: \"Ana Bray (Mars)\",\n  werner: \"Werner 99-40 (Tower, Nessus Barge)\"\n};\nexport const getVendorDisplayName = (shorthand: string) => {\n  return VENDOR_DISPLAY_NAMES[shorthand] || shorthand;\n};\n\nlet vendorEngramsData: VendorEngramsData | undefined;\nlet vendorEngramsRefreshTimer: number | NodeJS.Timeout | undefined;\nlet vendorEngramsRefreshPromise: Promise<VendorEngramsData> | undefined;\n\nconst VENDOR_ENGRAMS_REFRESH_DELAY = 5 * 60 * 1000;\n\nconst refreshVendorEngramsData = async () => {\n  const response = await fetch(VENDOR_ENGRAMS_API_ENDPOINT);\n  const jsonData = (await response.json()) as VendorEngramsVendorData[];\n  const updateTimestamp = Date.now();\n  const data = { data: jsonData, updateTimestamp };\n  vendorEngramsData = data;\n  return data;\n};\n\nexport const getVendorEngramsData = async () => {\n  if (vendorEngramsData) {\n    return vendorEngramsData;\n  }\n  if (!vendorEngramsRefreshPromise) {\n    vendorEngramsRefreshPromise = refreshVendorEngramsData();\n  }\n  if (!vendorEngramsRefreshTimer) {\n    vendorEngramsRefreshTimer = setInterval(() => {\n      refreshVendorEngramsData().catch(e =>\n        console.warn(\"Error refreshing vendorengrams.xyz data\", e)\n      );\n    }, VENDOR_ENGRAMS_REFRESH_DELAY);\n  }\n  return vendorEngramsRefreshPromise;\n};\n","import React from \"react\";\n\nimport { Kofi } from \"./KoFi\";\n\nimport { ReactComponent as GitHubLogo } from \"../images/icons/github.svg\";\nimport { ReactComponent as TwitterLogo } from \"../images/icons/twitter.svg\";\n\nimport STYLES from \"./SocialLinks.module.scss\";\n\nexport const SocialLinks = () => (\n  <div className={STYLES.socialLinks}>\n    <div className={STYLES.link}>\n      <Kofi />\n    </div>\n    <a\n      className={STYLES.link}\n      href=\"https://www.twitter.com/corke_tom\"\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n    >\n      <TwitterLogo\n        width={20}\n        height={20}\n        style={{ fill: \"rgba(255,255,255,0.8)\" }}\n      />\n    </a>\n    <a\n      className={STYLES.link}\n      href=\"https://github.com/tomcorke/destiny-power-bars\"\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n    >\n      <GitHubLogo\n        width={20}\n        height={20}\n        style={{ fill: \"rgba(255,255,255,0.8)\" }}\n      />\n    </a>\n  </div>\n);\n","import React from \"react\";\n\nimport { BuildStamp } from \"./BuildStamp\";\nimport { SocialLinks } from \"./SocialLinks\";\n\nimport STYLES from \"./Footer.module.scss\";\n\nexport const Footer = () => {\n  return (\n    <div className={STYLES.footer}>\n      <SocialLinks />\n      <BuildStamp />\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport STYLES from \"./Header.module.scss\";\n\nexport const Header = () => (\n  <div className={STYLES.headerContainer}>\n    <div className={STYLES.header}>Destiny Power Bars</div>\n    <div className={STYLES.subHeader}>\n      by{\" \"}\n      <a\n        className={STYLES.author}\n        href=\"https://twitter.com/corke_tom\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n      >\n        Tom Corke\n      </a>\n    </div>\n  </div>\n);\n","import React from \"react\";\n\nimport STYLES from \"./LoadingSpinner.module.scss\";\n\ninterface LoadingSpinnerProps {\n  children: string | JSX.Element;\n}\n\nconst LoadingSpinner = ({ children }: LoadingSpinnerProps) => {\n  return (\n    <div className={STYLES.loading}>\n      <div className={STYLES.anchor}>\n        <div className={STYLES.spinnerLarge} />\n        <div className={STYLES.spinnerLargeDouble} />\n        <div className={STYLES.spinnerSmall} />\n        <div className={STYLES.spinnerSmallDouble} />\n      </div>\n      <div className={STYLES.status}>{children}</div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import classnames from \"classnames\";\r\nimport React, { useCallback, useState } from \"react\";\r\n\r\nimport STYLES from \"./LazyImage.module.scss\";\r\n\r\ninterface LazyImageProps {\r\n  lowResImage: string;\r\n  highResImage: string;\r\n  delay?: number;\r\n  alt?: string;\r\n}\r\n\r\nexport const LazyImage = ({\r\n  lowResImage,\r\n  highResImage,\r\n  alt = \"\"\r\n}: LazyImageProps) => {\r\n  const [highResImageLoaded, setHighResImageLoaded] = useState(false);\r\n\r\n  const onHighResImageLoad = useCallback(() => {\r\n    setHighResImageLoaded(true);\r\n  }, [setHighResImageLoaded]);\r\n\r\n  const result = (\r\n    <div className={STYLES.lazyImage}>\r\n      <img\r\n        src={highResImage}\r\n        alt={alt}\r\n        className={classnames({\r\n          [STYLES.hidden]: !highResImageLoaded,\r\n          [STYLES.overlay]: !highResImageLoaded\r\n        })}\r\n        onLoad={onHighResImageLoad}\r\n      />\r\n      <img\r\n        src={lowResImage}\r\n        alt={alt}\r\n        className={classnames({\r\n          [STYLES.hidden]: highResImageLoaded,\r\n          [STYLES.overlay]: highResImageLoaded\r\n        })}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return result;\r\n};\r\n","import React from \"react\";\n\nimport { manualStartAuth } from \"../services/bungie-auth\";\nimport { LazyImage } from \"./LazyImage\";\n\nimport ExampleTitanCharacterDisplayImageLowRes from \"../images/screenshots/example-titan-character-display-with-info-blur.jpg\";\nimport ExampleTitanCharacterDisplayImage from \"../images/screenshots/example-titan-character-display-with-info.png\";\nimport STYLES from \"./LoginPrompt.module.scss\";\n\ninterface LoginPromptProps {\n  onLoginClick?: () => void;\n}\n\nconst DEFAULT_ON_LOGIN_CLICK = () => manualStartAuth();\n\nexport const LoginPrompt = ({\n  onLoginClick = DEFAULT_ON_LOGIN_CLICK\n}: LoginPromptProps) => {\n  return (\n    <div className={STYLES.loginContainer}>\n      <div className={STYLES.exampleImage}>\n        <LazyImage\n          lowResImage={ExampleTitanCharacterDisplayImageLowRes}\n          highResImage={ExampleTitanCharacterDisplayImage}\n          alt=\"Example Destiny Power Bars\"\n        />\n      </div>\n      <div className={STYLES.login}>\n        <div>\n          Destiny Power Bars requires access to your inventory and vault to\n          determine your maximum power per slot and character. Please log in to\n          Bungie.net to authorize this application.\n        </div>\n        <button className={STYLES.loginButton} onClick={onLoginClick}>\n          Log in with Bungie.net\n        </button>\n        {/* <a className={STYLES.loginButton} href={getAuthUrl()}>\n          Log in with Bungie.net\n        </a> */}\n      </div>\n    </div>\n  );\n};\n","import { UserInfoCard } from \"bungie-api-ts/user\";\nimport classnames from \"classnames\";\nimport React from \"react\";\n\nimport { PartialApi } from \"../services/api\";\nimport { logOut } from \"../services/bungie-auth\";\nimport STYLES from \"./MembershipSelect.module.scss\";\n\nexport interface RequiredApi extends PartialApi {\n  bungieAuth: {\n    getDestinyMemberships: () => UserInfoCard[] | undefined;\n  };\n}\n\nconst defaultOnLogout = () => logOut();\n\nconst PLATFORMS: { [key: number]: string } = {\n  1: \"xbox\",\n  2: \"psn\",\n  3: \"steam\",\n  4: \"blizzard\",\n  5: \"stadia\"\n};\n\nconst isCrossSavePrimary = (membership: UserInfoCard) => {\n  return (\n    membership.crossSaveOverride &&\n    membership.crossSaveOverride === membership.membershipType\n  );\n};\n\nconst isCrossSaveSecondary = (membership: UserInfoCard) => {\n  return (\n    membership.crossSaveOverride &&\n    membership.crossSaveOverride !== membership.membershipType\n  );\n};\n\nconst titleCase = (s: string = \"\") => {\n  return s.substr(0, 1).toUpperCase() + s.substr(1);\n};\n\ninterface CrossSaveDisplayProps {\n  membership: UserInfoCard;\n}\n\nconst CrossSaveDisplay = ({ membership }: CrossSaveDisplayProps) => {\n  if (membership.applicableMembershipTypes.length === 0) {\n    return null;\n  }\n  return (\n    <div className={STYLES.crossSaveDisplayWrapper}>\n      <div\n        className={STYLES.crossSaveDisplay}\n        title={`Cross-save enabled for: ${membership.applicableMembershipTypes\n          .map(t => titleCase(PLATFORMS[t]))\n          .join(\", \")}`}\n      >\n        <div className={STYLES.crossSaveIcon} />\n        {membership.applicableMembershipTypes.map(m => {\n          return (\n            <div\n              key={m}\n              className={classnames(\n                STYLES.crossSaveMembershipIcon,\n                STYLES[`crossSaveMembershipType_${PLATFORMS[m]}`]\n              )}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\ninterface MembershipSelectProps {\n  onMembershipSelect: (membership: UserInfoCard) => any;\n  api: RequiredApi;\n  onLogout?: () => void;\n}\n\nconst MembershipSelect = ({\n  onMembershipSelect,\n  api,\n  onLogout = defaultOnLogout\n}: MembershipSelectProps) => {\n  const destinyMemberships = api.bungieAuth.getDestinyMemberships();\n\n  if (!destinyMemberships) {\n    return null;\n  }\n\n  if (destinyMemberships.length === 0) {\n    return <div>No destiny memberships!</div>;\n  }\n\n  return (\n    <div className={STYLES.membershipSelect}>\n      {destinyMemberships\n        .filter(m => !isCrossSaveSecondary(m))\n        .filter(m => m.membershipType !== 4)\n        .map(m => {\n          return (\n            <div\n              key={m.membershipId}\n              className={classnames(\n                STYLES.membership,\n                STYLES[`platform_${PLATFORMS[m.membershipType]}`],\n                {\n                  [STYLES.crossSaveActive]: isCrossSavePrimary(m),\n                  [STYLES.crossSaveDisabled]: isCrossSaveSecondary(m)\n                }\n              )}\n              onClick={() => onMembershipSelect(m)}\n            >\n              <span className={STYLES.membershipDisplayName}>\n                {m.displayName}\n              </span>\n              {isCrossSavePrimary(m) ? (\n                <CrossSaveDisplay membership={m} />\n              ) : null}\n            </div>\n          );\n        })}\n      <button\n        className={STYLES.logOut}\n        onClick={() => onLogout()}\n        title=\"Log out\"\n      >\n        <div className={STYLES.logOutIcon} />\n        <div className={STYLES.logOutText}>Log out</div>\n      </button>\n    </div>\n  );\n};\n\nexport default MembershipSelect;\n","import useInterval from \"@use-it/interval\";\nimport classnames from \"classnames\";\nimport HumanizeDuration from \"humanize-duration\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { ITEM_POWER_POWERFUL_CAP } from \"../constants\";\nimport { ManifestData } from \"../services/bungie-api\";\nimport {\n  getVendorDisplayName,\n  getVendorEngramsData,\n  VENDOR_ENGRAMS_DROP_HIGH,\n  VENDOR_ENGRAMS_DROP_LOW,\n  VENDOR_ENGRAMS_DROP_NO_DATA,\n  VendorEngramsData,\n  VendorEngramsVendorData\n} from \"../services/vendor-engrams\";\nimport { Power } from \"./characterDisplay/Power\";\n\nimport STYLES from \"./VendorDisplay.module.scss\";\n\nconst VENDOR_DATA_REFRESH_ATTEMPT_DELAY = 10 * 1000;\n\ninterface VendorProps {\n  vendor: VendorEngramsVendorData;\n  manifestData: ManifestData;\n}\nexport const Vendor = ({ vendor, manifestData }: VendorProps) => {\n  const manifestVendor = manifestData.DestinyVendorDefinition[vendor.vendorID];\n  let vendorInner: JSX.Element | string;\n\n  if (!manifestVendor) {\n    vendorInner = getVendorDisplayName(vendor.shorthand);\n  } else {\n    vendorInner = (\n      <>\n        <img\n          className={STYLES.icon}\n          src={`https://www.bungie.net${manifestVendor.displayProperties.icon}`}\n          alt=\"\"\n        />\n        {manifestVendor.displayProperties.name}\n      </>\n    );\n  }\n  return (\n    <div\n      className={classnames(STYLES.vendor, {\n        [STYLES.high]: vendor.drop === VENDOR_ENGRAMS_DROP_HIGH,\n        [STYLES.low]: vendor.drop === VENDOR_ENGRAMS_DROP_LOW,\n        [STYLES.noData]: vendor.drop === VENDOR_ENGRAMS_DROP_NO_DATA\n      })}\n    >\n      {vendorInner}\n    </div>\n  );\n};\n\nconst vendorListDisplay = (\n  vendors: VendorEngramsVendorData[],\n  manifestData: ManifestData\n) => {\n  return (\n    <ul className={STYLES.vendorList}>\n      {vendors.map(v => (\n        <li className={STYLES.vendorListItem} key={v.shorthand}>\n          <Vendor manifestData={manifestData} vendor={v} />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\ninterface VendorDisplayProps {\n  manifestData?: ManifestData;\n}\n\nexport const VendorDisplay = ({ manifestData }: VendorDisplayProps) => {\n  const [vendorData, setVendorData] = useState<VendorEngramsData | undefined>(\n    undefined\n  );\n\n  const attemptRefreshVendorData = () => {\n    getVendorEngramsData()\n      .then(data => setVendorData(data))\n      .catch(e => console.warn(`Error fetching vendor engrams data:`, e));\n  };\n  useInterval(attemptRefreshVendorData, VENDOR_DATA_REFRESH_ATTEMPT_DELAY);\n  useEffect(attemptRefreshVendorData, []);\n\n  const [vendorsLastCheckedString, setVendorsLastCheckedString] = useState<\n    string | null\n  >(null);\n\n  useInterval(() => {\n    if (!vendorData) {\n      setVendorsLastCheckedString(null);\n      return;\n    }\n\n    const newString = HumanizeDuration(\n      vendorData.updateTimestamp - Date.now(),\n      {\n        round: true,\n        largest: 1\n      }\n    );\n    setVendorsLastCheckedString(newString);\n  }, 1000);\n\n  if (!manifestData) {\n    return null;\n  }\n\n  const highVendors =\n    (vendorData &&\n      vendorData.data.filter(\n        v => v.drop === VENDOR_ENGRAMS_DROP_HIGH && v.display === \"1\"\n      )) ||\n    [];\n\n  const noDataVendors =\n    (vendorData &&\n      vendorData.data.filter(\n        v => v.drop === VENDOR_ENGRAMS_DROP_NO_DATA && v.display === \"1\"\n      )) ||\n    [];\n\n  if (!vendorData) {\n    return null;\n  }\n\n  return (\n    <div className={STYLES.vendorDisplay}>\n      {highVendors.length > 0 && (\n        <div className={classnames(STYLES.section, STYLES.withSeparator)}>\n          <div className={STYLES.description}>\n            These vendors are currently giving at-level engrams (to a maximum of{\" \"}\n            <Power>{ITEM_POWER_POWERFUL_CAP}</Power>) which can help you raise\n            the power of slots below your average, or to provide items for\n            infusion:\n          </div>\n          {vendorListDisplay(highVendors, manifestData)}\n        </div>\n      )}\n      {noDataVendors.length > 0 && (\n        <div className={STYLES.section}>\n          <div className={STYLES.description}>\n            Some vendors are missing data, visit{\" \"}\n            <a\n              href=\"https://www.vendorengrams.xyz\"\n              /* eslint-disable-next-line react/jsx-no-target-blank */\n              target=\"_blank\"\n              rel=\"noopener\"\n            >\n              vendorengrams.xyz\n            </a>{\" \"}\n            if you can help provide data for these vendors:\n          </div>\n          {vendorListDisplay(noDataVendors, manifestData)}\n        </div>\n      )}\n\n      <div className={STYLES.section}>\n        <div>\n          Data provided by{\" \"}\n          <a\n            href=\"https://www.vendorengrams.xyz\"\n            /* eslint-disable-next-line react/jsx-no-target-blank */\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            vendorengrams.xyz\n          </a>\n          {vendorsLastCheckedString && (\n            <>, last updated {vendorsLastCheckedString} ago.</>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import {\r\n  DestinyCharacterComponent,\r\n  DestinyInventoryComponent,\r\n  DestinyItemComponent,\r\n  DestinyItemInstanceComponent,\r\n  DestinyProfileProgressionComponent,\r\n  DestinyProfileResponse,\r\n  ServerResponse\r\n} from \"bungie-api-ts/destiny2\";\r\n\r\nimport forIn from \"lodash/forIn\";\r\nimport groupBy from \"lodash/groupBy\";\r\nimport mapValues from \"lodash/mapValues\";\r\nimport maxBy from \"lodash/maxBy\";\r\nimport sumBy from \"lodash/sumBy\";\r\n\r\nimport {\r\n  ARTIFACT_INVENTORY_BUCKET_HASH,\r\n  CLASS_NAMES,\r\n  CLASS_TYPE_ALL,\r\n  ITEM_BUCKET_SLOTS,\r\n  ITEM_POWER_SOFT_CAP,\r\n  ITEM_SLOT_BUCKETS,\r\n  ITEM_TYPE_ARMOR,\r\n  ITEM_TYPE_WEAPON\r\n} from \"../constants\";\r\nimport {\r\n  ItemBySlot,\r\n  JoinedItemDefinition,\r\n  PowerBarsCharacterData,\r\n  PowerBySlot,\r\n  SeasonalArtifactData\r\n} from \"../types\";\r\nimport {\r\n  BungieSystemDisabledError,\r\n  getFullProfile,\r\n  getManifest,\r\n  GetManifestResult,\r\n  ManifestData\r\n} from \"./bungie-api\";\r\nimport { auth, getSelectedDestinyMembership } from \"./bungie-auth\";\r\nimport { isMasterwork } from \"./masterwork\";\r\n\r\nconst CHARACTER_DISPLAY_ORDER_STORAGE_KEY = \"characterDisplayOrder\";\r\nconst CACHED_CHARACTER_DATA_STORAGE_KEY = \"cachedCharacterData\";\r\n\r\nexport const loadCharacterDisplayOrder = () => {\r\n  const storedValue = localStorage.getItem(CHARACTER_DISPLAY_ORDER_STORAGE_KEY);\r\n  try {\r\n    return storedValue ? JSON.parse(storedValue) : undefined;\r\n  } catch (e) {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const saveCharacterDisplayOrder = (characterOrder: string[]) => {\r\n  localStorage.setItem(\r\n    CHARACTER_DISPLAY_ORDER_STORAGE_KEY,\r\n    JSON.stringify(characterOrder)\r\n  );\r\n};\r\n\r\nconst getPowerBySlot = (itemsBySlot: ItemBySlot): PowerBySlot =>\r\n  mapValues(itemsBySlot, item => item?.instanceData?.primaryStat?.value || 0);\r\n\r\nconst getAveragePower = (powerBySlot: PowerBySlot) =>\r\n  Object.values(powerBySlot).reduce((sum, power) => sum + power, 0) /\r\n  Object.keys(ITEM_SLOT_BUCKETS).length;\r\nconst getOverallPower = (powerBySlot: PowerBySlot) =>\r\n  Math.floor(getAveragePower(powerBySlot));\r\n\r\nconst mergeItems = <\r\n  T extends { [key: string]: { items: DestinyItemComponent[] } }\r\n>(\r\n  characterItemMap: T\r\n) => {\r\n  return Object.values(characterItemMap).reduce(\r\n    (allItems, characterItems) => allItems.concat(characterItems.items),\r\n    [] as DestinyItemComponent[]\r\n  );\r\n};\r\n\r\nconst isItemEquippableByCharacter = (\r\n  item: JoinedItemDefinition,\r\n  character: DestinyCharacterComponent\r\n) => {\r\n  if (!item.instanceData) {\r\n    return false;\r\n  }\r\n  if (item.instanceData.equipRequiredLevel > character.baseCharacterLevel) {\r\n    return false;\r\n  }\r\n  if (\r\n    item.itemDefinition.classType !== CLASS_TYPE_ALL &&\r\n    item.itemDefinition.classType !== character.classType\r\n  ) {\r\n    return false;\r\n  }\r\n  if (item.instanceData.cannotEquipReason === 16) {\r\n    return true;\r\n  } // Only reason is that it's in your vault\r\n  if (item.instanceData.canEquip) {\r\n    return true;\r\n  } // If the game says we can equip it, let's believe it\r\n  // Let's ignore the rest for now\r\n  return true;\r\n};\r\n\r\ninterface ObjectOf<T> {\r\n  [key: string]: T;\r\n}\r\n\r\nconst mapAndFilterItems = (\r\n  items: DestinyItemComponent[],\r\n  manifest: ManifestData,\r\n  itemInstances: ObjectOf<DestinyItemInstanceComponent>,\r\n  character: DestinyCharacterComponent\r\n): JoinedItemDefinition[] =>\r\n  items\r\n    .map(item => {\r\n      const instanceData = item.itemInstanceId\r\n        ? itemInstances[item.itemInstanceId]\r\n        : undefined;\r\n      const itemDefinition =\r\n        manifest.DestinyInventoryItemDefinition[item.itemHash];\r\n      return {\r\n        ...item,\r\n        instanceData,\r\n        itemDefinition\r\n      };\r\n    })\r\n    .filter(\r\n      i =>\r\n        i.instanceData &&\r\n        i.itemDefinition &&\r\n        [ITEM_TYPE_ARMOR, ITEM_TYPE_WEAPON].includes(i.itemDefinition.itemType)\r\n    )\r\n    .map(i => ({\r\n      ...i,\r\n      instanceData: i.instanceData!,\r\n      itemDefinition: i.itemDefinition!\r\n    }))\r\n    .map(i => ({\r\n      ...i,\r\n      slotName: ITEM_BUCKET_SLOTS[i.itemDefinition.inventory.bucketTypeHash]\r\n    }))\r\n    .filter(i => i.instanceData.primaryStat && i.instanceData.primaryStat.value)\r\n    .filter(i => isItemEquippableByCharacter(i, character));\r\n\r\nconst getItemScore = (\r\n  item?: JoinedItemDefinition,\r\n  priorityItems?: DestinyItemComponent[]\r\n) => {\r\n  if (!item || !item.instanceData || !item.instanceData.primaryStat) {\r\n    return 0;\r\n  }\r\n  let score = item.instanceData.primaryStat.value;\r\n  if (\r\n    priorityItems &&\r\n    priorityItems.some(pi => pi.itemInstanceId === item.itemInstanceId)\r\n  ) {\r\n    // Prefer items currently equipped on character over items of equal level elsewhere\r\n    score += 0.5;\r\n  }\r\n  if (isMasterwork(item)) {\r\n    score += 0.25;\r\n  }\r\n  if (item.location === 1) {\r\n    // In inventory\r\n    score += 0.125;\r\n  }\r\n  return score;\r\n};\r\n\r\nconst getEquipLabel = (item?: JoinedItemDefinition) =>\r\n  item?.itemDefinition.equippingBlock.uniqueLabel;\r\n\r\n// const getEmblemData = (\r\n//   character: DestinyCharacterComponent,\r\n//   manifest: ManifestData\r\n// ) => {\r\n//   if (!manifest) {\r\n//     return;\r\n//   }\r\n//   return manifest.DestinyInventoryItemDefinition[character.emblemHash];\r\n// };\r\n\r\nconst getDataForCharacterId = (\r\n  characterId: string,\r\n  characters: ObjectOf<DestinyCharacterComponent>,\r\n  itemInstances: ObjectOf<DestinyItemInstanceComponent>,\r\n  manifest: ManifestData,\r\n  equippedCharacterItems: DestinyItemComponent[],\r\n  allCharacterItems: DestinyItemComponent[],\r\n  profileInventories: DestinyInventoryComponent,\r\n  profileProgression: DestinyProfileProgressionComponent\r\n): PowerBarsCharacterData => {\r\n  const character = characters[characterId];\r\n  const className = CLASS_NAMES[character.classType];\r\n\r\n  const characterItems = mapAndFilterItems(\r\n    allCharacterItems,\r\n    manifest,\r\n    itemInstances,\r\n    character\r\n  );\r\n  const relevantProfileItems = mapAndFilterItems(\r\n    profileInventories.items,\r\n    manifest,\r\n    itemInstances,\r\n    character\r\n  ).filter(\r\n    i =>\r\n      i.itemDefinition.classType === CLASS_TYPE_ALL ||\r\n      i.itemDefinition.classType === character.classType\r\n  );\r\n\r\n  const allItems = characterItems.concat(relevantProfileItems);\r\n\r\n  // Group by slot\r\n  const itemsBySlot = groupBy(allItems, i => i.slotName);\r\n  // Get max power items per slot\r\n  let topItemBySlot: ItemBySlot = mapValues(\r\n    itemsBySlot,\r\n    items => maxBy(items, item => getItemScore(item, equippedCharacterItems))!\r\n  );\r\n  // Get overlaps by equip label\r\n  const uniqueEquippedGroups = groupBy(\r\n    Object.values(topItemBySlot).filter(getEquipLabel),\r\n    getEquipLabel\r\n  );\r\n  // For overlaps with more than one item, generate valid options where all-but-one item is swapped for the next best non-exotic\r\n  forIn(uniqueEquippedGroups, uniqueEquippedGroup => {\r\n    if (uniqueEquippedGroup.length <= 1) {\r\n      return;\r\n    }\r\n\r\n    const validItemCombinations: ItemBySlot[] = [];\r\n\r\n    uniqueEquippedGroup.forEach(item => {\r\n      const otherItems: JoinedItemDefinition[] = uniqueEquippedGroup\r\n        .filter(otherItem => otherItem !== item)\r\n        .filter(otherItem => !!otherItem)\r\n        .map(otherItem => otherItem!);\r\n      let isCombinationValid = true;\r\n      const combination = { ...topItemBySlot };\r\n      otherItems.forEach(otherItem => {\r\n        // Find non-exotics for this slot\r\n        const nonExotics = itemsBySlot[otherItem.slotName].filter(\r\n          i => !getEquipLabel(i)\r\n        );\r\n        if (nonExotics.length > 0) {\r\n          // Select max power from non-exotics\r\n          combination[otherItem.slotName] = maxBy(nonExotics, i =>\r\n            getItemScore(i, equippedCharacterItems)\r\n          )!;\r\n        } else {\r\n          // No non-exotic options for this slot, so whole combination is invalidaa\r\n          isCombinationValid = false;\r\n        }\r\n      });\r\n      if (isCombinationValid) {\r\n        validItemCombinations.push(combination);\r\n      }\r\n    });\r\n\r\n    // Select highest total scoring valid combination, if alternative item combinations have been generated\r\n    if (validItemCombinations.length > 0) {\r\n      const bestCombination = maxBy(validItemCombinations, combination =>\r\n        sumBy(Object.values(combination), getItemScore)\r\n      )!;\r\n      topItemBySlot = bestCombination;\r\n    }\r\n  });\r\n\r\n  const powerBySlot = getPowerBySlot(topItemBySlot);\r\n  const overallPowerExact = getAveragePower(powerBySlot);\r\n  const overallPower = getOverallPower(powerBySlot);\r\n\r\n  const artifactItemComponent = allCharacterItems.find(\r\n    i => i.bucketHash === ARTIFACT_INVENTORY_BUCKET_HASH\r\n  );\r\n\r\n  const artifactInstance =\r\n    artifactItemComponent?.itemInstanceId &&\r\n    itemInstances[artifactItemComponent.itemInstanceId];\r\n\r\n  let artifactData: SeasonalArtifactData | undefined;\r\n  if (\r\n    artifactItemComponent &&\r\n    profileProgression.seasonalArtifact &&\r\n    artifactInstance\r\n  ) {\r\n    const artifactDefinition = manifest.DestinyInventoryItemDefinition[\r\n      artifactItemComponent.itemHash\r\n    ]!;\r\n    artifactData = {\r\n      bonusPower:\r\n        profileProgression.seasonalArtifact.powerBonus ||\r\n        artifactInstance.primaryStat.value,\r\n      iconPath: artifactDefinition.displayProperties.icon,\r\n      name: artifactDefinition.displayProperties.name,\r\n      progressToNextLevel:\r\n        profileProgression.seasonalArtifact?.powerBonusProgression\r\n          ?.progressToNextLevel,\r\n      nextLevelAt:\r\n        profileProgression.seasonalArtifact?.powerBonusProgression?.nextLevelAt\r\n    };\r\n  }\r\n\r\n  const potentialPowerBySlot = { ...powerBySlot };\r\n  while (\r\n    Object.values(potentialPowerBySlot).some(\r\n      power =>\r\n        power < getOverallPower(potentialPowerBySlot) ||\r\n        power < ITEM_POWER_SOFT_CAP\r\n    )\r\n  ) {\r\n    const tempPotentialOverallPower = getOverallPower(potentialPowerBySlot);\r\n    Object.keys(potentialPowerBySlot).forEach(\r\n      slot =>\r\n        (potentialPowerBySlot[slot] = Math.max(\r\n          ITEM_POWER_SOFT_CAP,\r\n          Math.max(tempPotentialOverallPower, potentialPowerBySlot[slot])\r\n        ))\r\n    );\r\n  }\r\n  const potentialOverallPower = getOverallPower(potentialPowerBySlot);\r\n\r\n  const titleDefinition =\r\n    manifest.DestinyRecordDefinition[character.titleRecordHash || \"\"];\r\n  const title =\r\n    titleDefinition &&\r\n    titleDefinition.titleInfo.titlesByGenderHash[character.genderHash];\r\n\r\n  const resultData: PowerBarsCharacterData = {\r\n    character,\r\n    className,\r\n    overallPowerExact,\r\n    overallPower,\r\n    potentialOverallPower,\r\n    topItemBySlot,\r\n    artifactData,\r\n    title\r\n  };\r\n\r\n  return resultData;\r\n};\r\n\r\nexport const getCachedCharacterData = async (\r\n  setCharacterData: (state: PowerBarsCharacterData[]) => any\r\n) => {\r\n  const dataString = localStorage.getItem(CACHED_CHARACTER_DATA_STORAGE_KEY);\r\n  if (dataString) {\r\n    try {\r\n      const parsedData = JSON.parse(dataString) as PowerBarsCharacterData[];\r\n      setCharacterData(parsedData);\r\n    } catch (e) {\r\n      console.error(`Error parsing cached character data`, e);\r\n    }\r\n  }\r\n};\r\n\r\nconst setCachedCharacterData = (data: PowerBarsCharacterData[]) => {\r\n  localStorage.setItem(CACHED_CHARACTER_DATA_STORAGE_KEY, JSON.stringify(data));\r\n};\r\n\r\nexport const getCharacterData = async (\r\n  setCharacterData: (state: PowerBarsCharacterData[]) => any,\r\n  setIsFetchingCharacterData: (state: boolean) => any\r\n) => {\r\n  try {\r\n    const isAuthed = await auth();\r\n    if (!isAuthed) {\r\n      return;\r\n    }\r\n\r\n    const pendingManifest = getManifest();\r\n\r\n    setIsFetchingCharacterData(true);\r\n\r\n    const destinyMembership = getSelectedDestinyMembership();\r\n    if (!destinyMembership) {\r\n      return;\r\n    }\r\n\r\n    let fullProfile: ServerResponse<DestinyProfileResponse> | undefined;\r\n    try {\r\n      fullProfile = await getFullProfile(\r\n        destinyMembership.membershipType,\r\n        destinyMembership.membershipId\r\n      );\r\n      if (fullProfile.ErrorStatus === \"SystemDisabled\") {\r\n        throw new BungieSystemDisabledError();\r\n      }\r\n    } catch (e) {\r\n      if (e.message === \"401\") {\r\n        await auth();\r\n        fullProfile = await getFullProfile(\r\n          destinyMembership.membershipType,\r\n          destinyMembership.membershipId\r\n        );\r\n      } else {\r\n        throw e;\r\n      }\r\n    }\r\n\r\n    if (\r\n      !fullProfile ||\r\n      !fullProfile?.Response?.characters?.data ||\r\n      !fullProfile?.Response?.characterEquipment?.data ||\r\n      !fullProfile?.Response?.characterInventories?.data ||\r\n      !fullProfile?.Response?.profileInventory?.data ||\r\n      !fullProfile?.Response?.itemComponents?.instances?.data ||\r\n      !fullProfile?.Response?.profileProgression?.data\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    const characters = fullProfile.Response.characters.data;\r\n    const characterEquipments = fullProfile.Response.characterEquipment.data;\r\n    const characterInventories = fullProfile.Response.characterInventories.data;\r\n    const profileInventories = fullProfile.Response.profileInventory.data;\r\n    const itemInstances = fullProfile.Response.itemComponents.instances.data;\r\n    const profileProgression = fullProfile.Response.profileProgression.data;\r\n\r\n    let manifestResult: GetManifestResult | undefined;\r\n    try {\r\n      manifestResult = await pendingManifest;\r\n    } catch (e) {\r\n      console.error(e);\r\n      return;\r\n    }\r\n\r\n    if (!manifestResult || !manifestResult.manifest) {\r\n      return;\r\n    }\r\n\r\n    const { manifest } = manifestResult;\r\n\r\n    const allCharacterItems = mergeItems(characterInventories)\r\n      .concat(mergeItems(characterEquipments))\r\n      .concat(profileInventories.items);\r\n\r\n    const characterIds = Object.keys(characters);\r\n    const characterData = characterIds.map(id =>\r\n      getDataForCharacterId(\r\n        id,\r\n        characters,\r\n        itemInstances,\r\n        manifest,\r\n        characterEquipments[id].items,\r\n        allCharacterItems,\r\n        profileInventories,\r\n        profileProgression\r\n      )\r\n    );\r\n    setCachedCharacterData(characterData);\r\n    setCharacterData(characterData);\r\n  } catch (e) {\r\n    throw e;\r\n  } finally {\r\n    setIsFetchingCharacterData(false);\r\n  }\r\n};\r\n","import * as bungieApi from \"./bungie-api\";\nimport * as bungieAuth from \"./bungie-auth\";\nimport * as ga from \"./ga\";\nimport * as utils from \"./utils\";\nimport * as vendors from \"./vendor-engrams\";\n\nexport interface Api {\n  bungieApi: typeof bungieApi;\n  bungieAuth: typeof bungieAuth;\n  ga: typeof ga;\n  utils: typeof utils;\n  vendors: typeof vendors;\n}\n\nexport type BungieApi = typeof bungieApi;\nexport type BungieAuth = typeof bungieAuth;\nexport type GA = typeof ga;\nexport type Utils = typeof utils;\nexport type Vendors = typeof vendors;\n\nexport interface PartialApi {\n  bungieApi?: Partial<BungieApi>;\n  bungieAuth?: Partial<BungieAuth>;\n  ga?: Partial<GA>;\n  utils?: Partial<Utils>;\n  vendors?: Partial<Vendors>;\n}\n\nexport default {\n  bungieApi,\n  bungieAuth,\n  ga,\n  utils,\n  vendors\n};\n","import classnames from \"classnames\";\nimport React from \"react\";\n\nimport STYLES from \"./LoadingChecklist.module.scss\";\n\nexport type LoadingChecklistItemStatus = \"complete\" | \"pending\" | \"failed\";\n\nexport interface LoadingChecklistItem {\n  label: string;\n  status: LoadingChecklistItemStatus;\n}\n\ninterface LoadingChecklistProps {\n  items: LoadingChecklistItem[];\n  withTopMargin?: boolean;\n}\n\nexport const LoadingChecklist = ({\n  items,\n  withTopMargin\n}: LoadingChecklistProps) => {\n  return (\n    <div\n      className={classnames(STYLES.LoadingChecklist, {\n        [STYLES.topMargin]: withTopMargin\n      })}\n    >\n      <ul>\n        {items.map(item => (\n          <li key={item.label}>\n            <div className={STYLES.item}>\n              <div className={classnames(STYLES.status, STYLES[item.status])} />\n              {item.label}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import gen from \"random-seed\";\r\nimport React from \"react\";\r\n\r\nimport STYLES from \"./Stonks.module.scss\";\r\n\r\ntype StonkSide = \"left\" | \"right\";\r\nconst createStonk = (\r\n  index: number,\r\n  x: number,\r\n  y: number,\r\n  side: StonkSide,\r\n  rot: number\r\n) => {\r\n  const element = (\r\n    <div\r\n      key={`stonk_${index}`}\r\n      className={STYLES.stonk}\r\n      style={{ top: `${y}%`, [side]: `${x}px`, transform: `rotate(${rot}deg)` }}\r\n    ></div>\r\n  );\r\n  return { element, y };\r\n};\r\n\r\ninterface StonksProps {\r\n  overrideSeed?: string;\r\n  overrideStonkLevel?: number;\r\n}\r\n\r\nfunction randn_bm(rand: gen.RandomSeed, to: number): number {\r\n  let u = 0;\r\n  let v = 0;\r\n  while (u === 0) {\r\n    u = rand.random();\r\n  }\r\n  while (v === 0) {\r\n    v = rand.random();\r\n  }\r\n  let num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);\r\n  num = num / 10.0 + 0.5; // Translate to 0 -> 1\r\n  if (num > 1 || num < 0) {\r\n    return randn_bm(rand, to); // resample between 0 and 1\r\n  }\r\n  return num * to;\r\n}\r\n\r\nexport const Stonks = ({ overrideSeed, overrideStonkLevel }: StonksProps) => {\r\n  const now = new Date().getTime();\r\n  const seasonOfDawnEnd = new Date(2020, 2, 10, 17, 0, 0).getTime();\r\n  const DAY = 1000 * 60 * 60 * 24;\r\n  const daysUntilEnd = Math.floor((seasonOfDawnEnd - now) / DAY);\r\n\r\n  const seed = overrideSeed || seasonOfDawnEnd * new Date().getUTCDate();\r\n  const rand = gen.create(`${seed}`);\r\n\r\n  const MAX_STONK_LEVEL = 15;\r\n  const stonkLevel = Math.max(\r\n    Math.min(\r\n      MAX_STONK_LEVEL,\r\n      overrideStonkLevel || MAX_STONK_LEVEL / Math.min(28, daysUntilEnd)\r\n    ),\r\n    1\r\n  );\r\n\r\n  const numToCreate = (rand(10) + 10) * stonkLevel;\r\n\r\n  const stonks: Array<{ element: JSX.Element; y: number }> = [];\r\n  for (let i = 0; i < numToCreate; i++) {\r\n    const y = rand.floatBetween(-5, 100);\r\n    const maxY = Math.max(1, y);\r\n    const x = rand.floatBetween(\r\n      -60,\r\n      20 * stonkLevel + Math.pow(maxY, maxY / 65)\r\n    );\r\n    const side: StonkSide = rand(100) < 50 ? \"left\" : \"right\";\r\n    const rot = rand.floatBetween(0, 360);\r\n    stonks.push(createStonk(i, x, y, side, rot));\r\n  }\r\n\r\n  const sortedStonks = stonks.sort((a, b) => a.y - b.y).map(s => s.element);\r\n\r\n  return (\r\n    <div className={STYLES.Stonks}>\r\n      <div className={STYLES.stonkContainer}>{sortedStonks}</div>\r\n    </div>\r\n  );\r\n};\r\n","import useInterval from \"@use-it/interval\";\nimport { UserInfoCard } from \"bungie-api-ts/user\";\nimport classnames from \"classnames\";\nimport throttle from \"lodash/throttle\";\nimport React, { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  auth,\n  hasManuallyAuthed,\n  hasSelectedDestinyMembership,\n  hasValidAuth,\n  manualStartAuth,\n  setSelectedDestinyMembership\n} from \"./services/bungie-auth\";\nimport ga from \"./services/ga\";\nimport { PowerBarsCharacterData } from \"./types\";\n\nimport CharacterDisplay from \"./components/CharacterDisplay\";\nimport FetchSpinner from \"./components/FetchSpinner\";\nimport { Footer } from \"./components/Footer\";\nimport { Header } from \"./components/Header\";\nimport LoadingSpinner from \"./components/LoadingSpinner\";\nimport { LoginPrompt } from \"./components/LoginPrompt\";\nimport MembershipSelect from \"./components/MembershipSelect\";\nimport { VendorDisplay } from \"./components/VendorDisplay\";\nimport api from \"./services/api\";\nimport {\n  BungieSystemDisabledError,\n  getManifest,\n  ManifestData\n} from \"./services/bungie-api\";\nimport { EVENTS, useEvent } from \"./services/events\";\nimport {\n  getCachedCharacterData,\n  getCharacterData,\n  loadCharacterDisplayOrder,\n  saveCharacterDisplayOrder\n} from \"./services/utils\";\n\nimport \"normalize.css\";\nimport \"./index.css\";\n\nimport STYLES from \"./App.module.scss\";\nimport {\n  LoadingChecklist,\n  LoadingChecklistItem\n} from \"./components/LoadingChecklist\";\nimport { Stonks } from \"./components/Stonks\";\n\nconst CHARACTER_DATA_REFRESH_TIMER = 15000;\n\nconst doAuth = throttle(\n  (\n    setIsAuthed: (value: boolean) => void,\n    setAuthError: (value: boolean) => void\n  ) => {\n    (async () => {\n      try {\n        const authResult = await auth();\n        if (authResult) {\n          setIsAuthed(true);\n          setAuthError(false);\n        } else {\n          setIsAuthed(false);\n          setAuthError(true);\n        }\n      } catch (e) {\n        console.error(e);\n        setIsAuthed(false);\n        setAuthError(true);\n      }\n    })();\n  },\n  100\n);\n\nconst doGetManifest = throttle(\n  (\n    setBungieSystemDisabled: (value: boolean) => void,\n    setBungieServiceUnavailable: (value: boolean) => void,\n    setManifestData: (value: ManifestData) => void,\n    setManifestError: (value: boolean) => void\n  ) => {\n    (async () => {\n      try {\n        const manifestResult = await getManifest();\n        if (manifestResult.error) {\n          console.error(\n            `Error fetching manifest:`,\n            manifestResult.error.message\n          );\n          setManifestError(true);\n          if (manifestResult.error instanceof BungieSystemDisabledError) {\n            setBungieSystemDisabled(true);\n          }\n          if (manifestResult.error.message === \"503\") {\n            setBungieServiceUnavailable(true);\n          }\n          return;\n        }\n        setManifestData(manifestResult.manifest);\n      } catch (e) {\n        console.error(e);\n        setManifestError(true);\n      }\n    })();\n  },\n  500\n);\n\nconst doGetCharacterData = throttle(\n  (\n    isFetchingCharacterData: boolean,\n    setCharacterData: (value: PowerBarsCharacterData[]) => void,\n    setIsFetchingCharacterData: (value: boolean) => void,\n    setBungieSystemDisabled: (value: boolean) => void,\n    setBungieServiceUnavailable: (value: boolean) => void\n  ) => {\n    const updateCharacterData = (newData: PowerBarsCharacterData[]) => {\n      const newOverallPower = Math.max(...newData.map(c => c.overallPower));\n      const newArtifactPower = Math.max(\n        ...newData.map(c => (c.artifactData ? c.artifactData.bonusPower : 0))\n      );\n      const newTotalPower = newOverallPower + newArtifactPower;\n      ga.set({\n        dimension1: `${newOverallPower}`,\n        dimension2: `${newArtifactPower}`,\n        dimension3: `${newTotalPower}`\n      });\n      setCharacterData(newData);\n    };\n\n    (async () => {\n      if (!isFetchingCharacterData) {\n        try {\n          setIsFetchingCharacterData(true);\n          await getCharacterData(\n            updateCharacterData,\n            setIsFetchingCharacterData\n          );\n        } catch (error) {\n          if (error instanceof BungieSystemDisabledError) {\n            setBungieSystemDisabled(true);\n          }\n          if (error.message === \"503\") {\n            setBungieServiceUnavailable(true);\n          }\n          console.error(\"Error fetching character data:\", error);\n        }\n      }\n    })();\n  },\n  500\n);\n\nexport const AppWrapper = ({\n  children,\n  top = false\n}: {\n  children: JSX.Element | Array<JSX.Element | null>;\n  top?: boolean;\n}) => {\n  return (\n    <div className={STYLES.App}>\n      <div className={classnames(STYLES.AppInner, { [STYLES.top]: top })}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nconst App = () => {\n  const [disableManualLogin, setDisableManualLogin] = useState(\n    hasManuallyAuthed()\n  );\n  const [isAuthed, setIsAuthed] = useState(hasValidAuth());\n  const [hasAuthError, setAuthError] = useState(false);\n  const [hasSelectedMembership, setHasMembership] = useState(\n    hasSelectedDestinyMembership()\n  );\n  const [manifestData, setManifestData] = useState<ManifestData | undefined>(\n    undefined\n  );\n  const [hasManifestError, setManifestError] = useState(false);\n  const [isBungieSystemDisabled, setBungieSystemDisabled] = useState(false);\n  const [isBungieServiceUnavailable, setBungieServiceUnavailable] = useState(\n    false\n  );\n  const [isFetchingCharacterData, setIsFetchingCharacterData] = useState(false);\n  const [characterData, setCharacterData] = useState<\n    PowerBarsCharacterData[] | undefined\n  >(undefined);\n\n  const [manifestState, setManifestState] = useState(\"Unknown\");\n  useEvent(EVENTS.GET_MANIFEST, () => {\n    setManifestError(false);\n    setManifestState(\"Checking manifest version\");\n  });\n  useEvent(EVENTS.LOAD_MANIFEST_DATA, () =>\n    setManifestState(\"Loading manifest data\")\n  );\n  useEvent(EVENTS.FETCH_MANIFEST_DATA, () =>\n    setManifestState(\"Fetching manifest data from Bungie\")\n  );\n  useEvent(EVENTS.PARSE_MANIFEST_DATA, () =>\n    setManifestState(\"Processing manifest data\")\n  );\n  useEvent(EVENTS.STORE_MANIFEST_DATA, () =>\n    setManifestState(\"Saving manifest data\")\n  );\n  useEvent(EVENTS.MANIFEST_DATA_READY, () => {\n    setManifestError(false);\n    setManifestState(\"Manifest ready\");\n  });\n  useEvent(EVENTS.LOG_OUT, () => {\n    setIsAuthed(false);\n    setDisableManualLogin(false);\n  });\n\n  const hasManifestData = manifestState === \"Manifest ready\";\n\n  useEffect(() => {\n    if (!isAuthed) {\n      doAuth(setIsAuthed, setAuthError);\n    }\n  }, [isAuthed, setIsAuthed, setAuthError]);\n\n  useEffect(\n    () =>\n      doGetManifest(\n        setBungieSystemDisabled,\n        setBungieServiceUnavailable,\n        setManifestData,\n        setManifestError\n      ),\n    [\n      setBungieSystemDisabled,\n      setBungieServiceUnavailable,\n      setManifestData,\n      setManifestError\n    ]\n  );\n\n  useEvent(EVENTS.MANIFEST_FETCH_ERROR, () => {\n    doGetManifest(\n      setBungieSystemDisabled,\n      setBungieServiceUnavailable,\n      setManifestData,\n      setManifestError\n    );\n  });\n\n  const [\n    hasLoadedCachedCharacterData,\n    setHasLoadedCachedCharacterData\n  ] = useState(false);\n\n  useEffect(() => {\n    if (isAuthed && hasSelectedMembership && !hasLoadedCachedCharacterData) {\n      setHasLoadedCachedCharacterData(true);\n      getCachedCharacterData(setCharacterData);\n    }\n  }, [\n    isAuthed,\n    hasSelectedMembership,\n    hasLoadedCachedCharacterData,\n    setHasLoadedCachedCharacterData\n  ]);\n\n  useInterval(() => {\n    if (isAuthed && hasSelectedMembership && !isFetchingCharacterData) {\n      doGetCharacterData(\n        isFetchingCharacterData,\n        setCharacterData,\n        setIsFetchingCharacterData,\n        setBungieSystemDisabled,\n        setBungieServiceUnavailable\n      );\n    }\n  }, CHARACTER_DATA_REFRESH_TIMER);\n\n  useEffect(() => {\n    if (\n      isAuthed &&\n      !characterData &&\n      !isFetchingCharacterData &&\n      !isBungieSystemDisabled\n    ) {\n      doGetCharacterData(\n        isFetchingCharacterData,\n        setCharacterData,\n        setIsFetchingCharacterData,\n        setBungieSystemDisabled,\n        setBungieServiceUnavailable\n      );\n    }\n  }, [\n    isAuthed,\n    characterData,\n    isFetchingCharacterData,\n    isBungieSystemDisabled\n  ]);\n\n  const onSelectMembership = useCallback(\n    (membership: UserInfoCard) => {\n      ga.event({\n        category: \"Platform\",\n        action: \"Select platform\",\n        label: `Membership type: ${membership.membershipType}`\n      });\n      setSelectedDestinyMembership(membership);\n      setHasMembership(true);\n    },\n    [setHasMembership]\n  );\n\n  let status: string | JSX.Element = \"\";\n  if (isBungieSystemDisabled) {\n    status = (\n      <span>\n        Bungie API disabled.\n        <br />\n        Check{\" \"}\n        <a\n          href=\"https://www.bungie.net/en/Help/Article/13125\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Bungie's server and update status page\n        </a>{\" \"}\n        for more information\n      </span>\n    );\n  } else if (isBungieServiceUnavailable) {\n    status = (\n      <span>\n        Bungie API unavailable.\n        <br />\n        Check{\" \"}\n        <a\n          href=\"https://www.bungie.net/en/Help/Article/13125\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Bungie's server and update status page\n        </a>{\" \"}\n        for more information\n      </span>\n    );\n  } else if (hasAuthError) {\n    status = (\n      <span\n        className={STYLES.statusAuthError}\n        onClick={() => manualStartAuth()}\n      >\n        Bungie.net authentication required\n      </span>\n    );\n  } else if (hasManifestError) {\n    status = (\n      <span>\n        Error fetching manifest, <a href=\"/\">refresh page</a> to try again!\n      </span>\n    );\n  } else if (!isAuthed) {\n    status = \"Authenticating...\";\n  } else if (!hasSelectedMembership) {\n    status = \"Waiting for Destiny platform selection...\";\n  } else if (!hasManifestData) {\n    status = manifestState;\n  } else if (!characterData || characterData.length === 0) {\n    if (isFetchingCharacterData) {\n      status = \"Fetching character data...\";\n    } else {\n      status = \"No character data\";\n    }\n  }\n\n  (window as any).characterData = characterData;\n\n  const getDefaultCharacterDisplayOrder = useCallback(\n    () =>\n      characterData ? characterData.map(c => c.character.characterId) : [],\n    [characterData]\n  );\n\n  const isValidCharacterDisplayOrder = useCallback(\n    (characterIds: string[]) =>\n      characterData &&\n      characterData.length === characterIds.length &&\n      characterIds.every(id =>\n        characterData.some(c => c.character.characterId === id)\n      ) &&\n      characterData.every(c => characterIds.includes(c.character.characterId)),\n    [characterData]\n  );\n\n  const [draggingCharacterId, setDraggingCharacterId] = useState<\n    string | undefined\n  >(undefined);\n  const [characterDisplayOrder, setCharacterDisplayOrder] = useState<\n    string[] | undefined\n  >(loadCharacterDisplayOrder());\n  const dropOnCharacterId = useCallback(\n    (dropCharacterId: string) => {\n      if (!draggingCharacterId || draggingCharacterId === dropCharacterId) {\n        return;\n      }\n      const currentCharacterOrder =\n        characterDisplayOrder && characterDisplayOrder.length > 0\n          ? characterDisplayOrder\n          : getDefaultCharacterDisplayOrder();\n\n      const swappedOrder = currentCharacterOrder.slice();\n      swappedOrder.splice(\n        currentCharacterOrder.indexOf(draggingCharacterId),\n        1,\n        dropCharacterId\n      );\n      swappedOrder.splice(\n        currentCharacterOrder.indexOf(dropCharacterId),\n        1,\n        draggingCharacterId\n      );\n\n      saveCharacterDisplayOrder(swappedOrder);\n      setCharacterDisplayOrder(swappedOrder);\n    },\n    [\n      draggingCharacterId,\n      characterDisplayOrder,\n      setCharacterDisplayOrder,\n      getDefaultCharacterDisplayOrder\n    ]\n  );\n\n  let useCharacterOrder = getDefaultCharacterDisplayOrder();\n  if (\n    characterData &&\n    characterData.length > 0 &&\n    characterDisplayOrder &&\n    characterDisplayOrder.length > 0\n  ) {\n    // Validate that character IDs in display order match\n    if (isValidCharacterDisplayOrder(characterDisplayOrder)) {\n      useCharacterOrder = characterDisplayOrder;\n    } else {\n      setCharacterDisplayOrder(undefined);\n    }\n  }\n\n  const shouldShowStonks = () => {\n    const now = new Date();\n    const seasonOfDawnEnd = new Date(2020, 2, 10, 17, 0, 0);\n    return now < seasonOfDawnEnd;\n  };\n  const [showStonks, setShowStonks] = useState(shouldShowStonks());\n  useInterval(() => setShowStonks(shouldShowStonks()), 1000 * 60 * 10);\n\n  if (isAuthed && characterData && characterData.length > 0) {\n    return (\n      <AppWrapper top>\n        <MembershipSelect api={api} onMembershipSelect={onSelectMembership} />\n        <div className={STYLES.charactersContainer}>\n          <div className={STYLES.characters}>\n            {useCharacterOrder\n              .map(characterId =>\n                characterData.find(c => c.character.characterId === characterId)\n              )\n              .map(c => (\n                <CharacterDisplay\n                  key={c!.character.characterId}\n                  data={c!}\n                  onDragStart={() =>\n                    setDraggingCharacterId(c!.character.characterId)\n                  }\n                  onDragEnd={() => setDraggingCharacterId(undefined)}\n                  onDragDrop={() => dropOnCharacterId(c!.character.characterId)}\n                />\n              ))}\n          </div>\n        </div>\n        <VendorDisplay manifestData={manifestData} />\n        {status ? <LoadingSpinner>{status}</LoadingSpinner> : null}\n        {isFetchingCharacterData ? <FetchSpinner /> : null}\n        {showStonks ? <Stonks /> : null}\n        <Footer />\n      </AppWrapper>\n    );\n  }\n\n  if (hasAuthError && !disableManualLogin) {\n    return (\n      <AppWrapper>\n        <Header />\n        <LoginPrompt />\n        <Footer />\n      </AppWrapper>\n    );\n  }\n\n  const loadingChecklistItems: LoadingChecklistItem[] = [];\n  const addToChecklist = (\n    label: string,\n    isComplete: boolean,\n    isFailed?: boolean\n  ) =>\n    loadingChecklistItems.push({\n      label,\n      status: isComplete ? \"complete\" : isFailed ? \"failed\" : \"pending\"\n    });\n  addToChecklist(\"Authenticated\", isAuthed, hasAuthError);\n  addToChecklist(\"Loaded Character Data\", !!characterData);\n  addToChecklist(\n    \"Loaded Destiny Manifest Defintions\",\n    hasManifestData,\n    hasManifestError\n  );\n\n  return (\n    <AppWrapper>\n      <MembershipSelect api={api} onMembershipSelect={onSelectMembership} />\n      <LoadingChecklist withTopMargin items={loadingChecklistItems} />\n      <LoadingSpinner>{status}</LoadingSpinner>\n      <Footer />\n    </AppWrapper>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              config?.onUpdate?.(registration);\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              config?.onSuccess?.(registration);\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"interPowerBar\":\"InterPowerBar_interPowerBar__1irbI\",\"min\":\"InterPowerBar_min__nPrv5\",\"max\":\"InterPowerBar_max__23K0g\",\"bar\":\"InterPowerBar_bar__1z25i\",\"fillBar\":\"InterPowerBar_fillBar__2bwYr\",\"barOverlay\":\"InterPowerBar_barOverlay___zQVM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__15LM-\",\"AppInner\":\"App_AppInner__2tVOm\",\"top\":\"App_top__3N23O\",\"loadingContainer\":\"App_loadingContainer__1Pa9s\",\"charactersContainer\":\"App_charactersContainer__1RSU_\",\"characters\":\"App_characters__1GhrS\",\"loadingStatus\":\"App_loadingStatus__3QEhd\",\"statusAuthError\":\"App_statusAuthError__3mdh6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lazyImage\":\"LazyImage_lazyImage__j4cxv\",\"hidden\":\"LazyImage_hidden__sfsi5\",\"overlay\":\"LazyImage_overlay__1Z9M2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoadingChecklist\":\"LoadingChecklist_LoadingChecklist__KbNL5\",\"topMargin\":\"LoadingChecklist_topMargin__1ARfF\",\"item\":\"LoadingChecklist_item__2_2Cl\",\"status\":\"LoadingChecklist_status__1-PMx\",\"complete\":\"LoadingChecklist_complete__1qfgG\",\"pending\":\"LoadingChecklist_pending__3ykCd\",\"failed\":\"LoadingChecklist_failed__2NRty\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"anchor\":\"FetchSpinner_anchor__2bpEe\",\"spinner\":\"FetchSpinner_spinner__3uf-_\",\"spin\":\"FetchSpinner_spin__3wMft\",\"fetchSpinnerContainer\":\"FetchSpinner_fetchSpinnerContainer__2f9d4\",\"spinnerSmall\":\"FetchSpinner_spinnerSmall__2pJsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"socialLinks\":\"SocialLinks_socialLinks__18XFZ\",\"link\":\"SocialLinks_link__3Z2Wj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"Header_headerContainer__3M_mx\",\"header\":\"Header_header__2XAj3\",\"subHeader\":\"Header_subHeader__3Ap8f\",\"author\":\"Header_author__17ihj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"LoginPrompt_loginContainer__1DfGO\",\"exampleImage\":\"LoginPrompt_exampleImage__3f80u\",\"login\":\"LoginPrompt_login__r8eqR\",\"loginButton\":\"LoginPrompt_loginButton__n1OHn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Stonks\":\"Stonks_Stonks__3HluO\",\"stonkContainer\":\"Stonks_stonkContainer__3f8Ce\",\"stonk\":\"Stonks_stonk__RHoY1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"kofiContainer\":\"KoFi_kofiContainer__1-NvR\",\"link\":\"KoFi_link__mMabj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hints\":\"PowerHints_hints__9HbgH\",\"hint\":\"PowerHints_hint__2zx_C\",\"dropHint\":\"PowerHints_dropHint__3lQ-N\",\"worldDropHint\":\"PowerHints_worldDropHint__3M_Nv\",\"legendaryWorldDropHint\":\"PowerHints_legendaryWorldDropHint__g_SSJ\",\"powerfulHint\":\"PowerHints_powerfulHint__26w25\",\"pinnacleHint\":\"PowerHints_pinnacleHint__c2cdM\",\"separator\":\"PowerHints_separator__1_of2\",\"hintExtra\":\"PowerHints_hintExtra__2TIGc\",\"hintExtraInner\":\"PowerHints_hintExtraInner__2tEbw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"PowerDetails_details__1vqno\",\"detailsRow\":\"PowerDetails_detailsRow__20lfp\",\"detailsLabel\":\"PowerDetails_detailsLabel__2dvVG\",\"detailsInlineIcon\":\"PowerDetails_detailsInlineIcon__1Pqe3\",\"detailsValue\":\"PowerDetails_detailsValue__3daTt\",\"progressBar\":\"PowerDetails_progressBar__2-GA8\",\"progressBarFill\":\"PowerDetails_progressBarFill__sl9C7\",\"progressBarOverlay\":\"PowerDetails_progressBarOverlay__1c66l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"membershipSelect\":\"MembershipSelect_membershipSelect__3GbZz\",\"logOut\":\"MembershipSelect_logOut__VQnEI\",\"logOutIcon\":\"MembershipSelect_logOutIcon__DuROc\",\"logOutText\":\"MembershipSelect_logOutText__1Js6Q\",\"membership\":\"MembershipSelect_membership__3vKKK\",\"membershipDisplayName\":\"MembershipSelect_membershipDisplayName__2jWVB\",\"platform_xbox\":\"MembershipSelect_platform_xbox__1EgLN\",\"platform_psn\":\"MembershipSelect_platform_psn__2ASN8\",\"platform_steam\":\"MembershipSelect_platform_steam__3zG5m\",\"platform_blizzard\":\"MembershipSelect_platform_blizzard__1zLDb\",\"platform_stadia\":\"MembershipSelect_platform_stadia__2-ukT\",\"crossSaveDisplayWrapper\":\"MembershipSelect_crossSaveDisplayWrapper__1AETV\",\"crossSaveDisplay\":\"MembershipSelect_crossSaveDisplay__2ZNGP\",\"crossSaveIcon\":\"MembershipSelect_crossSaveIcon__3jhZw\",\"crossSaveMembershipIcon\":\"MembershipSelect_crossSaveMembershipIcon__1HLL-\",\"crossSaveMembershipType_xbox\":\"MembershipSelect_crossSaveMembershipType_xbox__8gPas\",\"crossSaveMembershipType_psn\":\"MembershipSelect_crossSaveMembershipType_psn__P61_o\",\"crossSaveMembershipType_steam\":\"MembershipSelect_crossSaveMembershipType_steam__2roXt\",\"crossSaveMembershipType_blizzard\":\"MembershipSelect_crossSaveMembershipType_blizzard__2qkhP\",\"crossSaveMembershipType_stadia\":\"MembershipSelect_crossSaveMembershipType_stadia__2CnVB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inlinePowerNumber\":\"Power_inlinePowerNumber__28Oqz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buildStamp\":\"BuildStamp_buildStamp__16Chc\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAEM0lEQVRoge2Y229VRRSHv93L4VJ6oU14EKHIi4ARY9BEE5UaNZJqMFGQgDEaX0xINMbwAl4QgprGa+R/IAjBoFgJD0ZFE5sAiShYwVqxobGFtmBbyDltT8csZzeHszv7dPalCjJfstPT2WvPzG/WzFozg8PhcDgcDofD4XA4HI7/P56NQqXUSmAXUA5c/g9HpQwYAXqB34BDwCdAzmTseVbyJqOU+l5dveSUUluUUgSfsBGzoS7eUP0rZIA3gU6gcaoGbQVfC9wEnAKWXS+ChRlAKzArzMBWcMzVnyptwG5gP3BMQktI5YuAlkQNK6U6rUJWPq/UxYtKDQ2VthOb7m6lstkokfC+QFBaqJT6LsR2VN6btFSk5oK9e+CrL2F4GMrKYG49NDXBo6uhvFzbHD0C+/ZCVxfkx2B2FdxxJzz9DFRXT9VCcJZ1AfcAe4C1Bl1rgPenqsSIeNgPCma2vwH798EN87UISQki/MIA3HU3vL4NDh2EnR/B7FlQ36AHJZeD7rOw7Bb4cCfUlUwGTcA3hvJGPyeXB8oPep7XnL7g1gOwbSssWapFTOQ/Sfry9PXpv7Lkqmsgk4Hx8cL34v2TJ/RMeG1rHMH/iANWBcpOeZ63JGiYPEq3tUFNTbFY0L9FWEMDVFVBbR1UVhaLFfJ5WNgIP5+E/v64vfjTUFZvMkwueCQHM2cWi70SKRevBgfkSmZk4PIl6DsftxcZQ5kxPiUXPGcOZLP+tI3JqB/A5hqdYsOkqQtcMH2XXPCtyyGbiy9YPC/rfMECmDcvTg23AysM5WeMzcVpoYhVzbCoEXp7CunHFhkkmR2yLB5fE7cHH4SUy0lqEraCR0PfyPrd+IJOQ4OD2mM2iFgJWL93wrPP6fRVmmAAkKxxFFhp+CoPfGyqzTYttYeskwKfH4C3d8D8G3VUDkbjolY9/f70aXhyHby8yaYbXwA/SdQAbgYeLGH7HrDJdB5OT7Dw2afQ8pbegMjOSTw4qUXfsx2/wlprsVGQQVlOyAVAeltLYfVjUFGhPS0erK0tFj39Ys8CD5UySP942PwIbN8B/X0wMFAIZLK2x0a12PVPTYfYr/1Z2FvKaHrOw/c/AC3vwtAQ9PTojYdE444OHaBefCnN1mQf/YS0Clyayth2DR+fWBeRaG+HVzdr0ZUV8PxGWL8hrjCJI8O+qG7gFz/1HAkVl+AS73jsK7w/zii1YZ1Su3fFrsJnsemirtRjHARLwT8At8UbLsniI3otl0XcmBSQa1g50J+L8lGSKD0cqXtBKk17+0iciCo2DNug9WMajSWgNa2KbKf0vcDhaRBiQ4+/sxqM+qFpStt6+FvglRQ6H5W/gIfjiA3D1sMTP2WjvgVY6h+6x/w68v4TrE/+H/cPH6a2xgxlnp965Dr2HSAbW1ySM7rD4XA4HA6Hw+FwXD8AfwPHcRHtjfBbbgAAAABJRU5ErkJggg==\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"vendorDisplay\":\"VendorDisplay_vendorDisplay__3ggMy\",\"section\":\"VendorDisplay_section__2vxeV\",\"description\":\"VendorDisplay_description__1_SQm\",\"withSeparator\":\"VendorDisplay_withSeparator__3hVVd\",\"vendorList\":\"VendorDisplay_vendorList__3mO3g\",\"vendor\":\"VendorDisplay_vendor__oSDhY\",\"high\":\"VendorDisplay_high__1YiAA\",\"icon\":\"VendorDisplay_icon__3jZn7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__1G6Wy\"};","module.exports = __webpack_public_path__ + \"static/media/example-titan-character-display-with-info-blur.1817ae29.jpg\";","module.exports = __webpack_public_path__ + \"static/media/example-titan-character-display-with-info.92b10b76.png\";"],"sourceRoot":""}