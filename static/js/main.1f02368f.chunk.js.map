{"version":3,"sources":["components/characterDisplay/PowerDetails.module.scss","components/MembershipSelect.module.scss","components/CharacterDisplay.module.scss","App.module.scss","components/characterDisplay/PowerBars.module.scss","components/characterDisplay/CharacterLinks.module.scss","components/LoadingSpinner.module.scss","services/config.ts","services/debug.ts","services/events.ts","services/ga.ts","services/bungie-api.ts","services/bungie-auth.ts","components/characterDisplay/CharacterLinks.tsx","constants.ts","services/masterwork.ts","components/characterDisplay/PowerBar.tsx","components/characterDisplay/PowerBars.tsx","components/characterDisplay/InterPowerBar.tsx","components/characterDisplay/Power.tsx","components/characterDisplay/PowerDetails.tsx","components/characterDisplay/PowerHints.tsx","components/CharacterDisplay.tsx","components/FetchSpinner.tsx","components/BuildStamp.tsx","components/KoFi.tsx","images/icons/Ko-fi_Icon_RGBforDarkBg_sm.png","images/icons/github.svg","images/icons/twitter.svg","services/vendor-engrams.ts","components/SocialLinks.tsx","components/Footer.tsx","components/Header.tsx","components/LoadingChecklist.tsx","components/LoadingSpinner.tsx","components/LazyImage.tsx","images/screenshots/example-titan-character-display-with-info-blur.jpg","images/screenshots/example-titan-character-display-with-info.png","components/LoginPrompt.tsx","components/MembershipSelect.tsx","services/utils.ts","services/api.ts","App.tsx","serviceWorker.ts","index.tsx","components/characterDisplay/InterPowerBar.module.scss","components/LoadingChecklist.module.scss","components/LazyImage.module.scss","components/FetchSpinner.module.scss","components/SocialLinks.module.scss","components/Header.module.scss","components/LoginPrompt.module.scss","components/KoFi.module.scss","components/characterDisplay/PowerHints.module.scss","components/characterDisplay/Power.module.scss","components/BuildStamp.module.scss","components/Footer.module.scss","components/characterDisplay/PowerBar.module.scss"],"names":["module","exports","BUNGIE_OAUTH_TOKEN_URL","process","REACT_APP_BUNGIE_API_KEY","REACT_APP_BUNGIE_OAUTH_CLIENT_ID","REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET","Error","BUNGIE_API_KEY","BUNGIE_OAUTH_CLIENT_ID","BUNGIE_OAUTH_CLIENT_SECRET","EVENTS","eventEmitter","EventEmitter","useEvent","eventName","handler","savedHandler","useRef","useEffect","current","eventListener","eventData","addListener","removeListener","ga","ReactGA","initialize","set","anonymizeIp","pageview","window","location","pathname","search","getCachedManifestDataPromise","cachedManifestData","getManifestPromise","BungieSystemDisabledError","bungieAuthedFetch","config","a","accessToken","getAccessToken","headers","Authorization","url","params","Object","entries","map","key","value","encodeURIComponent","requestConfig","method","credentials","body","JSON","stringify","fetch","response","status","emit","UNAUTHED_FETCH_ERROR","json","messageData","ErrorStatus","toString","MANIFEST_VERSION_KEY","MANIFEST_IDB_KEY","manifestPropertyWhitelist","getCachedManifestData","console","log","get","manifestData","getRemoteManifestData","manifest","version","FETCH_MANIFEST_DATA","jsonWorldContentPaths","en","manifestDataResponse","PARSE_MANIFEST_DATA","keys","forEach","includes","STORE_MANIFEST_DATA","localStorage","setItem","getManifest","Promise","resolve","then","pendingGetCachedManifestData","event","category","action","nonInteraction","GET_MANIFEST","getDestinyManifest","localStorageManifestVersion","getItem","Response","LOAD_MANIFEST_DATA","every","error","undefined","freshManifestData","result","MANIFEST_DATA_READY","catch","err","MANIFEST_FETCH_ERROR","getBasicProfile","membershipType","membershipId","getProfile","components","destinyMembershipId","getFullProfile","setItemLockState","payload","setItemLockStateApi","ACCESS_TOKEN_STORAGE_KEY","ACCESS_TOKEN_EXPIRY_STORAGE_KEY","REFRESH_TOKEN_STORAGE_KEY","REFRESH_TOKEN_EXPIRY_STORAGE_KEY","BUNGIE_MEMBERSHIP_ID_STORAGE_KEY","DESTINY_MEMBERSHIPS_STORAGE_KEY","DESTINY_MEMBERSHIP_STORAGE_KEY","MANUAL_AUTHED_STORAGE_KEY","on","removeItem","clearStorage","hasManuallyAuthed","getAuthUrl","response_type","client_id","client_secret","hasNavigated","redirectToAuth","assign","e","manualStartAuth","autoSelectDestinyMembership","destinyMemberships","length","setSelectedDestinyMembership","crossSavePrimaryMemberships","filter","m","crossSaveOverride","nonCrossSaveMemberships","handleTokenResponse","tokenResponse","data","access_token","tokenDuration","expires_in","expiryTime","Date","now","refreshToken","refresh_token","refreshTokenDuration","refresh_expires_in","refreshExpiryTime","bungieMembershipId","membership_id","getMembershipDataById","destinyMembershipsResponse","authSuccess","selectedMembership","getSelectedDestinyMembership","some","fetchAccessToken","authCode","grant_type","code","cache","redirect","referrer","refreshAccessToken","handleResult","hasValidAccessToken","accessTokenExpiryTime","parseInt","hasValidRefreshToken","refreshTokenExpiryTime","hasValidAuth","accessTokenIsValid","getDestinyMemberships","destinyMembershipsString","parse","message","hasDestinyMemberships","destinyMembershipString","memberships","hasSelectedDestinyMembership","membership","auth","queryParams","URLSearchParams","authResponse","history","replaceState","document","title","origin","isAccessTokenValid","isRefreshTokenValid","logOut","LOG_OUT","link","text","tags","linkText","URL","hostname","href","target","rel","className","classnames","tag","STYLES","RAID_AND_DUNGEON_REPORT_PLATFORMS","1","2","3","4","5","CharacterLinks","characterId","onImageExportClick","useState","isHidden","setHidden","characterLinks","hide","content","onClick","ITEM_SLOT_KINETIC","ITEM_SLOT_ENERGY","ITEM_SLOT_POWER","ITEM_SLOT_HEAD","ITEM_SLOT_GLOVES","ITEM_SLOT_CHEST","ITEM_SLOT_LEGS","ITEM_SLOT_CLASS_ITEM","ITEM_SLOT_BUCKETS","ITEM_BUCKET_SLOTS","reduce","buckets","slot","bucket","ORDERED_ITEM_SLOTS","ITEM_TYPE_ARMOR","ITEM_TYPE_WEAPON","CLASS_NAMES","ITEM_POWER_SOFT_CAP","ITEM_POWER_POWERFUL_CAP","ITEM_POWER_PINNACLE_CAP","isMasterwork","item","state","PowerBar","min","max","avgValue","label","icon","isMasterworked","itemName","isEquipped","range","perc","Math","floor","avgPerc","fullLabelText","locationLabel","getLocationLabel","specificItemLabel","fullLabel","power","belowAverage","slotName","generalLabel","specificLabel","barWrapper","iconWrapper","src","alt","vaultOverlay","postmasterOverlay","masterworkOverlay","barContainer","filledBar","style","width","barLine","left","classItemNames","hunter","titan","warlock","PowerBars","powerBySlot","slots","topItemBySlot","instanceData","primaryStat","overallPower","roundedPower","minItemPower","values","minPowerToDisplay","maxItemPower","maxItemPowerGrouping","maxPowerToDisplay","ceil","powerBars","powerRange","minPower","rangeLine","maxPower","bars","bestItem","chest","classItem","energy","gloves","head","kinetic","legs","itemDefinition","displayProperties","name","character","powerLabel","indicator","InterPowerBar","fillPerc","interPowerBar","bar","fillBar","barOverlay","numberWithSign","Power","children","withSign","inlinePowerNumber","ProgressBar","withThousands","n","replace","progressBar","progressBarFill","progressBarOverlay","PowerDetails","overallPowerExact","artifactData","bonusPower","details","detailsRow","detailsLabel","defailsValue","detailsInlineIcon","iconPath","detailsValue","progressToNextLevel","nextLevelAt","PowerHints","potentialOverallPower","powerRequiredToReachNext","powerRequiredToReachPotential","hints","hint","dropHint","legendaryWorldDropHint","hintExtra","hintExtraInner","worldDropHint","powerfulHint","pinnacleHint","BLACK_RGB","red","green","blue","FALLBACK_EMBLEM_RGB","CharacterDisplay","onDragStart","onDragEnd","onDragDrop","summableArtifactBonusPower","elementRef","domToImage","saveAs","toBlob","blob","useRenderElementImage","renderImage","backgroundColor","ref","isDragging","setIsDragging","isDraggingOver","setIsDraggingOver","characterDisplayWrapper","dragging","dragOver","onDragEnter","onDragOver","stopPropagation","preventDefault","onDragLeave","onDrop","draggable","dragOverlay","CharacterDisplayBodyWrapper","rgbString","emblemColor","characterDisplay","header","emblemBackground","emblemBackgroundPath","withTitle","substr","toUpperCase","headerOverlayBar","FetchSpinner","fetchSpinnerContainer","anchor","spinner","spinnerSmall","gitHead","BuildStamp","buildStamp","Kofi","kofiContainer","height","border","_extends","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","SvgGithub","_ref","svgRef","titleId","props","role","viewBox","id","ForwardRef","SvgTwitter","vendorEngramsData","vendorEngramsRefreshTimer","vendorEngramsRefreshPromise","SocialLinks","socialLinks","fill","Footer","footer","Header","headerContainer","subHeader","author","LoadingChecklist","items","withTopMargin","topMargin","LoadingSpinner","loading","spinnerLarge","spinnerLargeDouble","spinnerSmallDouble","LazyImage","lowResImage","highResImage","highResImageLoaded","setHighResImageLoaded","onHighResImageLoad","useCallback","lazyImage","hidden","overlay","onLoad","DEFAULT_ON_LOGIN_CLICK","LoginPrompt","onLoginClick","loginContainer","exampleImage","ExampleTitanCharacterDisplayImageLowRes","ExampleTitanCharacterDisplayImage","login","loginButton","defaultOnLogout","PLATFORMS","isCrossSavePrimary","isCrossSaveSecondary","CrossSaveDisplay","applicableMembershipTypes","crossSaveDisplayWrapper","crossSaveDisplay","t","s","titleCase","join","crossSaveIcon","crossSaveMembershipIcon","MembershipSelect","onMembershipSelect","api","onLogout","bungieAuth","membershipSelect","crossSaveActive","crossSaveDisabled","membershipDisplayName","displayName","logOutIcon","logOutText","CHARACTER_DISPLAY_ORDER_STORAGE_KEY","CACHED_CHARACTER_DATA_STORAGE_KEY","loadCharacterDisplayOrder","storedValue","saveCharacterDisplayOrder","characterOrder","getAveragePower","sum","getOverallPower","mergeItems","characterItemMap","allItems","characterItems","concat","mapAndFilterItems","itemInstances","itemInstanceId","DestinyInventoryItemDefinition","itemHash","itemType","inventory","bucketTypeHash","equipRequiredLevel","baseCharacterLevel","classType","cannotEquipReason","canEquip","isItemEquippableByCharacter","getItemScore","priorityItems","score","pi","getEquipLabel","equippingBlock","uniqueLabel","getDataForCharacterId","characters","equippedCharacterItems","allCharacterItems","profileInventories","profileProgression","relevantProfileItems","itemsBySlot","groupBy","mapValues","maxBy","uniqueEquippedGroups","forIn","uniqueEquippedGroup","validItemCombinations","otherItems","otherItem","isCombinationValid","combination","nonExotics","push","bestCombination","sumBy","bucketHash","getPowerBySlot","artifactItemComponent","find","artifactInstance","seasonalArtifact","artifactDefinition","powerBonus","powerBonusProgression","potentialPowerBySlot","tempPotentialOverallPower","titleDefinition","DestinyRecordDefinition","titleRecordHash","titleInfo","titlesByGenderHash","genderHash","getCachedCharacterData","setCharacterData","dataString","parsedData","isFetchingCharacterData","getIsFetchingCharacterData","bustProfileCache","characterData","char","v","isLocked","itemId","FETCHING_CHARACTER_DATA_CHANGE","getCharacterData","pendingManifest","destinyMembership","fullProfile","characterEquipment","characterInventories","profileInventory","itemComponents","instances","characterEquipments","manifestResult","characterIds","VENDOR_ENGRAMS_DROP_NO_DATA","VENDOR_ENGRAMS_DROP_LOW","VENDOR_ENGRAMS_DROP_HIGH","VENDOR_DISPLAY_NAMES","devrim","sloane","failsafe","asher","zavala","shaxx","banshee","fanboy","bray","werner","getVendorDisplayName","shorthand","refreshVendorEngramsData","jsonData","updateTimestamp","getVendorEngramsData","setInterval","warn","bungieApi","utils","vendors","doAuth","throttle","setIsAuthed","setAuthError","doGetManifest","setBungieSystemDisabled","setBungieServiceUnavailable","setManifestData","setManifestError","doGetCharacterData","updateCharacterData","newData","newOverallPower","c","newArtifactPower","newTotalPower","dimension1","dimension2","dimension3","doHardRefresh","AppWrapper","top","App","AppInner","disableManualLogin","setDisableManualLogin","isAuthed","hasAuthError","hasManifestError","isBungieSystemDisabled","isBungieServiceUnavailable","setIsFetchingCharacterData","manifestState","setManifestState","hasManifestData","hasLoadedCachedCharacterData","setHasLoadedCachedCharacterData","hasSelectedMembership","useInterval","onSelectMembership","statusAuthError","getDefaultCharacterDisplayOrder","isValidCharacterDisplayOrder","draggingCharacterId","setDraggingCharacterId","characterDisplayOrder","setCharacterDisplayOrder","dropOnCharacterId","dropCharacterId","currentCharacterOrder","swappedOrder","slice","splice","useCharacterOrder","hardRefreshButton","disabled","charactersContainer","loadingChecklistItems","addToChecklist","isComplete","isFailed","Boolean","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1f02368f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"PowerDetails_details__1vqno\",\"detailsRow\":\"PowerDetails_detailsRow__20lfp\",\"detailsLabel\":\"PowerDetails_detailsLabel__2dvVG\",\"detailsInlineIcon\":\"PowerDetails_detailsInlineIcon__1Pqe3\",\"detailsValue\":\"PowerDetails_detailsValue__3daTt\",\"progressBar\":\"PowerDetails_progressBar__2-GA8\",\"progressBarFill\":\"PowerDetails_progressBarFill__sl9C7\",\"progressBarOverlay\":\"PowerDetails_progressBarOverlay__1c66l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"membershipSelect\":\"MembershipSelect_membershipSelect__3GbZz\",\"logOut\":\"MembershipSelect_logOut__VQnEI\",\"logOutIcon\":\"MembershipSelect_logOutIcon__DuROc\",\"logOutText\":\"MembershipSelect_logOutText__1Js6Q\",\"membership\":\"MembershipSelect_membership__3vKKK\",\"membershipDisplayName\":\"MembershipSelect_membershipDisplayName__2jWVB\",\"platform_xbox\":\"MembershipSelect_platform_xbox__1EgLN\",\"platform_psn\":\"MembershipSelect_platform_psn__2ASN8\",\"platform_steam\":\"MembershipSelect_platform_steam__3zG5m\",\"platform_blizzard\":\"MembershipSelect_platform_blizzard__1zLDb\",\"platform_stadia\":\"MembershipSelect_platform_stadia__2-ukT\",\"crossSaveDisplayWrapper\":\"MembershipSelect_crossSaveDisplayWrapper__1AETV\",\"crossSaveDisplay\":\"MembershipSelect_crossSaveDisplay__2ZNGP\",\"crossSaveIcon\":\"MembershipSelect_crossSaveIcon__3jhZw\",\"crossSaveMembershipIcon\":\"MembershipSelect_crossSaveMembershipIcon__1HLL-\",\"crossSaveMembershipType_xbox\":\"MembershipSelect_crossSaveMembershipType_xbox__8gPas\",\"crossSaveMembershipType_psn\":\"MembershipSelect_crossSaveMembershipType_psn__P61_o\",\"crossSaveMembershipType_steam\":\"MembershipSelect_crossSaveMembershipType_steam__2roXt\",\"crossSaveMembershipType_blizzard\":\"MembershipSelect_crossSaveMembershipType_blizzard__2qkhP\",\"crossSaveMembershipType_stadia\":\"MembershipSelect_crossSaveMembershipType_stadia__2CnVB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"characterDisplayWrapper\":\"CharacterDisplay_characterDisplayWrapper__1IXlj\",\"dragOverlay\":\"CharacterDisplay_dragOverlay__2UjDt\",\"dragOver\":\"CharacterDisplay_dragOver__1FVZx\",\"dragging\":\"CharacterDisplay_dragging__37e2z\",\"characterDisplay\":\"CharacterDisplay_characterDisplay__20O9A\",\"header\":\"CharacterDisplay_header__2fx5d\",\"emblemBackground\":\"CharacterDisplay_emblemBackground__2pAjE\",\"emblemSecondarySpecial\":\"CharacterDisplay_emblemSecondarySpecial__15-aM\",\"emblemSecondaryOverlay\":\"CharacterDisplay_emblemSecondaryOverlay__3IJk5\",\"name\":\"CharacterDisplay_name__2j8PA\",\"power\":\"CharacterDisplay_power__1p583\",\"title\":\"CharacterDisplay_title__G1RAx\",\"withTitle\":\"CharacterDisplay_withTitle__2QVYI\",\"headerOverlayBar\":\"CharacterDisplay_headerOverlayBar__2pT62\",\"content\":\"CharacterDisplay_content__263Ab\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__15LM-\",\"AppInner\":\"App_AppInner__2tVOm\",\"top\":\"App_top__3N23O\",\"loadingContainer\":\"App_loadingContainer__1Pa9s\",\"charactersContainer\":\"App_charactersContainer__1RSU_\",\"characters\":\"App_characters__1GhrS\",\"loadingStatus\":\"App_loadingStatus__3QEhd\",\"statusAuthError\":\"App_statusAuthError__3mdh6\",\"header\":\"App_header__2L3DO\",\"hardRefreshButton\":\"App_hardRefreshButton__1ALSQ\",\"disabled\":\"App_disabled__yJtTF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"powerBars\":\"PowerBars_powerBars__33tbb\",\"powerRange\":\"PowerBars_powerRange__te0OD\",\"rangeLine\":\"PowerBars_rangeLine__3sXeP\",\"powerLabel\":\"PowerBars_powerLabel__z9Lm2\",\"indicator\":\"PowerBars_indicator__1UcsC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"characterLinks\":\"CharacterLinks_characterLinks__1TWEL\",\"content\":\"CharacterLinks_content__2v01s\",\"link\":\"CharacterLinks_link__zfRay\",\"linkText\":\"CharacterLinks_linkText__3ZLGm\",\"link_tag_dim\":\"CharacterLinks_link_tag_dim__3F49B\",\"link_tag_braytech\":\"CharacterLinks_link_tag_braytech__34k9M\",\"link_tag_destinysets\":\"CharacterLinks_link_tag_destinysets__13QtP\",\"link_tag_d2checklist\":\"CharacterLinks_link_tag_d2checklist__3rg2p\",\"link_tag_guardianstats\":\"CharacterLinks_link_tag_guardianstats__MnZrG\",\"link_tag_raidreport\":\"CharacterLinks_link_tag_raidreport__2W1oW\",\"link_tag_dungeonreport\":\"CharacterLinks_link_tag_dungeonreport__1rvUg\",\"hide\":\"CharacterLinks_hide__2jGa_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"anchor\":\"LoadingSpinner_anchor__78Pnm\",\"spinner\":\"LoadingSpinner_spinner__32tWn\",\"spin\":\"LoadingSpinner_spin__3FVoi\",\"loading\":\"LoadingSpinner_loading__3Y_gu\",\"spinnerLarge\":\"LoadingSpinner_spinnerLarge__KooL0\",\"spinnerLargeDouble\":\"LoadingSpinner_spinnerLargeDouble__pi4h9\",\"spinnerSmall\":\"LoadingSpinner_spinnerSmall__27lWl\",\"spinnerSmallDouble\":\"LoadingSpinner_spinnerSmallDouble__2FOGm\",\"status\":\"LoadingSpinner_status__3sgCR\"};","export const BUNGIE_OAUTH_AUTHORIZE_URL =\n  \"https://www.bungie.net/en/OAuth/Authorize\";\nexport const BUNGIE_OAUTH_TOKEN_URL =\n  \"https://www.bungie.net/platform/app/oauth/token/\";\n\nconst {\n  REACT_APP_BUNGIE_API_KEY,\n  REACT_APP_BUNGIE_OAUTH_CLIENT_ID,\n  REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET,\n} = process.env;\n\nif (\n  !REACT_APP_BUNGIE_API_KEY ||\n  !REACT_APP_BUNGIE_OAUTH_CLIENT_ID ||\n  !REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET\n) {\n  throw Error(\"React env vars must be provided\");\n}\n\nexport const BUNGIE_API_KEY = REACT_APP_BUNGIE_API_KEY;\nexport const BUNGIE_OAUTH_CLIENT_ID = REACT_APP_BUNGIE_OAUTH_CLIENT_ID;\nexport const BUNGIE_OAUTH_CLIENT_SECRET = REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET;\n","if (process.env.NODE_ENV === \"development\") {\n  console.debug(process.env);\n}\n\nexport const debug = (...messages: any[]) => {\n  if (process.env.NODE_ENV === \"development\") {\n    console.debug(...messages);\n  }\n};\n","import { EventEmitter } from \"events\";\nimport { useEffect, useRef } from \"react\";\n\nexport enum EVENTS {\n  GET_MANIFEST = \"GET_MANIFEST\",\n  LOAD_MANIFEST_DATA = \"LOAD_MANIFEST_DATA\",\n  FETCH_MANIFEST_DATA = \"FETCH_MANIFEST_DATA\",\n  PARSE_MANIFEST_DATA = \"PARSE_MANIFEST_DATA\",\n  STORE_MANIFEST_DATA = \"STORE_MANIFEST_DATA\",\n  MANIFEST_DATA_READY = \"MANIFEST_DATA_READY\",\n  MANIFEST_FETCH_ERROR = \"MANIFEST_FETCH_ERROR\",\n\n  UNAUTHED_FETCH_ERROR = \"UNAUTHED_FETCH_ERROR\",\n\n  FETCHING_CHARACTER_DATA_CHANGE = \"FETCHING_CHARACTER_DATA_CHANGE\",\n\n  LOG_OUT = \"LOG_OUT\",\n}\n\nconst eventEmitter = new EventEmitter();\n\nexport default eventEmitter;\n\ntype EventHandler<T extends any[]> = (args: T) => void;\n\nfunction useEvent<T extends any[]>(\n  eventName: EVENTS,\n  handler: EventHandler<T>\n) {\n  const savedHandler = useRef<EventHandler<T>>();\n\n  useEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n\n  useEffect(() => {\n    const eventListener = (eventData: T) => savedHandler.current?.(eventData);\n    eventEmitter.addListener(eventName, eventListener);\n    return () => {\n      eventEmitter.removeListener(eventName, eventListener);\n    };\n  }, [eventName]);\n}\n\nexport { useEvent };\n","import ReactGA from \"react-ga\";\n\nconst ENABLED = true;\n\ninterface AnalyticsInterface {\n  set: (props: { [key: string]: string | boolean }) => void;\n  initialize: (clientId: string, options: { debug?: boolean }) => void;\n  pageview: (url: string) => void;\n  event: (eventProps: {\n    category: string;\n    action: string;\n    label?: string;\n    nonInteraction?: boolean;\n  }) => void;\n}\n\nlet ga: AnalyticsInterface = ReactGA;\n\nif (ENABLED) {\n  ga.initialize(\"UA-149614480-1\", {\n    // debug: process.env.NODE_ENV === \"development\"\n  });\n\n  // Anonymize IP addresses, yay GDPR\n  ga.set({ anonymizeIp: true });\n  ga.pageview(window.location.pathname + window.location.search);\n} else {\n  // Set mock GA object to disable without removing other code\n  ga = {\n    initialize: () => undefined,\n    pageview: () => undefined,\n    set: (...args: any[]) => undefined,\n    event: (...args: any[]) => undefined,\n  };\n}\n\nexport default ga;\n","import {\n  DestinyInventoryItemDefinition,\n  DestinyManifest,\n  DestinyRecordDefinition,\n  DestinyVendorDefinition,\n  getDestinyManifest,\n  getProfile,\n  setItemLockState as setItemLockStateApi,\n  DestinyItemStateRequest,\n} from \"bungie-api-ts/destiny2\";\nimport { HttpClientConfig } from \"bungie-api-ts/http\";\nimport { get, set } from \"idb-keyval\";\n\nimport { getAccessToken } from \"./bungie-auth\";\nimport { BUNGIE_API_KEY } from \"./config\";\nimport { debug } from \"./debug\";\nimport eventEmitter, { EVENTS } from \"./events\";\nimport ga from \"./ga\";\n\nexport class BungieSystemDisabledError extends Error {\n  constructor() {\n    super(\"Bungie API disabled\");\n  }\n}\n\nexport const bungieAuthedFetch = async (config: HttpClientConfig) => {\n  const accessToken = getAccessToken();\n  const headers: { [key: string]: string } = {\n    \"x-api-key\": BUNGIE_API_KEY,\n  };\n\n  if (accessToken) {\n    headers.Authorization = `Bearer ${accessToken}`;\n  }\n\n  const url = `${config.url}${\n    config.params\n      ? \"?\" +\n        Object.entries(config.params).map(\n          ([key, value]) =>\n            `${encodeURIComponent(key)}=${encodeURIComponent(value as string)}`\n        )\n      : \"\"\n  }`;\n\n  const requestConfig: RequestInit = {\n    method: config.method,\n    headers,\n    credentials: \"include\" as const,\n  };\n\n  if (config.body) {\n    requestConfig.body = JSON.stringify(config.body);\n  }\n\n  const response = await fetch(url, requestConfig);\n  if (response.status !== 200) {\n    if (response.status === 401) {\n      eventEmitter.emit(EVENTS.UNAUTHED_FETCH_ERROR);\n    }\n    if (response.status === 503) {\n      try {\n        const messageData = await response.json();\n        if (messageData && messageData.ErrorStatus === \"SystemDisabled\") {\n          throw new BungieSystemDisabledError();\n        }\n      } catch (e) {\n        /* Do nothing if unrecognised or un-parseable 503 */\n      }\n    }\n    throw Error(response.status.toString());\n  }\n  return await response.json();\n};\n\nconst MANIFEST_VERSION_KEY = \"MANIFEST_VERSION\";\nconst MANIFEST_IDB_KEY = \"MANIFEST_DATA\";\nexport interface ManifestData {\n  [key: string]: any | undefined;\n  DestinyInventoryItemDefinition: {\n    [key: string]: DestinyInventoryItemDefinition | undefined;\n  };\n  DestinyVendorDefinition: {\n    [key: string]: DestinyVendorDefinition | undefined;\n  };\n  DestinyRecordDefinition: {\n    [key: string]: DestinyRecordDefinition | undefined;\n  };\n}\nconst manifestPropertyWhitelist = [\n  \"DestinyInventoryItemDefinition\",\n  \"DestinyVendorDefinition\",\n  \"DestinyRecordDefinition\",\n];\n\nlet getCachedManifestDataPromise: Promise<ManifestData> | undefined;\nconst getCachedManifestData = async () => {\n  if (!getCachedManifestDataPromise) {\n    getCachedManifestDataPromise = (async () => {\n      console.log(\"Loading manifest data from IDB\");\n      const manifestData = await get(MANIFEST_IDB_KEY);\n      console.log(\"Finished loading manifest data from IDB\");\n      return manifestData as ManifestData;\n    })();\n  }\n  return getCachedManifestDataPromise;\n};\n\nconst getRemoteManifestData = async (manifest: DestinyManifest) => {\n  debug(\"getRemoteManifestData\");\n  if (!manifest) {\n    throw Error(\"No manifest!\");\n  }\n  const version = manifest.version;\n  eventEmitter.emit(EVENTS.FETCH_MANIFEST_DATA);\n  const manifestDataResponse = await fetch(\n    `https://www.bungie.net${manifest.jsonWorldContentPaths.en}`\n  );\n  const manifestData: ManifestData = await manifestDataResponse.json();\n  eventEmitter.emit(EVENTS.PARSE_MANIFEST_DATA);\n  Object.keys(manifestData).forEach((key) => {\n    if (!manifestPropertyWhitelist.includes(key)) {\n      delete manifestData[key];\n    }\n  });\n  eventEmitter.emit(EVENTS.STORE_MANIFEST_DATA);\n  set(MANIFEST_IDB_KEY, manifestData); // Do not await\n  localStorage.setItem(MANIFEST_VERSION_KEY, version);\n  return manifestData;\n};\n\nexport type GetManifestResult =\n  | {\n      manifest: ManifestData;\n      error?: null;\n    }\n  | { manifest: null; error: Error };\n\nlet cachedManifestData: ManifestData | undefined;\nlet getManifestPromise: Promise<GetManifestResult> | undefined;\n\nexport const getManifest = async (): Promise<GetManifestResult> => {\n  debug(\"getManifest\");\n  if (!getManifestPromise) {\n    debug(\"getManifest\", \"create new getManifestPromise\");\n    getManifestPromise = Promise.resolve()\n      .then(async () => {\n        // Start loading cached manifest data early\n        const pendingGetCachedManifestData = getCachedManifestData();\n\n        ga.event({\n          category: \"Data\",\n          action: \"Attempt load manifest\",\n          nonInteraction: true,\n        });\n        eventEmitter.emit(EVENTS.GET_MANIFEST);\n        const manifest = await getDestinyManifest(bungieAuthedFetch);\n        const localStorageManifestVersion = localStorage.getItem(\n          MANIFEST_VERSION_KEY\n        );\n        if (\n          manifest &&\n          manifest.Response &&\n          manifest.Response.version === localStorageManifestVersion &&\n          !window.location.search.includes(\"updateManifest\")\n        ) {\n          if (!cachedManifestData) {\n            eventEmitter.emit(EVENTS.LOAD_MANIFEST_DATA);\n            cachedManifestData = await pendingGetCachedManifestData;\n          }\n          if (\n            cachedManifestData &&\n            manifestPropertyWhitelist.every(\n              (key) => cachedManifestData && !!cachedManifestData[key]\n            )\n          ) {\n            return { manifest: cachedManifestData };\n          }\n        }\n        if (\n          manifest &&\n          manifest.ErrorStatus &&\n          manifest.ErrorStatus !== \"Success\"\n        ) {\n          ga.event({\n            category: \"Errors\",\n            action: `Error status \"${manifest.ErrorStatus}\" returned from manifest request`,\n            nonInteraction: true,\n          });\n          if (manifest.ErrorStatus === \"SystemDisabled\") {\n            return {\n              manifest: null,\n              error: new BungieSystemDisabledError(),\n            };\n          }\n          return {\n            manifest: null,\n            error: Error(\n              `Error status \"${manifest.ErrorStatus}\" returned from manifest request`\n            ),\n          };\n        }\n        if (!manifest || !manifest.Response) {\n          throw Error(\"No manifest received!\");\n        }\n        cachedManifestData = undefined;\n        ga.event({\n          category: \"Data\",\n          action: \"Fetch remote manifest\",\n          nonInteraction: true,\n        });\n        const freshManifestData = await getRemoteManifestData(\n          manifest.Response\n        );\n        cachedManifestData = freshManifestData;\n        return { manifest: freshManifestData };\n      })\n      .then((result) => {\n        if (result.manifest && !result.error) {\n          eventEmitter.emit(EVENTS.MANIFEST_DATA_READY);\n          return result;\n        } else {\n          throw result.error;\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n        // Clear manifest promise so it can be re-fetched\n        eventEmitter.emit(EVENTS.MANIFEST_FETCH_ERROR);\n        getManifestPromise = undefined;\n        return { manifest: null, error: err };\n      });\n  }\n  return getManifestPromise;\n};\n\nexport const getBasicProfile = (\n  membershipType: number,\n  membershipId: string\n) => {\n  debug(\"getBasicProfile\");\n  ga.event({\n    category: \"Character Data\",\n    action: \"Fetch minimal profile\",\n    nonInteraction: true,\n  });\n  return getProfile(bungieAuthedFetch, {\n    components: [\n      200, // DestinyComponentType.Characters,\n      205, // DestinyComponentType.CharacterEquipment,\n    ],\n    destinyMembershipId: membershipId,\n    membershipType,\n  });\n};\n\nexport const getFullProfile = (\n  membershipType: number,\n  membershipId: string\n) => {\n  debug(\"getFullProfile\");\n  ga.event({\n    category: \"Character Data\",\n    action: \"Fetch full profile\",\n    nonInteraction: true,\n  });\n  return getProfile(bungieAuthedFetch, {\n    components: [\n      200, // DestinyComponentType.Characters,\n      201, // DestinyComponentType.CharacterInventories,\n      205, // DestinyComponentType.CharacterEquipment,\n      102, // DestinyComponentType.ProfileInventories,\n      300, // DestinyComponentType.ItemInstances,\n      104, // DestinyComponentType.ProfileProgression\n    ],\n    destinyMembershipId: membershipId,\n    membershipType,\n  });\n};\n\nexport const setItemLockState = (payload: DestinyItemStateRequest) => {\n  debug(\"setItemLockState\");\n  return setItemLockStateApi(bungieAuthedFetch, payload);\n};\n","import { getMembershipDataById, UserInfoCard } from \"bungie-api-ts/user\";\nimport { stringify } from \"simple-query-string\";\n\nimport { bungieAuthedFetch } from \"./bungie-api\";\nimport {\n  BUNGIE_OAUTH_AUTHORIZE_URL,\n  BUNGIE_OAUTH_CLIENT_ID,\n  BUNGIE_OAUTH_CLIENT_SECRET,\n  BUNGIE_OAUTH_TOKEN_URL,\n} from \"./config\";\nimport { debug } from \"./debug\";\nimport eventEmitter, { EVENTS } from \"./events\";\nimport ga from \"./ga\";\n\nconst ACCESS_TOKEN_STORAGE_KEY = \"bungieAccessToken\";\nconst ACCESS_TOKEN_EXPIRY_STORAGE_KEY = \"bungieAccessTokenExpiryTime\";\nconst REFRESH_TOKEN_STORAGE_KEY = \"bungieRefreshToken\";\nconst REFRESH_TOKEN_EXPIRY_STORAGE_KEY = \"bungieRefreshTokenExpiryTime\";\nconst BUNGIE_MEMBERSHIP_ID_STORAGE_KEY = \"bungieMembershipId\";\nconst DESTINY_MEMBERSHIPS_STORAGE_KEY = \"destinyMemberships\";\nconst DESTINY_MEMBERSHIP_STORAGE_KEY = \"destinyMembership\";\nconst MANUAL_AUTHED_STORAGE_KEY = \"manualAuthed\";\n\neventEmitter.on(EVENTS.UNAUTHED_FETCH_ERROR, () => {\n  // If we get 401 from an \"authenticated\" request, assume the access token is invalid\n  console.log(\"Clearing invalid access token\");\n  localStorage.removeItem(ACCESS_TOKEN_STORAGE_KEY);\n});\n\nconst clearStorage = () => {\n  debug(\"clearStorage\");\n  localStorage.removeItem(ACCESS_TOKEN_STORAGE_KEY);\n  localStorage.removeItem(ACCESS_TOKEN_EXPIRY_STORAGE_KEY);\n  localStorage.removeItem(REFRESH_TOKEN_STORAGE_KEY);\n  localStorage.removeItem(REFRESH_TOKEN_EXPIRY_STORAGE_KEY);\n  localStorage.removeItem(BUNGIE_MEMBERSHIP_ID_STORAGE_KEY);\n  localStorage.removeItem(DESTINY_MEMBERSHIPS_STORAGE_KEY);\n};\n\nconst clearSelectedMembership = () => {\n  debug(\"clearSelectedMembership\");\n  localStorage.removeItem(DESTINY_MEMBERSHIP_STORAGE_KEY);\n};\n\nexport const hasManuallyAuthed = () => {\n  return !!localStorage.getItem(MANUAL_AUTHED_STORAGE_KEY);\n};\n\nexport const getAuthUrl = () =>\n  `${BUNGIE_OAUTH_AUTHORIZE_URL}?${stringify({\n    response_type: \"code\",\n    client_id: BUNGIE_OAUTH_CLIENT_ID,\n    client_secret: BUNGIE_OAUTH_CLIENT_SECRET,\n  })}`;\n\n// Attempt to prevent infinite navigation events\nlet hasNavigated = false;\nconst redirectToAuth = () => {\n  debug(\"redirectToAuth\");\n  clearStorage();\n  ga.event({\n    category: \"Auth\",\n    action: \"Redirect for Bungie authentication\",\n    nonInteraction: true,\n  });\n  try {\n    if (!hasNavigated) {\n      window.location.assign(getAuthUrl());\n    } else {\n      console.log(\"Prevented re-navigation\");\n      throw Error(\"Re-navigation attempt\");\n    }\n    hasNavigated = true;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const manualStartAuth = () => {\n  debug(\"manualStartAuth\");\n  localStorage.setItem(MANUAL_AUTHED_STORAGE_KEY, \"TRUE\");\n  redirectToAuth();\n};\n\nconst autoSelectDestinyMembership = (destinyMemberships: UserInfoCard[]) => {\n  debug(\"autoSelectMembership\");\n  // If there is only one membership, select it automatically\n  if (destinyMemberships.length === 1) {\n    setSelectedDestinyMembership(destinyMemberships[0]);\n    return destinyMemberships[0];\n  }\n\n  const crossSavePrimaryMemberships = destinyMemberships.filter(\n    (m) => m.crossSaveOverride === m.membershipType\n  );\n  const nonCrossSaveMemberships = destinyMemberships.filter(\n    (m) => m.crossSaveOverride === 0\n  );\n  if (\n    crossSavePrimaryMemberships.length === 1 &&\n    nonCrossSaveMemberships.length === 0\n  ) {\n    setSelectedDestinyMembership(crossSavePrimaryMemberships[0]);\n    return crossSavePrimaryMemberships[0];\n  }\n};\n\nconst handleTokenResponse = async (tokenResponse: Response) => {\n  debug(\"handleTokenResponse\");\n  if (tokenResponse.status === 200) {\n    const data = await tokenResponse.json();\n\n    const accessToken = data.access_token as string;\n    const tokenDuration = data.expires_in as number;\n    const expiryTime = Date.now() + tokenDuration * 1000;\n\n    const refreshToken = data.refresh_token as string;\n    const refreshTokenDuration = data.refresh_expires_in as number;\n    const refreshExpiryTime = Date.now() + refreshTokenDuration * 1000;\n\n    const bungieMembershipId = data.membership_id as string;\n\n    localStorage.setItem(ACCESS_TOKEN_STORAGE_KEY, accessToken);\n    localStorage.setItem(\n      ACCESS_TOKEN_EXPIRY_STORAGE_KEY,\n      expiryTime.toString()\n    );\n    localStorage.setItem(REFRESH_TOKEN_STORAGE_KEY, refreshToken);\n    localStorage.setItem(\n      REFRESH_TOKEN_EXPIRY_STORAGE_KEY,\n      refreshExpiryTime.toString()\n    );\n\n    localStorage.setItem(BUNGIE_MEMBERSHIP_ID_STORAGE_KEY, bungieMembershipId);\n\n    // 254 = all memberships\n    const destinyMembershipsResponse = await getMembershipDataById(\n      bungieAuthedFetch,\n      { membershipId: bungieMembershipId, membershipType: 254 }\n    );\n\n    if (\n      !destinyMembershipsResponse ||\n      !destinyMembershipsResponse.Response ||\n      (destinyMembershipsResponse.ErrorStatus &&\n        destinyMembershipsResponse.ErrorStatus !== \"Success\")\n    ) {\n      ga.event({\n        category: \"Errors\",\n        action: `Destiny membership fetch error, status: ${destinyMembershipsResponse.ErrorStatus}`,\n        nonInteraction: true,\n      });\n      return {\n        authSuccess: false,\n        error: `Status code ${destinyMembershipsResponse.ErrorStatus} from memberships endpoint`,\n      };\n    }\n\n    const destinyMemberships =\n      destinyMembershipsResponse.Response.destinyMemberships;\n    localStorage.setItem(\n      DESTINY_MEMBERSHIPS_STORAGE_KEY,\n      JSON.stringify(destinyMemberships)\n    );\n\n    // If has stored membership and the membership ID is not in the new list\n    // of memberships then clear it\n    const selectedMembership = getSelectedDestinyMembership();\n    if (\n      selectedMembership &&\n      !destinyMemberships.some(\n        (m) => m.membershipId === selectedMembership.membershipId\n      )\n    ) {\n      clearSelectedMembership();\n    }\n\n    autoSelectDestinyMembership(destinyMemberships);\n\n    return { accessToken, authSuccess: true };\n  } else {\n    if (tokenResponse.status !== 200) {\n      ga.event({\n        category: \"Auth\",\n        action: `Status code ${tokenResponse.status} from authentication request`,\n        nonInteraction: true,\n      });\n      return {\n        authSuccess: false,\n        error: `Status code ${tokenResponse.status} from authentication request`,\n      };\n    }\n  }\n};\n\nconst fetchAccessToken = async (authCode: string) => {\n  debug(\"fetchAccessToken\");\n  console.log(\"Fetching Bungie API access token for authentication code\");\n  ga.event({\n    category: \"Auth\",\n    action: \"Oauth token request\",\n    nonInteraction: true,\n  });\n  const tokenResponse = await fetch(BUNGIE_OAUTH_TOKEN_URL, {\n    body: stringify({\n      grant_type: \"authorization_code\",\n      code: authCode,\n      client_id: BUNGIE_OAUTH_CLIENT_ID,\n      client_secret: BUNGIE_OAUTH_CLIENT_SECRET,\n    }),\n    cache: \"no-cache\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    method: \"POST\",\n    redirect: \"follow\",\n    referrer: \"no-referrer\",\n  });\n  return await handleTokenResponse(tokenResponse);\n};\n\nconst refreshAccessToken = async () => {\n  debug(\"refreshAccessToken\");\n  console.log(\"Refreshing Bungie API access token\");\n  const refreshToken = localStorage.getItem(REFRESH_TOKEN_STORAGE_KEY);\n  ga.event({\n    category: \"Auth\",\n    action: \"Oauth token refresh\",\n    nonInteraction: true,\n  });\n  const tokenResponse = await fetch(BUNGIE_OAUTH_TOKEN_URL, {\n    body: stringify({\n      grant_type: \"refresh_token\",\n      refresh_token: refreshToken,\n      client_id: BUNGIE_OAUTH_CLIENT_ID,\n      client_secret: BUNGIE_OAUTH_CLIENT_SECRET,\n    }),\n    cache: \"no-cache\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    method: \"POST\",\n    redirect: \"follow\",\n    referrer: \"no-referrer\",\n  });\n  const handleResult = await handleTokenResponse(tokenResponse);\n  if (!handleResult || !handleResult.authSuccess) {\n    // If refreshing failed, clear all auth details so we don't attempt repeated refreshes\n    clearStorage();\n  }\n  return handleResult;\n};\n\nexport const getAccessToken = () => {\n  debug(\"getAccessToken\");\n  return localStorage.getItem(ACCESS_TOKEN_STORAGE_KEY);\n};\n\nconst hasValidAccessToken = () => {\n  const accessToken = getAccessToken();\n  const accessTokenExpiryTime = parseInt(\n    localStorage.getItem(ACCESS_TOKEN_EXPIRY_STORAGE_KEY) || \"-1\",\n    10\n  );\n\n  return accessToken && accessTokenExpiryTime > Date.now();\n};\n\nconst hasValidRefreshToken = () => {\n  const refreshToken = localStorage.getItem(REFRESH_TOKEN_STORAGE_KEY);\n  const refreshTokenExpiryTime = parseInt(\n    localStorage.getItem(REFRESH_TOKEN_EXPIRY_STORAGE_KEY) || \"-1\",\n    10\n  );\n\n  return refreshToken && refreshTokenExpiryTime > Date.now();\n};\n\nexport const hasValidAuth = () => {\n  const accessTokenIsValid = hasValidAccessToken();\n\n  const bungieMembershipId = localStorage.getItem(\n    BUNGIE_MEMBERSHIP_ID_STORAGE_KEY\n  );\n  const destinyMemberships = getDestinyMemberships();\n  if (!accessTokenIsValid || !bungieMembershipId || !destinyMemberships) {\n    return false;\n  }\n  return true;\n};\n\nexport const getDestinyMemberships = () => {\n  debug(\"getDestinyMemberships\");\n  const destinyMembershipsString = localStorage.getItem(\n    DESTINY_MEMBERSHIPS_STORAGE_KEY\n  );\n  try {\n    if (destinyMembershipsString) {\n      return JSON.parse(destinyMembershipsString) as UserInfoCard[];\n    }\n  } catch (e) {\n    ga.event({\n      category: \"Data\",\n      action: \"Error loading destiny memberships from local storage\",\n      nonInteraction: true,\n    });\n    console.error(`Error loading destiny memberships`, e.message);\n  }\n  return undefined;\n};\n\nexport const hasDestinyMemberships = () => {\n  return !!getDestinyMemberships();\n};\n\nexport const getSelectedDestinyMembership = () => {\n  debug(\"getSelectedDestinyMembership\");\n  const destinyMembershipString = localStorage.getItem(\n    DESTINY_MEMBERSHIP_STORAGE_KEY\n  );\n  try {\n    if (destinyMembershipString) {\n      return JSON.parse(destinyMembershipString) as UserInfoCard;\n    }\n    const memberships = getDestinyMemberships();\n    if (memberships) {\n      const autoSelectedMembership = autoSelectDestinyMembership(memberships);\n      return autoSelectedMembership;\n    }\n  } catch (e) {\n    ga.event({\n      category: \"Data\",\n      action: \"Error loading destiny membership from local storage\",\n      nonInteraction: true,\n    });\n    console.error(\"Error loading destiny membership\", e.message);\n  }\n  return undefined;\n};\n\nexport const hasSelectedDestinyMembership = () => {\n  return !!getSelectedDestinyMembership();\n};\n\nexport const setSelectedDestinyMembership = (membership: UserInfoCard) => {\n  debug(\"setSelectedDestinyMembership\");\n  localStorage.setItem(\n    DESTINY_MEMBERSHIP_STORAGE_KEY,\n    JSON.stringify(membership)\n  );\n};\n\nexport const auth = async (): Promise<boolean> => {\n  debug(\"auth\");\n  const queryParams = new URLSearchParams(window.location.search);\n  const authCode = queryParams.get(\"code\");\n\n  if (authCode && !hasValidAuth()) {\n    console.log(\"Fetching access token with auth code\");\n    const authResponse = await fetchAccessToken(authCode);\n    if (authResponse && authResponse?.authSuccess === false) {\n      console.error(authResponse.error);\n      return false;\n    }\n  }\n\n  if (authCode) {\n    window.history.replaceState(\n      {},\n      document.title,\n      `${window.location.origin}${window.location.pathname}`\n    );\n  }\n\n  if (hasValidAuth() && hasDestinyMemberships()) {\n    return true;\n  }\n\n  const isAccessTokenValid = hasValidAccessToken();\n  const isRefreshTokenValid = hasValidRefreshToken();\n\n  if (!isAccessTokenValid && isRefreshTokenValid) {\n    await refreshAccessToken();\n    return auth();\n  }\n\n  if (hasManuallyAuthed()) {\n    console.log(\n      \"Redirecting to fresh authentication for missing or expired access token, or missing destiny memberships\"\n    );\n    redirectToAuth();\n  }\n\n  return false;\n};\n\nexport const logOut = async () => {\n  debug(\"logOut\");\n  localStorage.removeItem(MANUAL_AUTHED_STORAGE_KEY);\n  clearStorage();\n  eventEmitter.emit(EVENTS.LOG_OUT);\n};\n","import classnames from \"classnames\";\nimport React, { useState } from \"react\";\n\nimport STYLES from \"./CharacterLinks.module.scss\";\n\ninterface CharacterLinksProps {\n  membershipType: number;\n  membershipId: string;\n  characterId: string;\n  onImageExportClick?: () => Promise<any>;\n}\n\ninterface LinkOptions {\n  text?: string;\n  tags?: string[];\n}\n\n/* eslint-disable react/jsx-no-target-blank */\nconst link = (url: string, { text, tags = [] }: LinkOptions = {}) => {\n  const linkText = text || new URL(url).hostname;\n  return (\n    <li>\n      <a\n        href={url}\n        target=\"_blank\"\n        rel=\"noopener\"\n        className={classnames(...tags.map((tag) => STYLES[`link_tag_${tag}`]))}\n      >\n        <span className={STYLES.linkText}>{linkText}</span>\n      </a>\n    </li>\n  );\n};\n\nconst RAID_AND_DUNGEON_REPORT_PLATFORMS: { [key: number]: string } = {\n  1: \"xb\",\n  2: \"ps\",\n  3: \"pc\",\n  4: \"pc\",\n  5: \"stadia\",\n};\n\nexport const CharacterLinks = ({\n  membershipType,\n  membershipId,\n  characterId,\n  onImageExportClick,\n}: CharacterLinksProps) => {\n  const [isHidden, setHidden] = useState(false);\n\n  return (\n    <div\n      className={classnames(STYLES.characterLinks, { [STYLES.hide]: isHidden })}\n    >\n      <div className={STYLES.content}>\n        <ul>\n          {link(\"https://www.destinyitemmanager.com\", {\n            text: \"Destiny Item Manager\",\n            tags: [\"dim\"],\n          })}\n          {link(\n            `https://braytech.org/${membershipType}/${membershipId}/${characterId}/now`,\n            { text: \"Braytech\", tags: [\"braytech\"] }\n          )}\n          {link(\"https://destinysets.com/\", {\n            text: \"Destiny Sets\",\n            tags: [\"destinysets\"],\n          })}\n          {link(\n            `https://www.d2checklist.com/${membershipType}/${membershipId}/milestones`,\n            { text: \"D2 Checklist\", tags: [\"d2checklist\"] }\n          )}\n          {link(`https://guardianstats.com/profile/${membershipId}`, {\n            text: \"Guardianstats\",\n            tags: [\"guardianstats\"],\n          })}\n          {link(\n            `https://raid.report/${RAID_AND_DUNGEON_REPORT_PLATFORMS[membershipType]}/${membershipId}`,\n            { text: \"Raid Report\", tags: [\"raidreport\"] }\n          )}\n          {link(\n            `https://dungeon.report/${RAID_AND_DUNGEON_REPORT_PLATFORMS[membershipType]}/${membershipId}`,\n            { text: \"Dungeon Report\", tags: [\"dungeonreport\"] }\n          )}\n          {onImageExportClick && (\n            <li>\n              <span\n                className={STYLES.link}\n                onClick={async () => {\n                  setHidden(true);\n                  await onImageExportClick();\n                  setHidden(false);\n                }}\n              >\n                <span className={STYLES.linkText}>Export image</span>\n              </span>\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n};\n","export const ITEM_SLOT_KINETIC = \"kinetic\";\nexport const ITEM_SLOT_ENERGY = \"energy\";\nexport const ITEM_SLOT_POWER = \"power\";\nexport const ITEM_SLOT_HEAD = \"head\";\nexport const ITEM_SLOT_GLOVES = \"gloves\";\nexport const ITEM_SLOT_CHEST = \"chest\";\nexport const ITEM_SLOT_LEGS = \"legs\";\nexport const ITEM_SLOT_CLASS_ITEM = \"classItem\";\n\nexport const ITEM_SLOT_BUCKETS = {\n  [ITEM_SLOT_KINETIC]: 1498876634,\n  [ITEM_SLOT_ENERGY]: 2465295065,\n  [ITEM_SLOT_POWER]: 953998645,\n  [ITEM_SLOT_HEAD]: 3448274439,\n  [ITEM_SLOT_GLOVES]: 3551918588,\n  [ITEM_SLOT_CHEST]: 14239492,\n  [ITEM_SLOT_LEGS]: 20886954,\n  [ITEM_SLOT_CLASS_ITEM]: 1585787867,\n};\n\nexport const ITEM_BUCKET_SLOTS = Object.entries(ITEM_SLOT_BUCKETS).reduce(\n  (buckets, [slot, bucket]) => ({ ...buckets, [bucket]: slot }),\n  {} as { [bucket: number]: string }\n);\n\nexport const ITEM_SLOT_GROUP_WEAPONS = [\n  ITEM_SLOT_KINETIC,\n  ITEM_SLOT_ENERGY,\n  ITEM_SLOT_POWER,\n];\nexport const ITEM_SLOT_GROUP_ARMOR = [\n  ITEM_SLOT_HEAD,\n  ITEM_SLOT_GLOVES,\n  ITEM_SLOT_CHEST,\n  ITEM_SLOT_LEGS,\n  ITEM_SLOT_CLASS_ITEM,\n];\n\nexport const ORDERED_ITEM_SLOTS = [\n  ...ITEM_SLOT_GROUP_WEAPONS,\n  ...ITEM_SLOT_GROUP_ARMOR,\n];\n\nexport const ITEM_TIER_TYPE_EXOTIC = 6;\n\nexport const ITEM_TYPE_ARMOR = 2;\nexport const ITEM_TYPE_WEAPON = 3;\n\nexport const CLASS_TYPE_ALL = 3;\n\nexport const CLASS_TITAN = \"titan\";\nexport const CLASS_HUNTER = \"hunter\";\nexport const CLASS_WARLOCK = \"warlock\";\n\nexport const CLASS_NAMES = [CLASS_TITAN, CLASS_HUNTER, CLASS_WARLOCK];\n\nexport const ITEM_TYPE_ARTIFACT = 28;\nexport const ARTIFACT_INVENTORY_BUCKET_HASH = 1506418338;\n\nexport const POWER_SYMBOL = \"\";\nexport const BUNGIE_POWER_COLOR = \"#DDCB59\";\nexport const BUNGIE_COLOUR_SOLAR = \"ef621d\";\nexport const BUNGIE_COLOUR_ARC = \"7abce9\";\nexport const BUNGIE_COLOUR_VOID = \"b085df\";\n\nexport const ITEM_POWER_SOFT_CAP = 1200;\nexport const ITEM_POWER_POWERFUL_CAP = 1250;\nexport const ITEM_POWER_PINNACLE_CAP = 1260;\n\n// How much above your current power do pinnacles drop when above the powerful cap\nexport const ITEM_POWER_PINNACLE_DROP_OFFSET = 2;\n","import { SelectedJoinedItemDefinition } from \"../types\";\n\n// From destiny-api-ts ItemState.Masterwork\nconst ITEM_STATE_MASTERWORK = 4;\n\nexport const isMasterwork = (item: SelectedJoinedItemDefinition) => {\n  // tslint:disable-next-line:no-bitwise\n  if (item.state && item.state & ITEM_STATE_MASTERWORK) {\n    return true;\n  }\n\n  return false;\n};\n","import { ItemLocation } from \"bungie-api-ts/destiny2\";\nimport classnames from \"classnames\";\nimport React from \"react\";\n\nimport STYLES from \"./PowerBar.module.scss\";\n\ninterface BarProps {\n  min: number;\n  max: number;\n  value: number;\n  avgValue: number;\n  label: string;\n  icon?: string;\n  isMasterworked?: boolean;\n  itemName?: string;\n  location?: ItemLocation;\n  isEquipped?: boolean;\n}\n\nconst getLocationLabel = (location?: ItemLocation, isEquipped?: boolean) => {\n  switch (location) {\n    case 0: // ItemLocation.Unknown:\n      return undefined;\n    case 1: // ItemLocation.Inventory:\n      if (isEquipped) {\n        return \"Equipped\";\n      }\n      return \"Inventory\";\n    case 2: // ItemLocation.Vault:\n      return \"Vault\";\n    case 3: //ItemLocation.Vendor:\n      return \"Vendor\";\n    case 4: //ItemLocation.Postmaster:\n      return \"Postmaster\";\n    default:\n      return undefined;\n  }\n};\n\nexport const PowerBar = ({\n  min,\n  max,\n  value,\n  avgValue,\n  label,\n  icon,\n  isMasterworked,\n  itemName,\n  location,\n  isEquipped,\n}: BarProps) => {\n  const range = max - min;\n  const perc = Math.floor(((value - min) / range) * 1000) / 10;\n  const avgPerc = Math.floor(((avgValue - min) / range) * 1000) / 10;\n  // const plusTwoPerc = Math.floor(((avgValue + 2 - min) / range) * 1000) / 10\n  // const plusFivePerc = Math.floor(((avgValue + 5 - min) / range) * 1000) / 10\n  const fullLabelText = `${value} ${label}`;\n\n  const locationLabel = getLocationLabel(location, isEquipped);\n  const specificItemLabel = `${itemName}${\n    locationLabel ? ` (${locationLabel})` : \"\"\n  }`;\n  const fullLabel = (\n    <span className={STYLES.label}>\n      <span\n        className={classnames(STYLES.power, {\n          [STYLES.max]: value >= max,\n          [STYLES.belowAverage]: value < avgValue,\n        })}\n      >\n        {value}\n      </span>\n      <span className={STYLES.slotName}>\n        <span className={STYLES.generalLabel}>{label}</span>\n        <span className={STYLES.specificLabel}>{specificItemLabel}</span>\n      </span>\n    </span>\n  );\n  return (\n    <div className={STYLES.barWrapper}>\n      <div className={STYLES.iconWrapper} title={specificItemLabel}>\n        {icon ? (\n          <img\n            className={STYLES.icon}\n            src={`https://www.bungie.net${icon}`}\n            alt={fullLabelText}\n          />\n        ) : null}\n        {icon && location === 2 /*ItemLocation.Vault*/ ? (\n          <div className={STYLES.vaultOverlay} />\n        ) : null}\n        {icon && location === 4 /*ItemLocation.Postmaster*/ ? (\n          <div className={STYLES.postmasterOverlay} />\n        ) : null}\n        {icon && isMasterworked ? (\n          <div className={STYLES.masterworkOverlay} />\n        ) : null}\n      </div>\n      <div className={STYLES.barContainer}>\n        <div className={STYLES.filledBar} style={{ width: `${perc}%` }}>\n          {fullLabel}\n        </div>\n        <div className={STYLES.barLine} style={{ left: `${avgPerc}%` }} />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport { ITEM_POWER_POWERFUL_CAP, ORDERED_ITEM_SLOTS } from \"../../constants\";\nimport { isMasterwork } from \"../../services/masterwork\";\nimport { PowerBarsCharacterData, PowerBySlot } from \"../../types\";\nimport { PowerBar } from \"./PowerBar\";\nimport STYLES from \"./PowerBars.module.scss\";\n\nconst classItemNames: { [key: string]: string } = {\n  hunter: \"Hunter Cloak\",\n  titan: \"Titan Mark\",\n  warlock: \"Warlock Bond\",\n};\nconst slotFullNames = (className: string): { [key: string]: string } => ({\n  chest: \"Chest Armor\",\n  classItem: classItemNames[className],\n  energy: \"Energy Weapon\",\n  gloves: \"Gauntlets\",\n  head: \"Helmet\",\n  kinetic: \"Kinetic Weapon\",\n  legs: \"Leg Armor\",\n  power: \"Power Weapon\",\n});\n\ntype PowerBarsProps = PowerBarsCharacterData;\n\nexport const PowerBars = (data: PowerBarsProps) => {\n  // Get power by slot, using overall power if slot data does not exist\n  const powerBySlot = ORDERED_ITEM_SLOTS.reduce(\n    (slots, slotName) => ({\n      ...slots,\n      [slotName]:\n        data.topItemBySlot?.[slotName]?.instanceData?.primaryStat?.value ||\n        data.overallPower,\n    }),\n    {} as PowerBySlot\n  );\n\n  const roundedPower = Math.floor(data.overallPower);\n  // Round to 50s\n  const minItemPower = Math.min(...Object.values(powerBySlot));\n  const minPowerToDisplay = Math.max(\n    Math.floor(minItemPower / 50) * 50 - 50,\n    0\n  );\n  const maxItemPower = Math.max(...Object.values(powerBySlot));\n  const maxItemPowerGrouping =\n    ITEM_POWER_POWERFUL_CAP - maxItemPower < 50 ? 10 : 50;\n  const maxPowerToDisplay =\n    Math.ceil(maxItemPower / maxItemPowerGrouping) * maxItemPowerGrouping;\n\n  const range = maxPowerToDisplay - minPowerToDisplay;\n  const perc =\n    Math.floor(((roundedPower - minPowerToDisplay) / range) * 1000) / 10;\n\n  return (\n    <div className={STYLES.powerBars}>\n      <div className={STYLES.powerRange}>\n        <div className={STYLES.minPower}>{minPowerToDisplay}</div>\n        <div className={STYLES.rangeLine} />\n        <div className={STYLES.maxPower}>{maxPowerToDisplay}</div>\n      </div>\n      <div className={STYLES.bars}>\n        {Object.entries(powerBySlot).map(([slotName, power]) => {\n          const bestItem = data.topItemBySlot?.[slotName];\n          return (\n            <PowerBar\n              key={`${data.character.characterId}_${slotName}`}\n              min={minPowerToDisplay}\n              max={maxPowerToDisplay}\n              value={power}\n              avgValue={roundedPower}\n              label={slotFullNames(data.className)[slotName] || slotName}\n              icon={bestItem?.itemDefinition?.displayProperties.icon}\n              isMasterworked={bestItem && isMasterwork(bestItem)}\n              itemName={bestItem?.itemDefinition?.displayProperties.name}\n              location={bestItem?.location}\n              isEquipped={bestItem?.instanceData?.isEquipped}\n            />\n          );\n        })}\n      </div>\n      <div className={STYLES.powerLabel}>\n        <div className={STYLES.indicator} style={{ left: `${perc}%` }}>\n          {roundedPower}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport { ITEM_POWER_PINNACLE_CAP } from \"../../constants\";\nimport STYLES from \"./InterPowerBar.module.scss\";\n\ninterface InterPowerBarProps {\n  value: number;\n}\n\nexport const InterPowerBar = ({ value }: InterPowerBarProps) => {\n  let min = Math.floor(value);\n  let max = value === min ? value + 1 : Math.ceil(value);\n\n  if (min === ITEM_POWER_PINNACLE_CAP && value === min) {\n    max = min;\n    min = min - 1;\n  }\n\n  const fillPerc = Math.floor(value * 100 - min * 100);\n\n  return (\n    <div className={STYLES.interPowerBar}>\n      <div className={STYLES.min}>{min}</div>\n      <div className={STYLES.bar}>\n        <div className={STYLES.fillBar} style={{ width: `${fillPerc}%` }} />\n        <div className={STYLES.barOverlay} />\n      </div>\n      <div className={STYLES.max}>{max}</div>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport STYLES from \"./Power.module.scss\";\n\nconst numberWithSign = (value: number) => {\n  if (value >= 0) {\n    return `+${value}`;\n  }\n  return `${value}`;\n};\n\ninterface PowerProps {\n  children: number;\n  withSign?: boolean;\n}\nexport const Power = ({ children: value, withSign = false }: PowerProps) => (\n  <span className={STYLES.inlinePowerNumber}>\n    {withSign ? numberWithSign(value) : value}\n  </span>\n);\n","import React from \"react\";\n\nimport STYLES from \"./PowerDetails.module.scss\";\n\nimport { InterPowerBar } from \"./InterPowerBar\";\nimport { Power } from \"./Power\";\n\nconst ProgressBar = ({ value, max }: { value: number; max: number }) => {\n  if (value === undefined || max === undefined) {\n    return null;\n  }\n  const perc = Math.floor((value / max) * 1000) / 10;\n  const withThousands = (n: number) =>\n    n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return (\n    <div\n      className={STYLES.progressBar}\n      title={`${withThousands(value)} / ${withThousands(max)}`}\n    >\n      <div className={STYLES.progressBarFill} style={{ width: `${perc}%` }} />\n      <div className={STYLES.progressBarOverlay} />\n    </div>\n  );\n};\n\ninterface PowerDetailsProps {\n  overallPowerExact: number;\n  overallPower: number;\n  artifactData?: {\n    name: string;\n    iconPath: string;\n    bonusPower: number;\n    progressToNextLevel: number;\n    nextLevelAt: number;\n  };\n}\n\nexport const PowerDetails = ({\n  overallPowerExact,\n  overallPower,\n  artifactData,\n}: PowerDetailsProps) => {\n  const roundedPower = Math.floor(overallPower);\n\n  if (!artifactData || artifactData.bonusPower === 0) {\n    return (\n      <div className={STYLES.details}>\n        <div className={STYLES.detailsRow}>\n          <InterPowerBar value={overallPowerExact} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={STYLES.details}>\n      <div className={STYLES.detailsRow}>\n        <div className={STYLES.detailsLabel}>\n          Maximum equippable gear power:\n        </div>\n        <div className={STYLES.defailsValue}>\n          <Power>{roundedPower}</Power>\n        </div>\n      </div>\n      <div className={STYLES.detailsRow}>\n        <InterPowerBar value={overallPowerExact} />\n      </div>\n      {artifactData ? (\n        <>\n          <div className={STYLES.detailsRow}>\n            <div className={STYLES.detailsLabel}>\n              <img\n                className={STYLES.detailsInlineIcon}\n                src={`https://www.bungie.net${artifactData.iconPath}`}\n                alt=\"\"\n              />\n              {artifactData.name} bonus power:\n            </div>\n            <div className={STYLES.detailsValue}>\n              <Power withSign>{artifactData.bonusPower}</Power>\n            </div>\n          </div>\n          <div className={STYLES.detailsRow}>\n            <ProgressBar\n              value={artifactData.progressToNextLevel}\n              max={artifactData.nextLevelAt}\n            />\n          </div>\n        </>\n      ) : null}\n    </div>\n  );\n};\n","import classnames from \"classnames\";\nimport React from \"react\";\n\nimport {\n  ITEM_POWER_PINNACLE_CAP,\n  ITEM_POWER_PINNACLE_DROP_OFFSET,\n  ITEM_POWER_POWERFUL_CAP,\n  ITEM_POWER_SOFT_CAP,\n} from \"../../constants\";\nimport { Power } from \"./Power\";\n\nimport STYLES from \"./PowerHints.module.scss\";\n\ninterface PowerHintsProps {\n  overallPowerExact: number;\n  overallPower: number;\n  potentialOverallPower?: number;\n}\n\nexport const PowerHints = ({\n  overallPowerExact,\n  overallPower,\n  potentialOverallPower,\n}: PowerHintsProps) => {\n  potentialOverallPower =\n    potentialOverallPower || Math.min(ITEM_POWER_SOFT_CAP, overallPower);\n\n  const nextPower =\n    overallPowerExact === overallPower\n      ? overallPower + 1\n      : Math.ceil(overallPowerExact);\n\n  const powerRequiredToReachNext = (nextPower - overallPowerExact) * 8;\n  const powerRequiredToReachPotential =\n    (potentialOverallPower - overallPowerExact) * 8;\n\n  return (\n    <div className={STYLES.hints}>\n      {potentialOverallPower &&\n        potentialOverallPower > overallPower &&\n        overallPower > ITEM_POWER_POWERFUL_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.legendaryWorldDropHint\n            )}\n          >\n            <span>\n              Powerful rewards can increase your overall gear power to{\" \"}\n              <Power>{potentialOverallPower}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  Powerful rewards from milestones or prime engrams can drop\n                  with a power level up to <Power>{overallPower}</Power> for\n                  this character.\n                </div>\n                <div>\n                  Replacing items which are below your current overall power can\n                  increase your power to a higher average.\n                </div>\n                {overallPower < ITEM_POWER_PINNACLE_CAP && (\n                  <div>\n                    Raising your overall power before collecting your next\n                    pinnacle reward will give you the most efficient progress.\n                  </div>\n                )}\n                {powerRequiredToReachNext &&\n                  powerRequiredToReachNext !==\n                    powerRequiredToReachPotential && (\n                    <div>\n                      You need an extra{\" \"}\n                      <Power>{powerRequiredToReachNext}</Power> total power on\n                      your items to reach an overall power of{\" \"}\n                      <Power>{Math.floor(overallPower + 1)}</Power>.\n                    </div>\n                  )}\n                {powerRequiredToReachPotential && (\n                  <div>\n                    You need an extra{\" \"}\n                    <Power>{powerRequiredToReachPotential}</Power> total power\n                    on your items to reach an overall power of{\" \"}\n                    <Power>{potentialOverallPower}</Power>.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n      {potentialOverallPower > overallPower &&\n        overallPower <= ITEM_POWER_POWERFUL_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.worldDropHint\n            )}\n          >\n            <span>\n              World drops can increase your overall gear power to{\" \"}\n              <Power>{potentialOverallPower}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  World drops (from strikes, public events,{\" \"}\n                  {overallPower <= ITEM_POWER_POWERFUL_CAP && \"vendors, \"}\n                  non-powerful rewards) can drop with a power level{\" \"}\n                  {overallPower >= ITEM_POWER_SOFT_CAP ? (\n                    <>\n                      from <Power>{overallPower - 3}</Power> to{\" \"}\n                      <Power>{overallPower}</Power>\n                    </>\n                  ) : (\n                    <>\n                      above your current power, increasing your power\n                      incrementally up to <Power>{potentialOverallPower}</Power>\n                    </>\n                  )}{\" \"}\n                  for this character.\n                </div>\n                <div>\n                  Replacing items which are below your current overall power can\n                  increase your power to a higher average.\n                </div>\n                {powerRequiredToReachNext &&\n                  powerRequiredToReachNext !==\n                    powerRequiredToReachPotential && (\n                    <div>\n                      You need an extra{\" \"}\n                      <Power>{powerRequiredToReachNext}</Power> total power on\n                      your items to reach an overall power of{\" \"}\n                      <Power>{Math.floor(overallPower + 1)}</Power>.\n                    </div>\n                  )}\n                {powerRequiredToReachPotential && (\n                  <div>\n                    You need an extra{\" \"}\n                    <Power>{powerRequiredToReachPotential}</Power> total power\n                    on your items to reach an overall power of{\" \"}\n                    <Power>{potentialOverallPower}</Power>.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n      {potentialOverallPower === overallPower &&\n        overallPower >= ITEM_POWER_SOFT_CAP &&\n        overallPower < ITEM_POWER_POWERFUL_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.powerfulHint\n            )}\n          >\n            <span>\n              Powerful rewards can increase your overall gear power up to the\n              powerful cap of <Power>{ITEM_POWER_POWERFUL_CAP}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  Powerful and pinnacle reward sources (Weekly challenges, Year\n                  3 raids) will give you items above your overall gear power,\n                  with powerful rewards capped at{\" \"}\n                  <Power>{ITEM_POWER_POWERFUL_CAP}</Power>.\n                </div>\n                {powerRequiredToReachNext && (\n                  <div>\n                    You need an extra <Power>{powerRequiredToReachNext}</Power>{\" \"}\n                    total power on your items to reach an overall power of{\" \"}\n                    <Power>{Math.floor(overallPower + 1)}</Power>.\n                  </div>\n                )}\n                <div>\n                  After getting a powerful reward, check back here to see if\n                  it's beneficial to catch up the rest of your slots with world\n                  drops before getting another!\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n      {potentialOverallPower === overallPower &&\n        overallPower >= ITEM_POWER_POWERFUL_CAP &&\n        overallPower < ITEM_POWER_PINNACLE_CAP && (\n          <div\n            className={classnames(\n              STYLES.hint,\n              STYLES.dropHint,\n              STYLES.pinnacleHint\n            )}\n          >\n            <span>\n              Pinnacle rewards can increase your overall gear power up to the\n              pinnacle cap of <Power>{ITEM_POWER_PINNACLE_CAP}</Power>\n            </span>\n            <div className={STYLES.hintExtra}>\n              <div className={STYLES.hintExtraInner}>\n                <div>\n                  Pinnacle reward sources (Some weekly challenges, Year 4 raids)\n                  will give you items at{\" \"}\n                  <Power>\n                    {Math.min(\n                      overallPower + ITEM_POWER_PINNACLE_DROP_OFFSET,\n                      ITEM_POWER_PINNACLE_CAP\n                    )}\n                  </Power>{\" \"}\n                  power.\n                </div>\n                {powerRequiredToReachNext && (\n                  <div>\n                    You need an extra <Power>{powerRequiredToReachNext}</Power>{\" \"}\n                    total power on your items to reach an overall power of{\" \"}\n                    <Power>{Math.floor(overallPower + 1)}</Power>.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n    </div>\n  );\n};\n","import classnames from \"classnames\";\nimport React, { useRef, useState } from \"react\";\n\nimport { PowerBarsCharacterData } from \"../types\";\nimport STYLES from \"./CharacterDisplay.module.scss\";\nimport { CharacterLinks } from \"./characterDisplay/CharacterLinks\";\nimport { PowerBars } from \"./characterDisplay/PowerBars\";\nimport { PowerDetails } from \"./characterDisplay/PowerDetails\";\nimport { PowerHints } from \"./characterDisplay/PowerHints\";\n\nconst titleCase = (text: string) =>\n  text.substr(0, 1).toUpperCase() + text.substr(1);\n\nconst BLACK_RGB = { red: 0, green: 0, blue: 0 };\nconst FALLBACK_EMBLEM_RGB = { red: 0, green: 4, blue: 15 };\nconst FALLBACK_EMBLEM_PATH =\n  \"/common/destiny2_content/icons/9dc4f3283ee9f9fc3d3499e9f9f1756c.jpg\";\nconst rgbString = ({\n  red,\n  green,\n  blue,\n}: {\n  red: number;\n  green: number;\n  blue: number;\n} = BLACK_RGB) => `rgb(${red},${green},${blue})`;\n\nconst useRenderElementImage = (className: string) => {\n  const elementRef = useRef(null);\n  const renderElementImage = async () => {\n    if (elementRef.current) {\n      try {\n        const domToImage = (await import(\n          /* webpackChunkName: \"dom-to-image\" */ \"dom-to-image\"\n        )) as any;\n        const { saveAs } = await import(\n          /* webpackChunkName: \"file-saver\" */ \"file-saver\"\n        );\n        const blob = await domToImage.toBlob(elementRef.current);\n        saveAs(blob, `destiny-power-bars-${className}.png`);\n      } catch (e) {\n        console.error(\"Error capturing image of character display\", e);\n      }\n    }\n  };\n  return [elementRef, renderElementImage] as const;\n};\n\nexport const CharacterDisplayBodyWrapper = (\n  backgroundColor: string,\n  children: JSX.Element,\n  ref?: React.MutableRefObject<null>,\n  onDragStart?: () => void,\n  onDragEnd?: () => void,\n  onDragDrop?: () => void\n) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const [isDraggingOver, setIsDraggingOver] = useState(0);\n\n  return (\n    <div\n      className={classnames(STYLES.characterDisplayWrapper, {\n        [STYLES.dragging]: isDragging,\n        [STYLES.dragOver]: isDraggingOver > 0,\n      })}\n      style={{ backgroundColor }}\n      onDragStart={() => {\n        setIsDragging(true);\n        onDragStart?.();\n      }}\n      onDragEnd={() => {\n        setIsDragging(false);\n        onDragEnd?.();\n      }}\n      onDragEnter={() => setIsDraggingOver(isDraggingOver + 1)}\n      onDragOver={(e) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }}\n      onDragLeave={() => setIsDraggingOver(Math.max(isDraggingOver - 1, 0))}\n      onDrop={() => {\n        setIsDraggingOver(0);\n        onDragDrop?.();\n      }}\n      draggable={true}\n      ref={ref}\n    >\n      {children}\n      <div className={STYLES.dragOverlay}>\n        <span>Drag to reorder</span>\n      </div>\n    </div>\n  );\n};\n\ninterface CharacterDisplayProps {\n  data: PowerBarsCharacterData;\n  onDragStart?: () => void;\n  onDragEnd?: () => void;\n  onDragDrop?: () => void;\n}\n\nconst CharacterDisplay = ({\n  data,\n  onDragStart,\n  onDragEnd,\n  onDragDrop,\n}: CharacterDisplayProps) => {\n  const roundedPower = Math.floor(data.overallPower);\n\n  const summableArtifactBonusPower = data.artifactData\n    ? data.artifactData.bonusPower\n    : 0;\n\n  const [elementRef, renderImage] = useRenderElementImage(data.className);\n\n  return CharacterDisplayBodyWrapper(\n    rgbString(data.character.emblemColor || FALLBACK_EMBLEM_RGB),\n    <div className={STYLES.characterDisplay}>\n      <div className={STYLES.header}>\n        <img\n          className={STYLES.emblemBackground}\n          src={`https://www.bungie.net${\n            data.character.emblemBackgroundPath || FALLBACK_EMBLEM_PATH\n          }`}\n          alt=\"\"\n        />\n        <div\n          className={classnames(STYLES.name, {\n            [STYLES.withTitle]: !!data.title,\n          })}\n        >\n          {titleCase(data.className)}\n        </div>\n        {data.title && <div className={STYLES.title}>{data.title}</div>}\n        <div className={STYLES.power}>\n          {roundedPower + summableArtifactBonusPower}\n        </div>\n        <div className={STYLES.headerOverlayBar} />\n      </div>\n\n      <div className={STYLES.content}>\n        <PowerDetails {...data} />\n        <PowerBars {...data} />\n        <PowerHints {...data} />\n      </div>\n\n      <CharacterLinks\n        membershipType={data.character.membershipType}\n        membershipId={data.character.membershipId}\n        characterId={data.character.characterId}\n        onImageExportClick={renderImage}\n      />\n    </div>,\n    elementRef,\n    onDragStart,\n    onDragEnd,\n    onDragDrop\n  );\n};\n\nexport default CharacterDisplay;\n","import React from \"react\";\n\nimport STYLES from \"./FetchSpinner.module.scss\";\n\nconst FetchSpinner = () => (\n  <div className={STYLES.fetchSpinnerContainer}>\n    <div className={STYLES.anchor}>\n      <div className={STYLES.spinner} />\n      <div className={STYLES.spinnerSmall} />\n    </div>\n  </div>\n);\n\nexport default FetchSpinner;\n","import preval from \"preval.macro\";\nimport React from \"react\";\n\nimport STYLES from \"./BuildStamp.module.scss\";\n\nconst gitHead = (process.env.REACT_APP_NPM_PACKAGE_GITHEAD || \"\").substr(0, 6);\n\nconst buildTimestamp = preval`module.exports = new Date().toISOString();`;\n\nexport const BuildStamp = () => (\n  <div className={STYLES.buildStamp}>\n    {gitHead} {buildTimestamp}\n  </div>\n);\n","import React from \"react\";\n\nimport kofiIcon from \"../images/icons/Ko-fi_Icon_RGBforDarkBg_sm.png\";\n\nimport STYLES from \"./KoFi.module.scss\";\n\nexport const Kofi = () => {\n  return (\n    <div className={STYLES.kofiContainer}>\n      <a\n        className={STYLES.link}\n        href=\"https://ko-fi.com/tomcorke\"\n        /* eslint-disable-next-line react/jsx-no-target-blank */\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        <img\n          height=\"36\"\n          style={{ border: \"0px\", height: \"36px\" }}\n          src={kofiIcon}\n          alt=\"Buy Me a Coffee at ko-fi.com\"\n        />\n        <span>Buy me a coffee</span>\n      </a>\n    </div>\n  );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAEM0lEQVRoge2Y229VRRSHv93L4VJ6oU14EKHIi4ARY9BEE5UaNZJqMFGQgDEaX0xINMbwAl4QgprGa+R/IAjBoFgJD0ZFE5sAiShYwVqxobGFtmBbyDltT8csZzeHszv7dPalCjJfstPT2WvPzG/WzFozg8PhcDgcDofD4XA4HI7/P56NQqXUSmAXUA5c/g9HpQwYAXqB34BDwCdAzmTseVbyJqOU+l5dveSUUluUUgSfsBGzoS7eUP0rZIA3gU6gcaoGbQVfC9wEnAKWXS+ChRlAKzArzMBWcMzVnyptwG5gP3BMQktI5YuAlkQNK6U6rUJWPq/UxYtKDQ2VthOb7m6lstkokfC+QFBaqJT6LsR2VN6btFSk5oK9e+CrL2F4GMrKYG49NDXBo6uhvFzbHD0C+/ZCVxfkx2B2FdxxJzz9DFRXT9VCcJZ1AfcAe4C1Bl1rgPenqsSIeNgPCma2vwH798EN87UISQki/MIA3HU3vL4NDh2EnR/B7FlQ36AHJZeD7rOw7Bb4cCfUlUwGTcA3hvJGPyeXB8oPep7XnL7g1gOwbSssWapFTOQ/Sfry9PXpv7Lkqmsgk4Hx8cL34v2TJ/RMeG1rHMH/iANWBcpOeZ63JGiYPEq3tUFNTbFY0L9FWEMDVFVBbR1UVhaLFfJ5WNgIP5+E/v64vfjTUFZvMkwueCQHM2cWi70SKRevBgfkSmZk4PIl6DsftxcZQ5kxPiUXPGcOZLP+tI3JqB/A5hqdYsOkqQtcMH2XXPCtyyGbiy9YPC/rfMECmDcvTg23AysM5WeMzcVpoYhVzbCoEXp7CunHFhkkmR2yLB5fE7cHH4SUy0lqEraCR0PfyPrd+IJOQ4OD2mM2iFgJWL93wrPP6fRVmmAAkKxxFFhp+CoPfGyqzTYttYeskwKfH4C3d8D8G3VUDkbjolY9/f70aXhyHby8yaYbXwA/SdQAbgYeLGH7HrDJdB5OT7Dw2afQ8pbegMjOSTw4qUXfsx2/wlprsVGQQVlOyAVAeltLYfVjUFGhPS0erK0tFj39Ys8CD5UySP942PwIbN8B/X0wMFAIZLK2x0a12PVPTYfYr/1Z2FvKaHrOw/c/AC3vwtAQ9PTojYdE444OHaBefCnN1mQf/YS0Clyayth2DR+fWBeRaG+HVzdr0ZUV8PxGWL8hrjCJI8O+qG7gFz/1HAkVl+AS73jsK7w/zii1YZ1Su3fFrsJnsemirtRjHARLwT8At8UbLsniI3otl0XcmBSQa1g50J+L8lGSKD0cqXtBKk17+0iciCo2DNug9WMajSWgNa2KbKf0vcDhaRBiQ4+/sxqM+qFpStt6+FvglRQ6H5W/gIfjiA3D1sMTP2WjvgVY6h+6x/w68v4TrE/+H/cPH6a2xgxlnp965Dr2HSAbW1ySM7rD4XA4HA6Hw+FwXD8AfwPHcRHtjfBbbgAAAABJRU5ErkJggg==\"","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"\n});\n\nfunction SvgGithub(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    role: \"img\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"GitHub icon\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGithub);\nexport default __webpack_public_path__ + \"static/media/github.16a9304e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z\"\n});\n\nfunction SvgTwitter(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    role: \"img\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Twitter icon\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTwitter);\nexport default __webpack_public_path__ + \"static/media/twitter.774c4536.svg\";\nexport { ForwardRef as ReactComponent };","const VENDOR_ENGRAMS_API_ENDPOINT =\n  \"https://api.vendorengrams.xyz/getVendorDrops?source=destiny-power-bars\";\n\nexport interface VendorEngramsVendorData {\n  vendorID: string;\n  display: string;\n  drop: string;\n  shorthand: string;\n  interval: string;\n  nextRefresh: string;\n}\n\nexport interface VendorEngramsData {\n  data: VendorEngramsVendorData[];\n  updateTimestamp: number;\n}\n\nexport const VENDOR_ENGRAMS_DROP_NO_DATA = \"0\";\nexport const VENDOR_ENGRAMS_DROP_LOW = \"1\";\nexport const VENDOR_ENGRAMS_DROP_HIGH = \"2\";\n\nconst VENDOR_DISPLAY_NAMES: { [shorthand: string]: string } = {\n  devrim: \"Devrim Kay (EDZ)\",\n  sloane: \"Sloane (Titan)\",\n  failsafe: \"Failsafe (Nessus)\",\n  asher: \"Asher Mir (Io)\",\n  zavala: \"Zavala (Vanguard, Tower)\",\n  shaxx: \"Shaxx (Crucible, Tower)\",\n  banshee: \"Banshee-44 (Gunsmith, Tower)\",\n  // benedict: \"Benedict\",\n  // saladin: \"Lord Saladin (Iron Banner, Tower)\",\n  fanboy: \"Brother Vance (Mercury)\",\n  bray: \"Ana Bray (Mars)\",\n  werner: \"Werner 99-40 (Tower, Nessus Barge)\",\n};\nexport const getVendorDisplayName = (shorthand: string) => {\n  return VENDOR_DISPLAY_NAMES[shorthand] || shorthand;\n};\n\nlet vendorEngramsData: VendorEngramsData | undefined;\nlet vendorEngramsRefreshTimer: number | NodeJS.Timeout | undefined;\nlet vendorEngramsRefreshPromise: Promise<VendorEngramsData> | undefined;\n\nconst VENDOR_ENGRAMS_REFRESH_DELAY = 5 * 60 * 1000;\n\nconst refreshVendorEngramsData = async () => {\n  const response = await fetch(VENDOR_ENGRAMS_API_ENDPOINT);\n  const jsonData = (await response.json()) as VendorEngramsVendorData[];\n  const updateTimestamp = Date.now();\n  const data = { data: jsonData, updateTimestamp };\n  vendorEngramsData = data;\n  return data;\n};\n\nexport const getVendorEngramsData = async () => {\n  if (vendorEngramsData) {\n    return vendorEngramsData;\n  }\n  if (!vendorEngramsRefreshPromise) {\n    vendorEngramsRefreshPromise = refreshVendorEngramsData();\n  }\n  if (!vendorEngramsRefreshTimer) {\n    vendorEngramsRefreshTimer = setInterval(() => {\n      refreshVendorEngramsData().catch((e) =>\n        console.warn(\"Error refreshing vendorengrams.xyz data\", e)\n      );\n    }, VENDOR_ENGRAMS_REFRESH_DELAY);\n  }\n  return vendorEngramsRefreshPromise;\n};\n","import React from \"react\";\n\nimport { Kofi } from \"./KoFi\";\n\nimport { ReactComponent as GitHubLogo } from \"../images/icons/github.svg\";\nimport { ReactComponent as TwitterLogo } from \"../images/icons/twitter.svg\";\n\nimport STYLES from \"./SocialLinks.module.scss\";\n\nexport const SocialLinks = () => (\n  <div className={STYLES.socialLinks}>\n    <div className={STYLES.link}>\n      <Kofi />\n    </div>\n    <a\n      className={STYLES.link}\n      href=\"https://www.twitter.com/corke_tom\"\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n    >\n      <TwitterLogo\n        width={20}\n        height={20}\n        style={{ fill: \"rgba(255,255,255,0.8)\" }}\n      />\n    </a>\n    <a\n      className={STYLES.link}\n      href=\"https://github.com/tomcorke/destiny-power-bars\"\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n    >\n      <GitHubLogo\n        width={20}\n        height={20}\n        style={{ fill: \"rgba(255,255,255,0.8)\" }}\n      />\n    </a>\n  </div>\n);\n","import React from \"react\";\n\nimport { BuildStamp } from \"./BuildStamp\";\nimport { SocialLinks } from \"./SocialLinks\";\n\nimport STYLES from \"./Footer.module.scss\";\n\nexport const Footer = () => {\n  return (\n    <div className={STYLES.footer}>\n      <SocialLinks />\n      <BuildStamp />\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport STYLES from \"./Header.module.scss\";\n\nexport const Header = () => (\n  <div className={STYLES.headerContainer}>\n    <div className={STYLES.header}>Destiny Power Bars</div>\n    <div className={STYLES.subHeader}>\n      by{\" \"}\n      <a\n        className={STYLES.author}\n        href=\"https://twitter.com/corke_tom\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n      >\n        Tom Corke\n      </a>\n    </div>\n  </div>\n);\n","import classnames from \"classnames\";\nimport React from \"react\";\n\nimport STYLES from \"./LoadingChecklist.module.scss\";\n\nexport type LoadingChecklistItemStatus = \"complete\" | \"pending\" | \"failed\";\n\nexport interface LoadingChecklistItem {\n  label: string;\n  status: LoadingChecklistItemStatus;\n}\n\ninterface LoadingChecklistProps {\n  items: LoadingChecklistItem[];\n  withTopMargin?: boolean;\n}\n\nexport const LoadingChecklist = ({\n  items,\n  withTopMargin,\n}: LoadingChecklistProps) => {\n  return (\n    <div\n      className={classnames(STYLES.LoadingChecklist, {\n        [STYLES.topMargin]: withTopMargin,\n      })}\n    >\n      <ul>\n        {items.map((item) => (\n          <li key={item.label}>\n            <div className={STYLES.item}>\n              <div className={classnames(STYLES.status, STYLES[item.status])} />\n              {item.label}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport STYLES from \"./LoadingSpinner.module.scss\";\n\ninterface LoadingSpinnerProps {\n  children: string | JSX.Element;\n}\n\nconst LoadingSpinner = ({ children }: LoadingSpinnerProps) => {\n  return (\n    <div className={STYLES.loading}>\n      <div className={STYLES.anchor}>\n        <div className={STYLES.spinnerLarge} />\n        <div className={STYLES.spinnerLargeDouble} />\n        <div className={STYLES.spinnerSmall} />\n        <div className={STYLES.spinnerSmallDouble} />\n      </div>\n      <div className={STYLES.status}>{children}</div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import classnames from \"classnames\";\nimport React, { useCallback, useState } from \"react\";\n\nimport STYLES from \"./LazyImage.module.scss\";\n\ninterface LazyImageProps {\n  lowResImage: string;\n  highResImage: string;\n  delay?: number;\n  alt?: string;\n}\n\nexport const LazyImage = ({\n  lowResImage,\n  highResImage,\n  alt = \"\",\n}: LazyImageProps) => {\n  const [highResImageLoaded, setHighResImageLoaded] = useState(false);\n\n  const onHighResImageLoad = useCallback(() => {\n    setHighResImageLoaded(true);\n  }, [setHighResImageLoaded]);\n\n  const result = (\n    <div className={STYLES.lazyImage}>\n      <img\n        src={highResImage}\n        alt={alt}\n        className={classnames({\n          [STYLES.hidden]: !highResImageLoaded,\n          [STYLES.overlay]: !highResImageLoaded,\n        })}\n        onLoad={onHighResImageLoad}\n      />\n      <img\n        src={lowResImage}\n        alt={alt}\n        className={classnames({\n          [STYLES.hidden]: highResImageLoaded,\n          [STYLES.overlay]: highResImageLoaded,\n        })}\n      />\n    </div>\n  );\n\n  return result;\n};\n","export default __webpack_public_path__ + \"static/media/example-titan-character-display-with-info-blur.cbe18dfa.jpg\";","export default __webpack_public_path__ + \"static/media/example-titan-character-display-with-info.2daef1c3.png\";","import React from \"react\";\n\nimport { manualStartAuth } from \"../services/bungie-auth\";\nimport { LazyImage } from \"./LazyImage\";\n\nimport ExampleTitanCharacterDisplayImageLowRes from \"../images/screenshots/example-titan-character-display-with-info-blur.jpg\";\nimport ExampleTitanCharacterDisplayImage from \"../images/screenshots/example-titan-character-display-with-info.png\";\nimport STYLES from \"./LoginPrompt.module.scss\";\n\ninterface LoginPromptProps {\n  onLoginClick?: () => void;\n}\n\nconst DEFAULT_ON_LOGIN_CLICK = () => manualStartAuth();\n\nexport const LoginPrompt = ({\n  onLoginClick = DEFAULT_ON_LOGIN_CLICK,\n}: LoginPromptProps) => {\n  return (\n    <div className={STYLES.loginContainer}>\n      <div className={STYLES.exampleImage}>\n        <LazyImage\n          lowResImage={ExampleTitanCharacterDisplayImageLowRes}\n          highResImage={ExampleTitanCharacterDisplayImage}\n          alt=\"Example Destiny Power Bars\"\n        />\n      </div>\n      <div className={STYLES.login}>\n        <div>\n          Destiny Power Bars requires access to your inventory and vault to\n          determine your maximum power per slot and character. Please log in to\n          Bungie.net to authorize this application.\n        </div>\n        <button className={STYLES.loginButton} onClick={onLoginClick}>\n          Log in with Bungie.net\n        </button>\n        {/* <a className={STYLES.loginButton} href={getAuthUrl()}>\n          Log in with Bungie.net\n        </a> */}\n      </div>\n    </div>\n  );\n};\n","import { UserInfoCard } from \"bungie-api-ts/user\";\nimport classnames from \"classnames\";\nimport React from \"react\";\n\nimport { PartialApi } from \"../services/api\";\nimport { logOut } from \"../services/bungie-auth\";\nimport STYLES from \"./MembershipSelect.module.scss\";\n\nexport interface RequiredApi extends PartialApi {\n  bungieAuth: {\n    getDestinyMemberships: () => UserInfoCard[] | undefined;\n  };\n}\n\nconst defaultOnLogout = () => logOut();\n\nconst PLATFORMS: { [key: number]: string } = {\n  1: \"xbox\",\n  2: \"psn\",\n  3: \"steam\",\n  4: \"blizzard\",\n  5: \"stadia\",\n};\n\nconst isCrossSavePrimary = (membership: UserInfoCard) => {\n  return (\n    membership.crossSaveOverride &&\n    membership.crossSaveOverride === membership.membershipType\n  );\n};\n\nconst isCrossSaveSecondary = (membership: UserInfoCard) => {\n  return (\n    membership.crossSaveOverride &&\n    membership.crossSaveOverride !== membership.membershipType\n  );\n};\n\nconst titleCase = (s: string = \"\") => {\n  return s.substr(0, 1).toUpperCase() + s.substr(1);\n};\n\ninterface CrossSaveDisplayProps {\n  membership: UserInfoCard;\n}\n\nconst CrossSaveDisplay = ({ membership }: CrossSaveDisplayProps) => {\n  if (membership.applicableMembershipTypes.length === 0) {\n    return null;\n  }\n  return (\n    <div className={STYLES.crossSaveDisplayWrapper}>\n      <div\n        className={STYLES.crossSaveDisplay}\n        title={`Cross-save enabled for: ${membership.applicableMembershipTypes\n          .map((t) => titleCase(PLATFORMS[t]))\n          .join(\", \")}`}\n      >\n        <div className={STYLES.crossSaveIcon} />\n        {membership.applicableMembershipTypes.map((m) => {\n          return (\n            <div\n              key={m}\n              className={classnames(\n                STYLES.crossSaveMembershipIcon,\n                STYLES[`crossSaveMembershipType_${PLATFORMS[m]}`]\n              )}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\ninterface MembershipSelectProps {\n  onMembershipSelect: (membership: UserInfoCard) => any;\n  api: RequiredApi;\n  onLogout?: () => void;\n}\n\nconst MembershipSelect = ({\n  onMembershipSelect,\n  api,\n  onLogout = defaultOnLogout,\n}: MembershipSelectProps) => {\n  const destinyMemberships = api.bungieAuth.getDestinyMemberships();\n\n  if (!destinyMemberships) {\n    return null;\n  }\n\n  if (destinyMemberships.length === 0) {\n    return <div>No destiny memberships!</div>;\n  }\n\n  return (\n    <div className={STYLES.membershipSelect}>\n      {destinyMemberships\n        .filter((m) => !isCrossSaveSecondary(m))\n        .filter((m) => m.membershipType !== 4)\n        .map((m) => {\n          return (\n            <div\n              key={m.membershipId}\n              className={classnames(\n                STYLES.membership,\n                STYLES[`platform_${PLATFORMS[m.membershipType]}`],\n                {\n                  [STYLES.crossSaveActive]: isCrossSavePrimary(m),\n                  [STYLES.crossSaveDisabled]: isCrossSaveSecondary(m),\n                }\n              )}\n              onClick={() => onMembershipSelect(m)}\n            >\n              <span className={STYLES.membershipDisplayName}>\n                {m.displayName}\n              </span>\n              {isCrossSavePrimary(m) ? (\n                <CrossSaveDisplay membership={m} />\n              ) : null}\n            </div>\n          );\n        })}\n      <button\n        className={STYLES.logOut}\n        onClick={() => onLogout()}\n        title=\"Log out\"\n      >\n        <div className={STYLES.logOutIcon} />\n        <div className={STYLES.logOutText}>Log out</div>\n      </button>\n    </div>\n  );\n};\n\nexport default MembershipSelect;\n","import {\n  DestinyCharacterComponent,\n  DestinyInventoryComponent,\n  DestinyItemComponent,\n  DestinyItemInstanceComponent,\n  DestinyProfileProgressionComponent,\n  DestinyProfileResponse,\n  ServerResponse,\n} from \"bungie-api-ts/destiny2\";\n\nimport forIn from \"lodash/forIn\";\nimport groupBy from \"lodash/groupBy\";\nimport mapValues from \"lodash/mapValues\";\nimport maxBy from \"lodash/maxBy\";\nimport sumBy from \"lodash/sumBy\";\n\nimport {\n  ARTIFACT_INVENTORY_BUCKET_HASH,\n  CLASS_NAMES,\n  CLASS_TYPE_ALL,\n  ITEM_BUCKET_SLOTS,\n  ITEM_POWER_SOFT_CAP,\n  ITEM_SLOT_BUCKETS,\n  ITEM_TYPE_ARMOR,\n  ITEM_TYPE_WEAPON,\n} from \"../constants\";\nimport {\n  ItemBySlot,\n  JoinedItemDefinition,\n  PowerBarsCharacterData,\n  PowerBySlot,\n  SeasonalArtifactData,\n} from \"../types\";\nimport {\n  BungieSystemDisabledError,\n  getFullProfile,\n  getManifest,\n  GetManifestResult,\n  ManifestData,\n  setItemLockState,\n} from \"./bungie-api\";\nimport { auth, getSelectedDestinyMembership } from \"./bungie-auth\";\nimport { debug } from \"./debug\";\nimport eventEmitter, { EVENTS } from \"./events\";\nimport { isMasterwork } from \"./masterwork\";\n\nconst CHARACTER_DISPLAY_ORDER_STORAGE_KEY = \"characterDisplayOrder\";\nconst CACHED_CHARACTER_DATA_STORAGE_KEY = \"cachedCharacterData\";\n\nexport const loadCharacterDisplayOrder = () => {\n  debug(\"loadCharacterDisplayOrder\");\n  const storedValue = localStorage.getItem(CHARACTER_DISPLAY_ORDER_STORAGE_KEY);\n  try {\n    return storedValue ? JSON.parse(storedValue) : undefined;\n  } catch (e) {\n    return undefined;\n  }\n};\n\nexport const saveCharacterDisplayOrder = (characterOrder: string[]) => {\n  debug(\"saveCharacterDisplayOrder\");\n  localStorage.setItem(\n    CHARACTER_DISPLAY_ORDER_STORAGE_KEY,\n    JSON.stringify(characterOrder)\n  );\n};\n\nconst getPowerBySlot = (itemsBySlot: ItemBySlot): PowerBySlot =>\n  mapValues(itemsBySlot, (item) => item?.instanceData?.primaryStat?.value || 0);\n\nconst getAveragePower = (powerBySlot: PowerBySlot) =>\n  Object.values(powerBySlot).reduce((sum, power) => sum + power, 0) /\n  Object.keys(ITEM_SLOT_BUCKETS).length;\nconst getOverallPower = (powerBySlot: PowerBySlot) =>\n  Math.floor(getAveragePower(powerBySlot));\n\nconst mergeItems = <\n  T extends { [key: string]: { items: DestinyItemComponent[] } }\n>(\n  characterItemMap: T\n) => {\n  return Object.values(characterItemMap).reduce(\n    (allItems, characterItems) => allItems.concat(characterItems.items),\n    [] as DestinyItemComponent[]\n  );\n};\n\nconst isItemEquippableByCharacter = (\n  item: JoinedItemDefinition,\n  character: DestinyCharacterComponent\n) => {\n  if (!item.instanceData) {\n    return false;\n  }\n  if (item.instanceData.equipRequiredLevel > character.baseCharacterLevel) {\n    return false;\n  }\n  if (\n    item.itemDefinition.classType !== CLASS_TYPE_ALL &&\n    item.itemDefinition.classType !== character.classType\n  ) {\n    return false;\n  }\n  if (item.instanceData.cannotEquipReason === 16) {\n    return true;\n  } // Only reason is that it's in your vault\n  if (item.instanceData.canEquip) {\n    return true;\n  } // If the game says we can equip it, let's believe it\n  // Let's ignore the rest for now\n  return true;\n};\n\ninterface ObjectOf<T> {\n  [key: string]: T;\n}\n\nconst mapAndFilterItems = (\n  items: DestinyItemComponent[],\n  manifest: ManifestData,\n  itemInstances: ObjectOf<DestinyItemInstanceComponent>,\n  character: DestinyCharacterComponent\n): JoinedItemDefinition[] =>\n  items\n    .map((item) => {\n      const instanceData = item.itemInstanceId\n        ? itemInstances[item.itemInstanceId]\n        : undefined;\n      const itemDefinition =\n        manifest.DestinyInventoryItemDefinition[item.itemHash];\n      return {\n        ...item,\n        instanceData,\n        itemDefinition,\n      };\n    })\n    .filter(\n      (i) =>\n        i.instanceData &&\n        i.itemDefinition &&\n        [ITEM_TYPE_ARMOR, ITEM_TYPE_WEAPON].includes(i.itemDefinition.itemType)\n    )\n    .map((i) => ({\n      ...i,\n      instanceData: i.instanceData!,\n      itemDefinition: i.itemDefinition!,\n    }))\n    .map((i) => ({\n      ...i,\n      slotName: ITEM_BUCKET_SLOTS[i.itemDefinition.inventory!.bucketTypeHash],\n    }))\n    .filter(\n      (i) => i.instanceData.primaryStat && i.instanceData.primaryStat.value\n    )\n    .filter((i) => isItemEquippableByCharacter(i, character));\n\nconst getItemScore = (\n  item?: JoinedItemDefinition,\n  priorityItems?: DestinyItemComponent[]\n) => {\n  if (!item || !item.instanceData || !item.instanceData.primaryStat) {\n    return 0;\n  }\n  let score = item.instanceData.primaryStat.value;\n  if (\n    priorityItems &&\n    priorityItems.some((pi) => pi.itemInstanceId === item.itemInstanceId)\n  ) {\n    // Prefer items currently equipped on character over items of equal level elsewhere\n    score += 0.5;\n  }\n  if (isMasterwork(item)) {\n    score += 0.25;\n  }\n  if (item.location === 1) {\n    // In inventory\n    score += 0.125;\n  }\n  return score;\n};\n\nconst getEquipLabel = (item?: JoinedItemDefinition) =>\n  item?.itemDefinition.equippingBlock?.uniqueLabel;\n\n// const getEmblemData = (\n//   character: DestinyCharacterComponent,\n//   manifest: ManifestData\n// ) => {\n//   if (!manifest) {\n//     return;\n//   }\n//   return manifest.DestinyInventoryItemDefinition[character.emblemHash];\n// };\n\nconst getDataForCharacterId = (\n  characterId: string,\n  characters: ObjectOf<DestinyCharacterComponent>,\n  itemInstances: ObjectOf<DestinyItemInstanceComponent>,\n  manifest: ManifestData,\n  equippedCharacterItems: DestinyItemComponent[],\n  allCharacterItems: DestinyItemComponent[],\n  profileInventories: DestinyInventoryComponent,\n  profileProgression: DestinyProfileProgressionComponent\n): PowerBarsCharacterData => {\n  debug(\"getDataForCharacterId\", characterId);\n  const character = characters[characterId];\n  const className = CLASS_NAMES[character.classType];\n\n  const characterItems = mapAndFilterItems(\n    allCharacterItems,\n    manifest,\n    itemInstances,\n    character\n  );\n  const relevantProfileItems = mapAndFilterItems(\n    profileInventories.items,\n    manifest,\n    itemInstances,\n    character\n  ).filter(\n    (i) =>\n      i.itemDefinition.classType === CLASS_TYPE_ALL ||\n      i.itemDefinition.classType === character.classType\n  );\n\n  const allItems = characterItems.concat(relevantProfileItems);\n\n  // Group by slot\n  const itemsBySlot = groupBy(allItems, (i) => i.slotName);\n  // Get max power items per slot\n  let topItemBySlot: ItemBySlot = mapValues(\n    itemsBySlot,\n    (items) =>\n      maxBy(items, (item) => getItemScore(item, equippedCharacterItems))!\n  );\n  // Get overlaps by equip label\n  const uniqueEquippedGroups = groupBy(\n    Object.values(topItemBySlot).filter(getEquipLabel),\n    getEquipLabel\n  );\n  // For overlaps with more than one item, generate valid options where all-but-one item is swapped for the next best non-exotic\n  forIn(uniqueEquippedGroups, (uniqueEquippedGroup) => {\n    if (uniqueEquippedGroup.length <= 1) {\n      return;\n    }\n\n    const validItemCombinations: ItemBySlot[] = [];\n\n    uniqueEquippedGroup.forEach((item) => {\n      const otherItems: JoinedItemDefinition[] = uniqueEquippedGroup\n        .filter((otherItem) => otherItem !== item)\n        .filter((otherItem) => !!otherItem)\n        .map((otherItem) => otherItem!);\n      let isCombinationValid = true;\n      const combination = { ...topItemBySlot };\n      otherItems.forEach((otherItem) => {\n        // Find non-exotics for this slot\n        const nonExotics = itemsBySlot[otherItem.slotName].filter(\n          (i) => !getEquipLabel(i)\n        );\n        if (nonExotics.length > 0) {\n          // Select max power from non-exotics\n          combination[otherItem.slotName] = maxBy(nonExotics, (i) =>\n            getItemScore(i, equippedCharacterItems)\n          )!;\n        } else {\n          // No non-exotic options for this slot, so whole combination is invalidaa\n          isCombinationValid = false;\n        }\n      });\n      if (isCombinationValid) {\n        validItemCombinations.push(combination);\n      }\n    });\n\n    // Select highest total scoring valid combination, if alternative item combinations have been generated\n    if (validItemCombinations.length > 0) {\n      const bestCombination = maxBy(validItemCombinations, (combination) =>\n        sumBy(Object.values(combination), getItemScore)\n      )!;\n      topItemBySlot = bestCombination;\n    }\n  });\n\n  const LOST_ITEMS_BUCKET = 215593132;\n  Object.values(topItemBySlot).forEach((item) => {\n    if (item && item.bucketHash === LOST_ITEMS_BUCKET) {\n      // Override normally read-only property\n      (item as any).location = 4; // ItemLocation.Postmaster\n    }\n  });\n\n  const powerBySlot = getPowerBySlot(topItemBySlot);\n  const overallPowerExact = getAveragePower(powerBySlot);\n  const overallPower = getOverallPower(powerBySlot);\n\n  const artifactItemComponent = allCharacterItems.find(\n    (i) => i.bucketHash === ARTIFACT_INVENTORY_BUCKET_HASH\n  );\n\n  const artifactInstance =\n    artifactItemComponent?.itemInstanceId &&\n    itemInstances[artifactItemComponent.itemInstanceId];\n\n  let artifactData: SeasonalArtifactData | undefined;\n  if (\n    artifactItemComponent &&\n    profileProgression.seasonalArtifact &&\n    artifactInstance\n  ) {\n    const artifactDefinition = manifest.DestinyInventoryItemDefinition[\n      artifactItemComponent.itemHash\n    ]!;\n    artifactData = {\n      bonusPower:\n        profileProgression.seasonalArtifact.powerBonus ||\n        artifactInstance.primaryStat.value,\n      iconPath: artifactDefinition.displayProperties?.icon,\n      name: artifactDefinition.displayProperties?.name || \"Artifact\",\n      progressToNextLevel:\n        profileProgression.seasonalArtifact?.powerBonusProgression\n          ?.progressToNextLevel,\n      nextLevelAt:\n        profileProgression.seasonalArtifact?.powerBonusProgression?.nextLevelAt,\n    };\n  }\n\n  const potentialPowerBySlot = { ...powerBySlot };\n  while (\n    Object.values(potentialPowerBySlot).some(\n      (power) =>\n        power < getOverallPower(potentialPowerBySlot) ||\n        power < ITEM_POWER_SOFT_CAP\n    )\n  ) {\n    const tempPotentialOverallPower = getOverallPower(potentialPowerBySlot);\n    Object.keys(potentialPowerBySlot).forEach(\n      (slot) =>\n        (potentialPowerBySlot[slot] = Math.max(\n          ITEM_POWER_SOFT_CAP,\n          Math.max(tempPotentialOverallPower, potentialPowerBySlot[slot])\n        ))\n    );\n  }\n  const potentialOverallPower = getOverallPower(potentialPowerBySlot);\n\n  const titleDefinition =\n    manifest.DestinyRecordDefinition[character.titleRecordHash || \"\"];\n  const title =\n    titleDefinition &&\n    titleDefinition.titleInfo.titlesByGenderHash[character.genderHash];\n\n  const resultData: PowerBarsCharacterData = {\n    character,\n    className,\n    overallPowerExact,\n    overallPower,\n    potentialOverallPower,\n    topItemBySlot,\n    artifactData,\n    title,\n  };\n\n  return resultData;\n};\n\nexport const getCachedCharacterData = async (\n  setCharacterData: (state: PowerBarsCharacterData[]) => any\n) => {\n  debug(\"getCachedCharacterData\");\n  const dataString = localStorage.getItem(CACHED_CHARACTER_DATA_STORAGE_KEY);\n  if (dataString) {\n    try {\n      const parsedData = JSON.parse(dataString) as PowerBarsCharacterData[];\n      setCharacterData(parsedData);\n    } catch (e) {\n      console.error(`Error parsing cached character data`, e);\n    }\n  }\n};\n\nconst setCachedCharacterData = (data: PowerBarsCharacterData[]) => {\n  localStorage.setItem(CACHED_CHARACTER_DATA_STORAGE_KEY, JSON.stringify(data));\n};\n\nlet isFetchingCharacterData = false;\nexport const getIsFetchingCharacterData = () => {\n  return isFetchingCharacterData;\n};\n\nexport const bustProfileCache = async (\n  characterData: PowerBarsCharacterData[]\n) => {\n  // find a character with a valid item somewhere (just to be safe)\n  const character = characterData.find(\n    (char) =>\n      char.topItemBySlot &&\n      Object.values(char.topItemBySlot).find((v) => v?.itemInstanceId)\n  );\n\n  // find a valid item on our character\n  const item = Object.values(character?.topItemBySlot ?? {}).find(\n    (v) => v?.itemInstanceId\n  );\n\n  if (!item?.itemInstanceId || !character) return;\n\n  // to bust the profile cache, we set the locked state on an item to its *current lock state*.\n  // This might be weird and confusing but it works and it busts the profile cache without\n  // actually changing anything on the user's inventory\n\n  const isLocked = (item.state && item.state & 1) === 1; // ItemState.Locked\n  const payload = {\n    state: isLocked,\n    itemId: item.itemInstanceId,\n    characterId: character?.character.characterId,\n    membershipType: character?.character.membershipType,\n  };\n\n  isFetchingCharacterData = true;\n  eventEmitter.emit(EVENTS.FETCHING_CHARACTER_DATA_CHANGE);\n\n  try {\n    await setItemLockState(payload);\n  } catch (err) {\n    throw err;\n  } finally {\n    isFetchingCharacterData = false;\n    eventEmitter.emit(EVENTS.FETCHING_CHARACTER_DATA_CHANGE);\n  }\n};\n\nexport const getCharacterData = async (\n  setCharacterData: (state: PowerBarsCharacterData[]) => any\n) => {\n  debug(\"getCharacterData\");\n  try {\n    const isAuthed = await auth();\n    if (!isAuthed) {\n      return;\n    }\n\n    const pendingManifest = getManifest();\n\n    isFetchingCharacterData = true;\n    eventEmitter.emit(EVENTS.FETCHING_CHARACTER_DATA_CHANGE);\n\n    const destinyMembership = getSelectedDestinyMembership();\n    if (!destinyMembership) {\n      return;\n    }\n\n    let fullProfile: ServerResponse<DestinyProfileResponse> | undefined;\n    try {\n      fullProfile = await getFullProfile(\n        destinyMembership.membershipType,\n        destinyMembership.membershipId\n      );\n      if (fullProfile.ErrorStatus === \"SystemDisabled\") {\n        throw new BungieSystemDisabledError();\n      }\n    } catch (e) {\n      if (e.message === \"401\") {\n        await auth();\n        fullProfile = await getFullProfile(\n          destinyMembership.membershipType,\n          destinyMembership.membershipId\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    if (\n      !fullProfile ||\n      !fullProfile?.Response?.characters?.data ||\n      !fullProfile?.Response?.characterEquipment?.data ||\n      !fullProfile?.Response?.characterInventories?.data ||\n      !fullProfile?.Response?.profileInventory?.data ||\n      !fullProfile?.Response?.itemComponents?.instances?.data ||\n      !fullProfile?.Response?.profileProgression?.data\n    ) {\n      return;\n    }\n\n    const characters = fullProfile.Response.characters.data;\n    const characterEquipments = fullProfile.Response.characterEquipment.data;\n    const characterInventories = fullProfile.Response.characterInventories.data;\n    const profileInventories = fullProfile.Response.profileInventory.data;\n    const itemInstances = fullProfile.Response.itemComponents.instances.data;\n    const profileProgression = fullProfile.Response.profileProgression.data;\n\n    let manifestResult: GetManifestResult | undefined;\n    try {\n      manifestResult = await pendingManifest;\n    } catch (e) {\n      console.error(e);\n      return;\n    }\n\n    if (!manifestResult || !manifestResult.manifest) {\n      return;\n    }\n\n    const { manifest } = manifestResult;\n\n    const allCharacterItems = mergeItems(characterInventories)\n      .concat(mergeItems(characterEquipments))\n      .concat(profileInventories.items);\n\n    const characterIds = Object.keys(characters);\n    const characterData = characterIds.map((id) =>\n      getDataForCharacterId(\n        id,\n        characters,\n        itemInstances,\n        manifest,\n        characterEquipments[id].items,\n        allCharacterItems,\n        profileInventories,\n        profileProgression\n      )\n    );\n    setCachedCharacterData(characterData);\n    setCharacterData(characterData);\n  } catch (e) {\n    throw e;\n  } finally {\n    isFetchingCharacterData = false;\n    eventEmitter.emit(EVENTS.FETCHING_CHARACTER_DATA_CHANGE);\n  }\n};\n","import * as bungieApi from \"./bungie-api\";\nimport * as bungieAuth from \"./bungie-auth\";\nimport * as ga from \"./ga\";\nimport * as utils from \"./utils\";\nimport * as vendors from \"./vendor-engrams\";\n\nexport interface Api {\n  bungieApi: typeof bungieApi;\n  bungieAuth: typeof bungieAuth;\n  ga: typeof ga;\n  utils: typeof utils;\n  vendors: typeof vendors;\n}\n\nexport type BungieApi = typeof bungieApi;\nexport type BungieAuth = typeof bungieAuth;\nexport type GA = typeof ga;\nexport type Utils = typeof utils;\nexport type Vendors = typeof vendors;\n\nexport interface PartialApi {\n  bungieApi?: Partial<BungieApi>;\n  bungieAuth?: Partial<BungieAuth>;\n  ga?: Partial<GA>;\n  utils?: Partial<Utils>;\n  vendors?: Partial<Vendors>;\n}\n\nconst exports = {\n  bungieApi,\n  bungieAuth,\n  ga,\n  utils,\n  vendors,\n};\n\nexport default exports;\n","import useInterval from \"@use-it/interval\";\nimport { UserInfoCard } from \"bungie-api-ts/user\";\nimport classnames from \"classnames\";\nimport throttle from \"lodash/throttle\";\nimport React, { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  auth,\n  hasManuallyAuthed,\n  hasSelectedDestinyMembership,\n  hasValidAuth,\n  manualStartAuth,\n  setSelectedDestinyMembership,\n} from \"./services/bungie-auth\";\nimport ga from \"./services/ga\";\nimport { PowerBarsCharacterData } from \"./types\";\n\nimport CharacterDisplay from \"./components/CharacterDisplay\";\nimport FetchSpinner from \"./components/FetchSpinner\";\nimport { Footer } from \"./components/Footer\";\nimport { Header } from \"./components/Header\";\nimport {\n  LoadingChecklist,\n  LoadingChecklistItem,\n} from \"./components/LoadingChecklist\";\nimport LoadingSpinner from \"./components/LoadingSpinner\";\nimport { LoginPrompt } from \"./components/LoginPrompt\";\nimport MembershipSelect from \"./components/MembershipSelect\";\n// import { S10Overlay } from \"./components/S10Overlay\";\n// import { VendorDisplay } from \"./components/VendorDisplay\";\nimport api from \"./services/api\";\nimport {\n  BungieSystemDisabledError,\n  getManifest,\n  ManifestData,\n} from \"./services/bungie-api\";\nimport { EVENTS, useEvent } from \"./services/events\";\nimport {\n  getCachedCharacterData,\n  getCharacterData,\n  getIsFetchingCharacterData,\n  loadCharacterDisplayOrder,\n  saveCharacterDisplayOrder,\n  bustProfileCache,\n} from \"./services/utils\";\n\nimport \"normalize.css\";\nimport \"./index.css\";\n\nimport STYLES from \"./App.module.scss\";\n\nconst CHARACTER_DATA_REFRESH_TIMER = 15000;\n\nconst doAuth = throttle(\n  (\n    setIsAuthed: (value: boolean) => void,\n    setAuthError: (value: boolean) => void\n  ) => {\n    (async () => {\n      try {\n        const authResult = await auth();\n        if (authResult) {\n          setIsAuthed(true);\n          setAuthError(false);\n        } else {\n          setIsAuthed(false);\n          setAuthError(true);\n        }\n      } catch (e) {\n        console.error(e);\n        setIsAuthed(false);\n        setAuthError(true);\n      }\n    })();\n  },\n  100\n);\n\nconst doGetManifest = throttle(\n  (\n    setBungieSystemDisabled: (value: boolean) => void,\n    setBungieServiceUnavailable: (value: boolean) => void,\n    setManifestData: (value: ManifestData) => void,\n    setManifestError: (value: boolean) => void\n  ) => {\n    (async () => {\n      try {\n        const manifestResult = await getManifest();\n        if (manifestResult.error) {\n          console.error(\n            `Error fetching manifest:`,\n            manifestResult.error.message\n          );\n          setManifestError(true);\n          if (manifestResult.error instanceof BungieSystemDisabledError) {\n            setBungieSystemDisabled(true);\n          }\n          if (manifestResult.error.message === \"503\") {\n            setBungieServiceUnavailable(true);\n          }\n          return;\n        }\n        setManifestData(manifestResult.manifest);\n      } catch (e) {\n        console.error(e);\n        setManifestError(true);\n      }\n    })();\n  },\n  500\n);\n\nconst doGetCharacterData = throttle(\n  (\n    setCharacterData: (value: PowerBarsCharacterData[]) => void,\n    setBungieSystemDisabled: (value: boolean) => void,\n    setBungieServiceUnavailable: (value: boolean) => void\n  ) => {\n    const updateCharacterData = (newData: PowerBarsCharacterData[]) => {\n      const newOverallPower = Math.max(...newData.map((c) => c.overallPower));\n      const newArtifactPower = Math.max(\n        ...newData.map((c) => (c.artifactData ? c.artifactData.bonusPower : 0))\n      );\n      const newTotalPower = newOverallPower + newArtifactPower;\n      ga.set({\n        dimension1: `${newOverallPower}`,\n        dimension2: `${newArtifactPower}`,\n        dimension3: `${newTotalPower}`,\n      });\n      setCharacterData(newData);\n    };\n\n    const isFetchingCharacterData = getIsFetchingCharacterData();\n\n    (async () => {\n      if (isFetchingCharacterData) return;\n\n      try {\n        await getCharacterData(updateCharacterData);\n      } catch (error) {\n        if (error instanceof BungieSystemDisabledError) {\n          setBungieSystemDisabled(true);\n        }\n        if (error.message === \"503\") {\n          setBungieServiceUnavailable(true);\n        }\n        console.error(\"Error fetching character data:\", error);\n      }\n    })();\n  },\n  500\n);\n\nconst doHardRefresh = throttle(\n  async (\n    setCharacterData: (value: PowerBarsCharacterData[]) => void,\n    setBungieSystemDisabled: (value: boolean) => void,\n    setBungieServiceUnavailable: (value: boolean) => void,\n    characterData: PowerBarsCharacterData[] | undefined\n  ) => {\n    if (characterData) {\n      try {\n        await bustProfileCache(characterData);\n      } catch (error) {\n        console.error(\n          \"Error busting profile cache, but silently ignoring\",\n          error\n        );\n      }\n    }\n\n    return doGetCharacterData(\n      setCharacterData,\n      setBungieSystemDisabled,\n      setBungieServiceUnavailable\n    );\n  },\n  500\n);\n\nexport const AppWrapper = ({\n  children,\n  top = false,\n}: {\n  children: JSX.Element | (JSX.Element | null)[];\n  top?: boolean;\n}) => {\n  return (\n    <div className={STYLES.App}>\n      <div className={classnames(STYLES.AppInner, { [STYLES.top]: top })}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nconst App = () => {\n  const [disableManualLogin, setDisableManualLogin] = useState(\n    hasManuallyAuthed()\n  );\n  const [isAuthed, setIsAuthed] = useState(hasValidAuth());\n  const [hasAuthError, setAuthError] = useState(false);\n\n  const [manifestData, setManifestData] = useState<ManifestData | undefined>(\n    undefined\n  );\n  const [hasManifestError, setManifestError] = useState(false);\n  const [isBungieSystemDisabled, setBungieSystemDisabled] = useState(false);\n  const [isBungieServiceUnavailable, setBungieServiceUnavailable] = useState(\n    false\n  );\n\n  const [isFetchingCharacterData, setIsFetchingCharacterData] = useState(\n    getIsFetchingCharacterData()\n  );\n\n  useEvent(EVENTS.FETCHING_CHARACTER_DATA_CHANGE, () =>\n    setIsFetchingCharacterData(getIsFetchingCharacterData())\n  );\n\n  const [characterData, setCharacterData] = useState<\n    PowerBarsCharacterData[] | undefined\n  >(undefined);\n\n  const [manifestState, setManifestState] = useState(\"Initialising...\");\n  useEvent(EVENTS.GET_MANIFEST, () => {\n    setManifestError(false);\n    setManifestState(\"Checking manifest version\");\n  });\n  useEvent(EVENTS.LOAD_MANIFEST_DATA, () =>\n    setManifestState(\"Loading manifest data\")\n  );\n  useEvent(EVENTS.FETCH_MANIFEST_DATA, () =>\n    setManifestState(\"Fetching manifest data from Bungie\")\n  );\n  useEvent(EVENTS.PARSE_MANIFEST_DATA, () =>\n    setManifestState(\"Processing manifest data\")\n  );\n  useEvent(EVENTS.STORE_MANIFEST_DATA, () =>\n    setManifestState(\"Saving manifest data\")\n  );\n  useEvent(EVENTS.MANIFEST_DATA_READY, () => {\n    setManifestError(false);\n    setManifestState(\"Manifest ready\");\n  });\n  useEvent(EVENTS.LOG_OUT, () => {\n    setIsAuthed(false);\n    setDisableManualLogin(false);\n  });\n\n  const hasManifestData = manifestState === \"Manifest ready\";\n\n  useEffect(() => {\n    if (!isAuthed) {\n      doAuth(setIsAuthed, setAuthError);\n    }\n  }, [isAuthed, setIsAuthed, setAuthError]);\n\n  useEffect(\n    () =>\n      doGetManifest(\n        setBungieSystemDisabled,\n        setBungieServiceUnavailable,\n        setManifestData,\n        setManifestError\n      ),\n    [\n      setBungieSystemDisabled,\n      setBungieServiceUnavailable,\n      setManifestData,\n      setManifestError,\n    ]\n  );\n\n  useEvent(EVENTS.MANIFEST_FETCH_ERROR, () => {\n    doGetManifest(\n      setBungieSystemDisabled,\n      setBungieServiceUnavailable,\n      setManifestData,\n      setManifestError\n    );\n  });\n\n  const [\n    hasLoadedCachedCharacterData,\n    setHasLoadedCachedCharacterData,\n  ] = useState(false);\n\n  const hasSelectedMembership = hasSelectedDestinyMembership();\n\n  useEffect(() => {\n    if (isAuthed && hasSelectedMembership && !hasLoadedCachedCharacterData) {\n      setHasLoadedCachedCharacterData(true);\n      getCachedCharacterData(setCharacterData);\n    }\n  }, [\n    isAuthed,\n    hasSelectedMembership,\n    hasLoadedCachedCharacterData,\n    setHasLoadedCachedCharacterData,\n  ]);\n\n  useInterval(() => {\n    if (isAuthed && hasSelectedMembership && !isFetchingCharacterData) {\n      doGetCharacterData(\n        setCharacterData,\n        setBungieSystemDisabled,\n        setBungieServiceUnavailable\n      );\n    }\n  }, CHARACTER_DATA_REFRESH_TIMER);\n\n  useEffect(() => {\n    if (\n      isAuthed &&\n      !characterData &&\n      !isFetchingCharacterData &&\n      !isBungieSystemDisabled\n    ) {\n      doGetCharacterData(\n        setCharacterData,\n        setBungieSystemDisabled,\n        setBungieServiceUnavailable\n      );\n    }\n  }, [\n    isAuthed,\n    characterData,\n    isFetchingCharacterData,\n    isBungieSystemDisabled,\n  ]);\n\n  const onSelectMembership = useCallback((membership: UserInfoCard) => {\n    ga.event({\n      category: \"Platform\",\n      action: \"Select platform\",\n      label: `Membership type: ${membership.membershipType}`,\n    });\n    setSelectedDestinyMembership(membership);\n  }, []);\n\n  const onRefreshClick = () => {\n    doHardRefresh(\n      setCharacterData,\n      setBungieSystemDisabled,\n      setBungieServiceUnavailable,\n      characterData\n    );\n  };\n\n  let status: string | JSX.Element = \"\";\n  if (isBungieSystemDisabled) {\n    status = (\n      <span>\n        Bungie API disabled.\n        <br />\n        Check{\" \"}\n        <a\n          href=\"https://www.bungie.net/en/Help/Article/13125\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Bungie's server and update status page\n        </a>{\" \"}\n        for more information\n      </span>\n    );\n  } else if (isBungieServiceUnavailable) {\n    status = (\n      <span>\n        Bungie API unavailable.\n        <br />\n        Check{\" \"}\n        <a\n          href=\"https://www.bungie.net/en/Help/Article/13125\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Bungie's server and update status page\n        </a>{\" \"}\n        for more information\n      </span>\n    );\n  } else if (hasAuthError) {\n    status = (\n      <span\n        className={STYLES.statusAuthError}\n        onClick={() => manualStartAuth()}\n      >\n        Bungie.net authentication required\n      </span>\n    );\n  } else if (hasManifestError) {\n    status = (\n      <span>\n        Error fetching manifest, <a href=\"/\">refresh page</a> to try again!\n      </span>\n    );\n  } else if (!isAuthed) {\n    status = \"Authenticating...\";\n  } else if (!hasSelectedMembership) {\n    status = \"Waiting for Destiny platform selection...\";\n  } else if (!hasManifestData) {\n    status = manifestState;\n  } else if (!characterData || characterData.length === 0) {\n    if (isFetchingCharacterData) {\n      status = \"Fetching character data...\";\n    } else {\n      status = \"No character data\";\n    }\n  }\n\n  (window as any).characterData = characterData;\n\n  const getDefaultCharacterDisplayOrder = useCallback(\n    () =>\n      characterData ? characterData.map((c) => c.character.characterId) : [],\n    [characterData]\n  );\n\n  const isValidCharacterDisplayOrder = useCallback(\n    (characterIds: string[]) =>\n      characterData &&\n      characterData.length === characterIds.length &&\n      characterIds.every((id) =>\n        characterData.some((c) => c.character.characterId === id)\n      ) &&\n      characterData.every((c) =>\n        characterIds.includes(c.character.characterId)\n      ),\n    [characterData]\n  );\n\n  const [draggingCharacterId, setDraggingCharacterId] = useState<\n    string | undefined\n  >(undefined);\n  const [characterDisplayOrder, setCharacterDisplayOrder] = useState<\n    string[] | undefined\n  >(loadCharacterDisplayOrder());\n  const dropOnCharacterId = useCallback(\n    (dropCharacterId: string) => {\n      if (!draggingCharacterId || draggingCharacterId === dropCharacterId) {\n        return;\n      }\n      const currentCharacterOrder =\n        characterDisplayOrder && characterDisplayOrder.length > 0\n          ? characterDisplayOrder\n          : getDefaultCharacterDisplayOrder();\n\n      const swappedOrder = currentCharacterOrder.slice();\n      swappedOrder.splice(\n        currentCharacterOrder.indexOf(draggingCharacterId),\n        1,\n        dropCharacterId\n      );\n      swappedOrder.splice(\n        currentCharacterOrder.indexOf(dropCharacterId),\n        1,\n        draggingCharacterId\n      );\n\n      saveCharacterDisplayOrder(swappedOrder);\n      setCharacterDisplayOrder(swappedOrder);\n    },\n    [\n      draggingCharacterId,\n      characterDisplayOrder,\n      setCharacterDisplayOrder,\n      getDefaultCharacterDisplayOrder,\n    ]\n  );\n\n  let useCharacterOrder = getDefaultCharacterDisplayOrder();\n  if (\n    characterData &&\n    characterData.length > 0 &&\n    characterDisplayOrder &&\n    characterDisplayOrder.length > 0\n  ) {\n    // Validate that character IDs in display order match\n    if (isValidCharacterDisplayOrder(characterDisplayOrder)) {\n      useCharacterOrder = characterDisplayOrder;\n    } else {\n      setCharacterDisplayOrder(undefined);\n    }\n  }\n\n  if (isAuthed && characterData && characterData.length > 0) {\n    return (\n      <>\n        <AppWrapper top>\n          <div className={STYLES.header}>\n            <button\n              className={classnames(STYLES.hardRefreshButton, {\n                [STYLES.disabled]: isFetchingCharacterData,\n              })}\n              onClick={onRefreshClick}\n            >\n              Refresh\n            </button>\n            <MembershipSelect\n              api={api}\n              onMembershipSelect={onSelectMembership}\n            />\n          </div>\n          <div className={STYLES.charactersContainer}>\n            <div className={STYLES.characters}>\n              {useCharacterOrder\n                .map((characterId) =>\n                  characterData.find(\n                    (c) => c.character.characterId === characterId\n                  )\n                )\n                .map((c) => (\n                  <CharacterDisplay\n                    key={c!.character.characterId}\n                    data={c!}\n                    onDragStart={() =>\n                      setDraggingCharacterId(c!.character.characterId)\n                    }\n                    onDragEnd={() => setDraggingCharacterId(undefined)}\n                    onDragDrop={() =>\n                      dropOnCharacterId(c!.character.characterId)\n                    }\n                  />\n                ))}\n            </div>\n          </div>\n          {/* <VendorDisplay manifestData={manifestData} /> */}\n          {status ? <LoadingSpinner>{status}</LoadingSpinner> : null}\n          {isFetchingCharacterData ? <FetchSpinner /> : null}\n        </AppWrapper>\n        {/* <S10Overlay /> */}\n        <Footer />\n      </>\n    );\n  }\n\n  if (hasAuthError && !disableManualLogin) {\n    return (\n      <AppWrapper>\n        <Header />\n        <LoginPrompt />\n        <Footer />\n      </AppWrapper>\n    );\n  }\n\n  const loadingChecklistItems: LoadingChecklistItem[] = [];\n  const addToChecklist = (\n    label: string,\n    isComplete: boolean,\n    isFailed?: boolean\n  ) =>\n    loadingChecklistItems.push({\n      label,\n      status: isComplete ? \"complete\" : isFailed ? \"failed\" : \"pending\",\n    });\n  addToChecklist(\"Authenticated\", isAuthed, hasAuthError);\n  addToChecklist(\"Loaded Character Data\", !!characterData);\n  addToChecklist(\n    \"Loaded Destiny Manifest Defintions\",\n    hasManifestData,\n    hasManifestError\n  );\n\n  return (\n    <AppWrapper>\n      <MembershipSelect api={api} onMembershipSelect={onSelectMembership} />\n      <LoadingChecklist withTopMargin items={loadingChecklistItems} />\n      <LoadingSpinner>{status}</LoadingSpinner>\n      <Footer />\n    </AppWrapper>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              config?.onUpdate?.(registration);\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              config?.onSuccess?.(registration);\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"interPowerBar\":\"InterPowerBar_interPowerBar__1irbI\",\"min\":\"InterPowerBar_min__nPrv5\",\"max\":\"InterPowerBar_max__23K0g\",\"bar\":\"InterPowerBar_bar__1z25i\",\"fillBar\":\"InterPowerBar_fillBar__2bwYr\",\"barOverlay\":\"InterPowerBar_barOverlay___zQVM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoadingChecklist\":\"LoadingChecklist_LoadingChecklist__KbNL5\",\"topMargin\":\"LoadingChecklist_topMargin__1ARfF\",\"item\":\"LoadingChecklist_item__2_2Cl\",\"status\":\"LoadingChecklist_status__1-PMx\",\"complete\":\"LoadingChecklist_complete__1qfgG\",\"pending\":\"LoadingChecklist_pending__3ykCd\",\"failed\":\"LoadingChecklist_failed__2NRty\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lazyImage\":\"LazyImage_lazyImage__j4cxv\",\"hidden\":\"LazyImage_hidden__sfsi5\",\"overlay\":\"LazyImage_overlay__1Z9M2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"anchor\":\"FetchSpinner_anchor__2bpEe\",\"spinner\":\"FetchSpinner_spinner__3uf-_\",\"spin\":\"FetchSpinner_spin__3wMft\",\"fetchSpinnerContainer\":\"FetchSpinner_fetchSpinnerContainer__2f9d4\",\"spinnerSmall\":\"FetchSpinner_spinnerSmall__2pJsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"socialLinks\":\"SocialLinks_socialLinks__18XFZ\",\"link\":\"SocialLinks_link__3Z2Wj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"Header_headerContainer__3M_mx\",\"header\":\"Header_header__2XAj3\",\"subHeader\":\"Header_subHeader__3Ap8f\",\"author\":\"Header_author__17ihj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"LoginPrompt_loginContainer__1DfGO\",\"exampleImage\":\"LoginPrompt_exampleImage__3f80u\",\"login\":\"LoginPrompt_login__r8eqR\",\"loginButton\":\"LoginPrompt_loginButton__n1OHn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"kofiContainer\":\"KoFi_kofiContainer__1-NvR\",\"link\":\"KoFi_link__mMabj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hints\":\"PowerHints_hints__9HbgH\",\"hint\":\"PowerHints_hint__2zx_C\",\"dropHint\":\"PowerHints_dropHint__3lQ-N\",\"worldDropHint\":\"PowerHints_worldDropHint__3M_Nv\",\"legendaryWorldDropHint\":\"PowerHints_legendaryWorldDropHint__g_SSJ\",\"powerfulHint\":\"PowerHints_powerfulHint__26w25\",\"pinnacleHint\":\"PowerHints_pinnacleHint__c2cdM\",\"separator\":\"PowerHints_separator__1_of2\",\"hintExtra\":\"PowerHints_hintExtra__2TIGc\",\"hintExtraInner\":\"PowerHints_hintExtraInner__2tEbw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inlinePowerNumber\":\"Power_inlinePowerNumber__28Oqz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buildStamp\":\"BuildStamp_buildStamp__16Chc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__1G6Wy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"barWrapper\":\"PowerBar_barWrapper__2Er15\",\"generalLabel\":\"PowerBar_generalLabel__3N-0q\",\"specificLabel\":\"PowerBar_specificLabel__3OkJr\",\"iconWrapper\":\"PowerBar_iconWrapper__1k9U_\",\"icon\":\"PowerBar_icon__3zN_u\",\"barContainer\":\"PowerBar_barContainer__KfIri\",\"barLine\":\"PowerBar_barLine__Fc3BR\",\"filledBar\":\"PowerBar_filledBar__3a32S\",\"label\":\"PowerBar_label__32eba\",\"power\":\"PowerBar_power__2ZVuC\",\"max\":\"PowerBar_max__L5cvP\",\"belowAverage\":\"PowerBar_belowAverage__2r-Dj\",\"vaultOverlay\":\"PowerBar_vaultOverlay__39TWm\",\"postmasterOverlay\":\"PowerBar_postmasterOverlay__2Ir6r\",\"masterworkOverlay\":\"PowerBar_masterworkOverlay__2DcIk\"};"],"sourceRoot":""}